{"version":3,"file":"index.js","sources":["../../commons/src/define-component-patch.ts","../../node_modules/svelte/internal/index.mjs","src/assets/bold.svg","src/assets/italic.svg","src/assets/underline.svg","src/assets/list.svg","src/assets/bullet.svg","src/assets/aligned-left.svg","src/assets/aligned-right.svg","src/assets/centered.svg","src/assets/justified.svg","src/assets/link.svg","src/lib/html-editor.ts","src/components/HTMLEditor.svelte","src/components/AlertBar.svelte","src/assets/close.svg","src/assets/loading.svg","src/components/Attachment.svelte","../datepicker/src/Datepicker.svelte","src/components/DatepickerModal.svelte","src/lib/utils.ts","src/components/ContactsSearch.svelte","../../node_modules/svelte/store/index.mjs","../../commons/src/store/error.ts","../../commons/src/methods/api.ts","../../commons/src/connections/threads.ts","../../commons/src/connections/manifest.ts","../../commons/src/connections/messages.ts","../../commons/src/connections/accounts.ts","../../commons/src/connections/availability.ts","../../commons/src/store/availability.ts","../../commons/src/store/mailbox.ts","../../commons/src/store/manifest.ts","../../commons/src/methods/component.ts","../../commons/src/components/NError.svelte","src/lib/store.ts","src/lib/format-date.ts","src/assets/dash.svg","src/assets/attachment.svg","src/assets/expand.svg","src/Composer.svelte"],"sourcesContent":["export const originalDefine = window.customElements.define.bind(\n  window.customElements,\n);\nwindow.customElements.define = (name: string, ...args) => {\n  if (customElements.get(name)) {\n    return;\n  }\n  return originalDefine(name, ...args);\n};\n","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.44.2' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-bold-complete</title>\n    <g id=\"icon-bold-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M128.159574,256 C143.489362,256 157.12234,254.037978 169.058511,250.113933 C180.994681,246.189888 191.029255,240.743079 199.162234,233.773507 C207.295213,226.803935 213.468085,218.633722 217.680851,209.262869 C221.893617,199.892016 224,189.75978 224,178.866163 C224,164.341341 219.962766,152.510638 211.888298,143.374056 C203.81383,134.237474 191.351064,127.619309 174.5,123.519561 C182.223404,120.708305 188.835106,117.369938 194.335106,113.504461 C199.835106,109.638984 204.340426,105.392816 207.851064,100.765957 C211.361702,96.1390986 213.93617,91.1608328 215.574468,85.8311599 C217.212766,80.5014871 218.031915,74.9668268 218.031915,69.2271791 C218.031915,58.6849691 216.24734,49.1384123 212.678191,40.5875086 C209.109043,32.0366049 203.404255,24.7741935 195.56383,18.8002745 C187.723404,12.8263555 177.601064,8.19949668 165.196809,4.91969801 C152.792553,1.63989934 137.755319,0 120.085106,0 L120.085106,0 L26,0 L26,256 L128.159574,256 Z M116.736842,108 L86,108 L86,45 L120.578947,45 C127.215311,45 132.949362,45.525 137.7811,46.575 C142.612839,47.625 146.600478,49.375 149.744019,51.825 C152.88756,54.275 155.216108,57.5125 156.729665,61.5375 C158.243222,65.5625 159,70.6083333 159,76.675 C159,82.8583333 158.039474,87.9916667 156.118421,92.075 C154.197368,96.1583333 151.40311,99.3666667 147.735646,101.7 C144.068182,104.033333 139.614833,105.666667 134.375598,106.6 C129.136364,107.533333 123.256778,108 116.736842,108 L116.736842,108 Z M126.754386,211 L85,211 L85,147 L126.403509,147 C133.888889,147 140.087719,147.705234 145,149.115702 C149.912281,150.526171 153.859649,152.524334 156.842105,155.110193 C159.824561,157.696051 161.929825,160.869605 163.157895,164.630854 C164.385965,168.392103 165,172.623508 165,177.325069 C165,181.438935 164.473684,185.494031 163.421053,189.490358 C162.368421,193.486685 160.438596,197.071625 157.631579,200.245179 C154.824561,203.418733 150.935673,206.004591 145.964912,208.002755 C140.994152,210.000918 134.590643,211 126.754386,211 L126.754386,211 Z\" id=\"B\"  fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-italic-complete</title>\n    <g id=\"icon-italic-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <polygon id=\"I\" fill-rule=\"nonzero\" points=\"141.0907 256 172.399 -1.13686838e-13 114.7073 -1.13686838e-13 83.399 256\"></polygon>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-underline-complete</title>\n    <g id=\"icon-underline-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M218,232.537 L218,255.861 L39,255.861 L39,232.537 L218,232.537 Z M85.0543131,0.199 L85.0543131,123.091057 L85.0584142,123.932008 C85.1267664,130.910932 86.0495208,137.164899 87.8266773,142.693908 C89.6749201,148.444078 92.3525027,153.338851 95.8594249,157.378226 C99.3663472,161.417601 103.655218,164.506536 108.726038,166.645029 C113.796858,168.783521 119.554846,169.852768 126,169.852768 C132.445154,169.852768 138.203142,168.783521 143.273962,166.645029 C148.344782,164.506536 152.633653,161.441363 156.140575,157.449509 C159.647497,153.457656 162.32508,148.586644 164.173323,142.836475 C166.021565,137.086305 166.945687,130.552021 166.945687,123.233623 L166.945687,123.233623 L166.945687,0.199 L215,0.199 L215,123.233623 L214.995482,124.263974 C214.887062,136.600688 212.827066,147.947665 208.815495,158.304906 C204.692492,168.949849 198.792332,178.121607 191.115016,185.820181 C183.4377,193.518756 174.101704,199.506536 163.107029,203.783521 C152.112354,208.060507 139.743344,210.199 126,210.199 C112.161874,210.199 99.7454739,208.060507 88.7507987,203.783521 C77.7561235,199.506536 68.4201278,193.518756 60.7428115,185.820181 C53.0654952,178.121607 47.1890309,168.949849 43.1134185,158.304906 C39.0378062,147.659964 37,135.969536 37,123.233623 L37,123.233623 L37,0.199 L85.0543131,0.199 Z\" id=\"Combined-Shape\" fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-list-complete</title>\n    <g id=\"icon-list-complete\" stroke=\"none\" stroke-width=\"1\" fill-rule=\"evenodd\">\n        <path d=\"M15.9026369,188 C18.5422583,188 20.8248817,188.27794 22.7505071,188.833819 C24.6761325,189.389699 26.2555781,190.159378 27.4888438,191.142857 C28.7221095,192.126336 29.6308316,193.280855 30.2150101,194.606414 C30.7991886,195.931973 31.0912779,197.364431 31.0912779,198.90379 C31.0912779,201.469388 30.5179175,203.511176 29.3711968,205.029155 C28.224476,206.547133 26.8505747,207.733722 25.2494929,208.588921 C27.1534821,209.358601 28.7545639,210.51312 30.0527383,212.052478 C31.3509128,213.591837 32,215.665695 32,218.274052 C32,220.326531 31.6538201,222.186589 30.9614604,223.854227 C30.2691007,225.521866 29.2305612,226.965015 27.8458418,228.183673 C26.4611224,229.402332 24.7085869,230.343052 22.5882353,231.005831 C20.4678837,231.66861 17.9580798,232 15.0588235,232 C11.8999324,232 9.40094659,231.72206 7.56186613,231.166181 C5.72278567,230.610301 4.21906694,230.011662 3.05070994,229.370262 C2.14198783,228.899903 1.42799189,228.290573 0.90872211,227.542274 C0.389452333,226.793975 0.129817444,226.056365 0.129817444,225.329446 C0.129817444,224.474247 0.346179851,223.512148 0.778904665,222.443149 C1.21162948,221.37415 2.07707911,219.856171 3.37525355,217.889213 C4.63015551,219.000972 6.1663286,220.005831 7.98377282,220.90379 C9.80121704,221.801749 11.8133874,222.250729 14.020284,222.250729 C15.4915483,222.250729 16.6707235,221.876579 17.5578093,221.12828 C18.4448952,220.379981 18.8884381,219.278912 18.8884381,217.825073 C18.8884381,216.884354 18.7261663,216.136054 18.4016227,215.580175 C18.0770791,215.024295 17.6768087,214.596696 17.2008114,214.297376 C16.7248141,213.998056 16.1947262,213.794947 15.6105477,213.688047 C15.0263692,213.581147 14.4530088,213.527697 13.8904665,213.527697 L13.8904665,213.527697 L9.28194726,213.527697 L9.28194726,204.676385 L13.8255578,204.676385 L14.0831643,204.669704 C15.020284,204.620708 15.8755916,204.302235 16.6490872,203.714286 C17.4929006,203.072886 17.9148073,202.153547 17.9148073,200.956268 C17.9148073,199.758989 17.525355,198.90379 16.7464503,198.390671 C15.9675456,197.877551 14.9506423,197.620991 13.6957404,197.620991 C12.0513861,197.620991 10.4719405,197.941691 8.95740365,198.58309 C7.4428668,199.22449 5.71196755,200.229349 3.76470588,201.597668 C2.59634888,200.272109 1.67680865,199.09621 1.00608519,198.069971 C0.335361731,197.043732 0,196.060253 0,195.119534 C0,194.307094 0.227180527,193.622935 0.681541582,193.067055 C1.13590264,192.511176 1.66599053,192.019436 2.27180527,191.591837 C3.52670723,190.736638 5.29006085,189.924198 7.56186613,189.154519 C9.8336714,188.38484 12.6139283,188 15.9026369,188 Z M256,191 L256,231 L58,231 L58,191 L256,191 Z M256,110 L256,150 L58,150 L58,110 L256,110 Z M17.0752475,106 C19.1663366,106 21.1485149,106.224292 23.0217822,106.672876 C24.8950495,107.121461 26.539604,107.85842 27.9554455,108.883756 C29.3712871,109.909091 30.4930693,111.244163 31.3207921,112.888972 C32.1485149,114.53378 32.5623762,116.531048 32.5623762,118.880775 C32.5623762,120.418778 32.3445545,121.903378 31.9089109,123.334575 C31.4732673,124.765772 30.8742574,126.143567 30.1118812,127.467958 C29.349505,128.79235 28.4673267,130.074019 27.4653465,131.312966 C26.4633663,132.551913 25.3960396,133.726776 24.2633663,134.837556 C23.4792079,135.606557 22.6950495,136.364878 21.9108911,137.112519 C21.1267327,137.860159 20.3207921,138.575758 19.4930693,139.259314 L19.4930693,139.259314 L27.0079208,139.259314 L27.3805372,139.263765 C29.4640295,139.314201 31.0715072,139.793343 32.2029703,140.701192 C33.4009901,141.662444 34,143.147044 34,145.154993 C34,145.753105 33.9891089,146.276453 33.9673267,146.725037 C33.9455446,147.173621 33.9346535,147.568803 33.9346535,147.910581 C33.8910891,148.337804 33.8693069,148.700944 33.8693069,149 L33.8693069,149 L2.11089109,149 L2.11089109,140.4769 L2.48896747,140.195064 C3.25445545,139.617005 4.07595474,138.952629 4.95346535,138.201937 C5.97722772,137.32613 7.04455446,136.39692 8.15544554,135.414307 C9.26633663,134.431694 10.3772277,133.395678 11.4881188,132.306259 C12.5990099,131.216841 13.6772277,130.138102 14.7227723,129.070045 C16.2039604,127.532042 17.3584158,126.090164 18.1861386,124.744411 C19.0138614,123.398659 19.4277228,121.956781 19.4277228,120.418778 C19.4277228,119.564332 19.2861386,118.859414 19.0029703,118.304024 C18.719802,117.748634 18.349505,117.30005 17.8920792,116.958271 C17.4346535,116.616493 16.9118812,116.37084 16.3237624,116.221311 C15.7356436,116.071783 15.1584158,115.997019 14.5920792,115.997019 C12.849505,115.997019 11.1613861,116.402881 9.52772277,117.214605 C7.89405941,118.026329 6.42376238,118.96622 5.11683168,120.034277 C3.94059406,118.709886 2.96039604,117.460258 2.17623762,116.285395 C1.39207921,115.110532 1,114.095877 1,113.241431 C1,112.557874 1.18514851,111.959762 1.55544554,111.447094 C1.92574257,110.934426 2.43762376,110.44312 3.09108911,109.973174 C3.7009901,109.545951 4.44158416,109.097367 5.31287129,108.627422 C6.18415842,108.157476 7.1970297,107.730253 8.35148515,107.345753 C9.50594059,106.961252 10.8019802,106.640835 12.239604,106.384501 C13.6772277,106.128167 15.2891089,106 17.0752475,106 Z M256,28 L256,68 L58,68 L58,28 L256,28 Z M22.9369863,25 C24.1643836,25 25.1945205,25.1401003 26.0273973,25.4203008 C26.860274,25.7005013 27.5178082,25.9914787 28,26.2932331 L28,26.2932331 L28,68 L15.0465753,68 L15.0465753,40.0015038 L7.41917808,43.6225564 L6.9260274,42.8686015 C6.27726027,41.8581554 5.66356164,40.8270175 5.08493151,39.775188 C4.36164384,38.460401 4,37.2426065 4,36.1218045 C4,35.0010025 4.23013699,34.1496241 4.69041096,33.5676692 C5.15068493,32.9857143 6.03835616,32.3498747 7.35342466,31.6601504 L7.35342466,31.6601504 L17.1506849,26.6165414 L17.6091324,26.3866332 C18.3701674,26.0154275 19.1159817,25.7040936 19.8465753,25.4526316 C20.7232877,25.1508772 21.7534247,25 22.9369863,25 Z\" id=\"Combined-Shape\"  fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-bullet-complete</title>\n    <g id=\"icon-bullet-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M256,188 L256,227 L67,227 L67,188 L256,188 Z M41,188 L41,227 L0,227 L0,188 L41,188 Z M256,109 L256,148 L67,148 L67,109 L256,109 Z M41,109 L41,148 L0,148 L0,109 L41,109 Z M256,30 L256,69 L67,69 L67,30 L256,30 Z M41,30 L41,69 L0,69 L0,30 L41,30 Z\" id=\"Combined-Shape\"  fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-aligned-left-complete</title>\n    <g id=\"icon-aligned-left-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M256,190 L256,232 L0,232 L0,190 L256,190 Z M162,107 L162,149 L0,149 L0,107 L162,107 Z M256,24 L256,66 L0,66 L0,24 L256,24 Z\" id=\"Combined-Shape\"  fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-aligned-right-complete</title>\n    <g id=\"icon-aligned-right-complete\" stroke=\"none\" stroke-width=\"1\" fill-rule=\"evenodd\">\n        <path d=\"M256,190 L256,232 L0,232 L0,190 L256,190 Z M162,107 L162,149 L0,149 L0,107 L162,107 Z M256,24 L256,66 L0,66 L0,24 L256,24 Z\" id=\"Combined-Shape\"  fill-rule=\"nonzero\" transform=\"translate(128.000000, 128.000000) scale(-1, 1) translate(-128.000000, -128.000000) \"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-centered-complete</title>\n    <g id=\"icon-centered-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M204,186 L204,224 L52,224 L52,186 L204,186 Z M257,110 L257,148 L0,148 L0,110 L257,110 Z M204,32 L204,70 L52,70 L52,32 L204,32 Z\" id=\"Combined-Shape\" fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"256px\" height=\"256px\" viewBox=\"0 0 256 256\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n    <title>icon-justified-complete</title>\n    <g id=\"icon-justified-complete\" stroke=\"none\" stroke-width=\"1\"  fill-rule=\"evenodd\">\n        <path d=\"M257,186 L257,224 L0,224 L0,186 L257,186 Z M257,110 L257,148 L0,148 L0,110 L257,110 Z M256,32 L256,70 L0,70 L0,32 L256,32 Z\" id=\"Combined-Shape\" fill-rule=\"nonzero\"></path>\n    </g>\n</svg>","<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\t viewBox=\"0 0 511.997 511.997\" style=\"enable-background:new 0 0 511.997 511.997;\" xml:space=\"preserve\">\n<g transform=\"translate(1 1)\">\n\t<g>\n\t\t<g>\n\t\t\t<path d=\"M211.26,389.24l-60.331,60.331c-25.012,25.012-65.517,25.012-90.508,0.005c-24.996-24.996-24.996-65.505-0.005-90.496\n\t\t\t\tl120.683-120.683c24.991-24.992,65.5-24.992,90.491,0c8.331,8.331,21.839,8.331,30.17,0c8.331-8.331,8.331-21.839,0-30.17\n\t\t\t\tc-41.654-41.654-109.177-41.654-150.831,0L30.247,328.909c-41.654,41.654-41.654,109.177,0,150.831\n\t\t\t\tc41.649,41.676,109.177,41.676,150.853,0l60.331-60.331c8.331-8.331,8.331-21.839,0-30.17S219.591,380.909,211.26,389.24z\"/>\n\t\t\t<path d=\"M479.751,30.24c-41.654-41.654-109.199-41.654-150.853,0l-72.384,72.384c-8.331,8.331-8.331,21.839,0,30.17\n\t\t\t\tc8.331,8.331,21.839,8.331,30.17,0l72.384-72.384c24.991-24.992,65.521-24.992,90.513,0c24.991,24.991,24.991,65.5,0,90.491\n\t\t\t\tL316.845,283.638c-24.992,24.992-65.5,24.992-90.491,0c-8.331-8.331-21.839-8.331-30.17,0s-8.331,21.839,0,30.17\n\t\t\t\tc41.654,41.654,109.177,41.654,150.831,0l132.736-132.736C521.405,139.418,521.405,71.894,479.751,30.24z\"/>\n\t\t</g>\n\t</g>\n</g>\n</svg>\n","import BoldIcon from \"../assets/bold.svg\";\nimport ItalicIcon from \"../assets/italic.svg\";\nimport UnderlineIcon from \"../assets/underline.svg\";\nimport ListIcon from \"../assets/list.svg\";\nimport BulletIcon from \"../assets/bullet.svg\";\nimport JustifyLeftIcon from \"../assets/aligned-left.svg\";\nimport JustifyRightIcon from \"../assets/aligned-right.svg\";\nimport JustifyCenterIcon from \"../assets/centered.svg\";\nimport JustifyIcon from \"../assets/justified.svg\";\nimport LinkIcon from \"../assets/link.svg\";\nimport type { ToolbarItem } from \"@commons/types/Composer\";\n\nconst queryCommandState = (command: string): boolean =>\n  document.queryCommandState(command);\nexport const exec = (command: string, value?: string): boolean =>\n  document.execCommand(command, false, value);\n\nexport const defaultActions: ToolbarItem[] = [\n  {\n    title: \"Bold\",\n    state: (): boolean => queryCommandState(\"bold\"),\n    result: (): boolean => exec(\"bold\"),\n    icon: BoldIcon,\n  },\n  {\n    title: \"Italic\",\n    state: (): boolean => queryCommandState(\"italic\"),\n    result: (): boolean => exec(\"italic\"),\n    icon: ItalicIcon,\n  },\n  {\n    title: \"Underline\",\n    state: (): boolean => queryCommandState(\"underline\"),\n    result: (): boolean => exec(\"underline\"),\n    icon: UnderlineIcon,\n  },\n  {\n    title: \"Justify Left\",\n    state: (): boolean => queryCommandState(\"justifyLeft\"),\n    result: (): boolean => exec(\"justifyLeft\"),\n    icon: JustifyLeftIcon,\n  },\n  {\n    title: \"Justify Right\",\n    state: (): boolean => queryCommandState(\"justifyRight\"),\n    result: (): boolean => exec(\"justifyRight\"),\n    icon: JustifyRightIcon,\n  },\n  {\n    title: \"Justify Center\",\n    state: (): boolean => queryCommandState(\"justifyCenter\"),\n    result: (): boolean => exec(\"justifyCenter\"),\n    icon: JustifyCenterIcon,\n  },\n  {\n    title: \"Justify Full\",\n    state: (): boolean => queryCommandState(\"justifyFull\"),\n    result: (): boolean => exec(\"justifyFull\"),\n    icon: JustifyIcon,\n  },\n  {\n    title: \"Ordered List\",\n    result: (): boolean => exec(\"insertOrderedList\"),\n    icon: ListIcon,\n  },\n  {\n    title: \"Unordered List\",\n    result: (): boolean => exec(\"insertUnorderedList\"),\n    icon: BulletIcon,\n  },\n  {\n    title: \"Link\",\n    result: (): boolean => {\n      const url = prompt(\"Enter a URL:\", \"http://\");\n      return exec(\"createLink\", url || \"\");\n    },\n    icon: LinkIcon,\n  },\n];\n","<svelte:options tag=\"nylas-html-editor\" />\n\n<script lang=\"ts\">\n  import { defaultActions } from \"../lib/html-editor\";\n  import { get_current_component } from \"svelte/internal\";\n  import type { ReplaceFields, ToolbarItem } from \"@commons/types/Composer\";\n\n  export let onchange = (_html: string) => Promise.resolve({});\n  export let html = \"\";\n  export let show_editor_toolbar = true;\n  export let replace_fields: ReplaceFields[] | null = null;\n\n  let container: Element;\n  let toolbar: ToolbarItem[] = defaultActions;\n\n  $: if (html) {\n    const selection = get_current_component()?.shadowRoot?.getSelection();\n\n    if (typeof replace_fields === \"string\") {\n      replace_fields = JSON.parse(replace_fields);\n    }\n    if (selection && Array.isArray(replace_fields)) {\n      for (const field of replace_fields) {\n        html = html.replaceAll(field.from, field.to);\n        const currentFocusedNode = selection.focusNode;\n        const currentCaretPosition = selection.focusOffset;\n\n        if (currentFocusedNode && currentFocusedNode.textContent) {\n          if (currentFocusedNode.textContent.includes(field.from)) {\n            const matchCount =\n              currentFocusedNode.textContent.split(field.from).length - 1;\n            const replaceNode = document.createTextNode(\n              currentFocusedNode.textContent.replaceAll(field.from, field.to),\n            );\n\n            currentFocusedNode.replaceWith(replaceNode);\n\n            if (\n              selection.focusNode &&\n              selection.focusNode.nodeType === Node.TEXT_NODE\n            ) {\n              if (matchCount > 1) {\n                setCaretPosition(\n                  replaceNode,\n                  currentCaretPosition +\n                    (field.to.length - field.from.length) +\n                    (matchCount - 1),\n                );\n              } else {\n                setCaretPosition(\n                  replaceNode,\n                  currentCaretPosition + field.to.length - field.from.length,\n                );\n              }\n            }\n          }\n        }\n      }\n    }\n    if (onchange) onchange(html);\n  }\n  /**\n   * Sets the caret position at a given offset for a specific\n   * node.\n   *\n   * @param node Node\n   * @param offset Number\n   */\n  function setCaretPosition(node: Node, offset: number) {\n    const range = document.createRange();\n    const selection = window.getSelection();\n    range.selectNode(node);\n    range.setStart(node, offset);\n    range.collapse(true);\n    range.detach();\n    selection?.removeAllRanges();\n    selection?.addRange(range);\n  }\n\n  const handleAction = (item: ToolbarItem) => () => {\n    if (item.result) item.result();\n    updateToolbarUI();\n  };\n\n  // This function updates the toolbar UI state when you select text (eg. select bold text)\n  function updateToolbarUI() {\n    toolbar = toolbar.map((item: ToolbarItem) => {\n      if (item.state) {\n        item.active = item.state();\n      }\n      return item;\n    });\n  }\n</script>\n\n<style lang=\"scss\">\n  .html-editor {\n    min-height: var(--composer-editor-min-height, 220px);\n    max-height: var(--composer-editor-max-height, 480px);\n    *:focus {\n      outline: 5px auto var(--composer-primary-color, #5c77ff);\n    }\n  }\n  a {\n    color: var(--composer-primary-color, #5c77ff);\n    &:hover {\n      color: var(--composer-primary-dark-color, #294dff);\n    }\n  }\n  [contenteditable] {\n    padding: var(--composer-outer-padding, 15px)\n      var(--composer-outer-padding, 15px);\n    margin: 0;\n    outline: 0;\n    line-height: 1.3;\n    color: var(--composer-text-color, black);\n    overflow-y: auto;\n  }\n  .toolbar {\n    display: flex;\n    font-size: 10px;\n    align-items: center;\n    justify-content: flex-start;\n    border-bottom: 1px solid var(--composer-border-color, #f7f7f7);\n    padding: 0 calc(var(--composer-outer-padding, 15px) / 2);\n\n    button {\n      color: var(--composer-text-light-color, #6e6e7a);\n      background: none;\n      border: 0;\n      cursor: pointer;\n      display: flex;\n      padding: 8px;\n      margin: 2px;\n      outline: 0;\n      border-radius: calc(var(--composer-border-radius, 6px) / 2);\n      transition: background-color 0.3s;\n\n      &.active {\n        background: var(--composer-background-muted-color, #f0f2ff);\n      }\n      &:first-child {\n        margin-left: 0;\n      }\n      &:hover {\n        background: var(--composer-background-muted-color, #f0f2ff);\n      }\n    }\n  }\n</style>\n\n<!-- Toolbar -->\n<div class=\"html-editor\">\n  {#if show_editor_toolbar}\n    <div class=\"toolbar\">\n      {#each toolbar as item}\n        <button\n          on:click={handleAction(item)}\n          class={item.state && item.state() ? \"active\" : \"\"}\n        >\n          {#if item.icon}\n            <svelte:component\n              this={item.icon}\n              class=\"icon\"\n              style=\"fill: var(--composer-icons-color, #666774) !important; width: 12px; height: 12px;\"\n            />\n          {:else}{item.title.charAt(0)}{/if}\n        </button>\n      {/each}\n    </div>\n  {/if}\n\n  {#if false}\n    <!-- The following if statement exists to prevent svelte from stripping styling associated\n      with the HTML tags within this if statement. This is required to add styling to the \n      HTML added in the WYSIWYG editor.\n\n      This hack was implemented because svelte does not parse the :global() selector in\n      custom elements.\n\n      Note: While the CSS gets added in the final bundle, none of the HTML is generated.\n  -->\n    <!-- svelte-ignore a11y-invalid-attribute -->\n    <!-- svelte-ignore a11y-missing-attribute -->\n    <!-- svelte-ignore a11y-missing-content -->\n    <a />\n  {/if}\n\n  <div\n    contenteditable=\"true\"\n    class=\"html-editor\"\n    on:keyup={updateToolbarUI}\n    on:mouseup={updateToolbarUI}\n    bind:this={container}\n    bind:innerHTML={html}\n  />\n</div>\n","<svelte:options tag=\"nylas-composer-alert-bar\" />\n\n<script>\n  export let type = \"primary\";\n  export let dismissible = true;\n  export let visible = true;\n  export let ondismiss = null;\n\n  const close = () => {\n    if (ondismiss) ondismiss();\n    visible = false;\n  };\n</script>\n\n<style lang=\"scss\">\n  .alert-bar {\n    padding: var(--composer-outer-padding, 15px);\n    text-align: center;\n    font-size: var(--composer-font-size-small, 12px);\n    border-bottom-left-radius: var(--composer-border-color, #f7f7f7-radius);\n    border-bottom-right-radius: var(--composer-border-radius, 6px);\n    &__container {\n      display: flex;\n      align-items: center;\n      justify-content: between;\n    }\n    &__text {\n      flex-grow: 1;\n    }\n    &__close {\n      outline: 0;\n      border: 0;\n      background: none;\n      font-size: 18px;\n      opacity: 0.8;\n      cursor: pointer;\n      &:hover {\n        opacity: 1;\n      }\n    }\n    *:focus {\n      outline: 5px auto Highlight;\n      outline: 5px auto -webkit-focus-ring-color;\n    }\n    // Modifiers\n    &.success {\n      background: var(\n        --composer-success-light-color,\n        var(--composer-primary-color, #5c77ff)\n      );\n      color: var(\n        --composer-success-color,\n        var(--composer-background-color, white)\n      );\n      .alert-bar__close {\n        color: var(\n          --composer-success-color,\n          var(--composer-background-color, white)\n        );\n      }\n    }\n    &.danger {\n      background: var(--composer-danger-light-color, #ffe3e3);\n      color: var(--composer-danger-color, #ff5c5c);\n      .alert-bar__close {\n        color: var(--composer-danger-color, #ff5c5c);\n      }\n    }\n    &.info {\n      background: var(\n        --composer-info-light-color,\n        var(--composer-primary-light-color, #f0f2ff)\n      );\n      color: var(--composer-info-color, var(--composer-primary-color, #5c77ff));\n      .alert-bar__close {\n        color: var(\n          --composer-info-color,\n          var(--composer-primary-color, #5c77ff)\n        );\n      }\n    }\n  }\n</style>\n\n{#if visible}\n  <div\n    class=\"alert-bar\"\n    class:success={type === \"success\"}\n    class:warning={type === \"warning\"}\n    class:danger={type === \"danger\"}\n    class:primary={type === \"primary\"}\n    class:info={type === \"info\"}\n  >\n    <div class=\"alert-bar__container\">\n      <div class=\"alert-bar__text\">\n        <slot />\n      </div>\n      {#if dismissible}\n        <button class=\"alert-bar__close\" on:click={close}>&times;</button>\n      {/if}\n    </div>\n  </div>\n{/if}\n","<svg height=\"10\" viewBox=\"0 0 329.26933 329\" width=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0\"/></svg>","<svg id=\"Capa_1\" enable-background=\"new 0 0 497 497\" height=\"512\" viewBox=\"0 0 497 497\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\"><g><circle cx=\"98\" cy=\"376\" fill=\"#909ba6\" r=\"53\"/><circle cx=\"439\" cy=\"336\" fill=\"#c8d2dc\" r=\"46\"/><circle cx=\"397\" cy=\"112\" fill=\"#e9edf1\" r=\"38\"/><ellipse cx=\"56.245\" cy=\"244.754\" fill=\"#7e8b96\" rx=\"56.245\" ry=\"54.874\"/><ellipse cx=\"217.821\" cy=\"447.175\" fill=\"#a2abb8\" rx=\"51.132\" ry=\"49.825\"/><ellipse cx=\"349.229\" cy=\"427.873\" fill=\"#b9c3cd\" rx=\"48.575\" ry=\"47.297\"/><ellipse cx=\"117.092\" cy=\"114.794\" fill=\"#5f6c75\" rx=\"58.801\" ry=\"57.397\"/><ellipse cx=\"453.538\" cy=\"216.477\" fill=\"#dce6eb\" rx=\"43.462\" ry=\"42.656\"/><circle cx=\"263\" cy=\"62\" fill=\"#4e5a61\" r=\"62\"/></g></svg>","<svelte:options tag=\"nylas-composer-attachment\" />\n\n<script lang=\"ts\">\n  import CloseIcon from \"../assets/close.svg\";\n  import LoadingIcon from \"../assets/loading.svg\";\n  import type { Attachment } from \"@commons/types/Composer\";\n\n  export let attachment: Attachment;\n  export let remove: (attachment: Attachment) => void;\n\n  // Creates human-readable size\n  const prettySize = (size: number): string => {\n    const i = Math.floor(Math.log(size) / Math.log(1024));\n    // @ts-ignore\n    return `${(size / Math.pow(1024, i)).toFixed(2) * 1}\n      ${[\"B\", \"kB\", \"MB\", \"GB\", \"TB\"][i]}`;\n  };\n</script>\n\n<style lang=\"scss\">\n  @import \"../../../theming/variables.scss\";\n  .wrapper {\n    padding: 0.3rem 0;\n  }\n\n  .file-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0.8rem;\n    color: var(--composer-text-color, black);\n    font-weight: 700;\n    background: var(--composer-background-muted-color, #f0f2ff);\n    border-radius: var(--composer-border-radius, 6px);\n  }\n\n  .close-btn {\n    background: none;\n    border: none;\n    cursor: pointer;\n    margin-left: 10px;\n    flex-shrink: 0;\n  }\n\n  .file-info {\n    display: flex;\n    color: var(--composer-text-color, black);\n    flex-direction: column;\n    &__error {\n      color: var(--composer-danger-color, #ff5c5c);\n      font-size: var(--composer-font-size-small, 12px);\n      margin-right: 5px;\n    }\n    &__right {\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      flex-shrink: 0;\n      margin-left: 10px;\n    }\n  }\n\n  .file-item__size {\n    flex-shrink: 0;\n    word-break: keep-all;\n    color: var(--composer-text-light-color, #6e6e7a);\n    margin-top: 10px;\n    font-size: var(--composer-font-size-small, 12px);\n  }\n\n  @keyframes rotate {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  @media #{$desktop} {\n    .file-info {\n      flex-direction: row;\n      align-items: center;\n      max-width: 90%;\n    }\n    .file-item__size {\n      margin: 0 0 0 5px;\n    }\n  }\n</style>\n\n{#if attachment}\n  <div class=\"wrapper\">\n    <div class=\"file-item\">\n      <div class=\"file-info\">\n        {#if !attachment.error}\n          <div>{attachment.filename}</div>\n          <span class=\"file-item__size\">{prettySize(attachment.size)}</span>\n        {/if}\n      </div>\n      <div class=\"file-info__right\">\n        {#if attachment.loading}\n          <LoadingIcon\n            style=\"fill: var(--composer-icons-color, #666774); width: 15px; height: 15px; animation: rotate 0.5s infinite linear;\"\n          />\n        {/if}\n        {#if attachment.error}\n          <span class=\"file-info__error\">\n            {attachment.errorMessage ??\n              \"Error: Please try attaching the file again.\"}\n          </span>\n        {/if}\n        {#if !attachment.loading}\n          <button class=\"close-btn\" on:click={() => remove(attachment)}>\n            <CloseIcon class=\"CloseIcon\" />\n          </button>\n        {/if}\n      </div>\n    </div>\n  </div>\n{/if}\n","<svelte:options tag=\"nylas-datepicker\" immutable={true} />\n\n<script lang=\"ts\">\n  import { tick } from \"svelte\";\n  const months: string[] = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  export let value: Date = new Date();\n  export let min: Date | null;\n  export let max: Date | null;\n  export let timepicker: boolean = false;\n  export let change: Datepicker.ChangeCallback | void;\n  let currentDate: Date = new Date();\n  let selectedDate: Date = new Date();\n  let dates: Datepicker.Dates[] = [];\n  let hours: Datepicker.Time[] = [];\n  let minutes: Datepicker.Time[] = [];\n  let hoursSelect: HTMLSelectElement;\n  let minutesSelect: HTMLSelectElement;\n  const UNIXDAY: number = 86340000; // 23h 59m\n  const populate = () => {\n    // Set initial values\n    if (value) {\n      selectedDate = value;\n    }\n    if (timepicker) {\n      getHours();\n      getMinutes();\n    }\n  };\n  // Returns number of days of the month\n  const daysInMonth = (\n    year: number,\n    month: number,\n    modifier: number = 1,\n  ): number => {\n    let d = new Date(year, month + modifier, 0);\n    return d.getDate();\n  };\n  // Changes month\n  const changeMonth = (x: number) => {\n    currentDate = new Date(currentDate.setMonth(currentDate.getMonth() + x));\n    setDays();\n  };\n  const setDate = (date: Date) => {\n    const dateToSelect = new Date(date);\n    // if timepicker active set time as well\n    if (timepicker) {\n      dateToSelect.setHours(parseInt(hoursSelect.value));\n      dateToSelect.setMinutes(parseInt(minutesSelect.value));\n    }\n    selectedDate = new Date(dateToSelect);\n\n    if (min) {\n      if (formatDate(min) === formatDate(date)) {\n        selectedDate = new Date(min);\n      }\n    }\n    if (max) {\n      if (formatDate(max) === formatDate(date)) {\n        selectedDate = new Date(max);\n      }\n    }\n    setSelected();\n    if (timepicker) {\n      setHours();\n      setMinutes();\n    }\n  };\n  const setHour = () => {\n    selectedDate = new Date(selectedDate.setHours(parseInt(hoursSelect.value)));\n    if (min && !max) {\n      if (formatDate(min) === formatDate(selectedDate)) {\n        selectedDate = new Date(selectedDate.setMinutes(min.getMinutes()));\n      }\n    } else if (max && !min) {\n      if (formatDate(max) === formatDate(selectedDate)) {\n        selectedDate = new Date(selectedDate.setMinutes(max.getMinutes()));\n      }\n    } else if (max && min) {\n      if (formatDate(min) === formatDate(selectedDate)) {\n        selectedDate = new Date(selectedDate.setMinutes(min.getMinutes()));\n      } else if (formatDate(max) === formatDate(selectedDate)) {\n        selectedDate = new Date(selectedDate.setMinutes(max.getMinutes()));\n      }\n    } else {\n    }\n    setMinutes();\n  };\n  const setMinute = () => {\n    selectedDate = new Date(\n      selectedDate.setMinutes(parseInt(minutesSelect.value)),\n    );\n  };\n  const setClock = (hours: number) => {\n    selectedDate = new Date(\n      selectedDate.setHours(selectedDate.getHours() + hours),\n    );\n  };\n  const formatHours = (x: number): string => {\n    x = x > 12 ? x - 12 : x === 0 ? 12 : x;\n    return `${x}`.length < 2 ? `0${x}` : `${x}`;\n  };\n  const getHours = () => {\n    const hourList: Datepicker.Time[] = [];\n    for (let x = 0; x < 24; x++) {\n      hourList.push({\n        value: x,\n        text: formatHours(x),\n        disabled: false,\n      });\n    }\n    hours = hourList;\n    setHours();\n  };\n  const setHours = () =>\n    (hours = hours.map((hour: Datepicker.Time) => {\n      hour.disabled = false;\n      if (min && !max) {\n        if (formatDate(min) === formatDate(selectedDate)) {\n          hour.disabled = hour.value < min.getHours();\n        }\n      } else if (max && !min) {\n        if (formatDate(max) === formatDate(selectedDate)) {\n          hour.disabled = hour.value > max.getHours();\n        }\n      } else if (max && min) {\n        if (formatDate(min) === formatDate(selectedDate)) {\n          hour.disabled = hour.value < min.getHours();\n        } else if (formatDate(max) === formatDate(selectedDate)) {\n          hour.disabled = hour.value > max.getHours();\n        }\n      }\n      return hour;\n    }));\n  const getMinutes = () => {\n    const minuteList: Datepicker.Time[] = [];\n    for (let x = 0; x < 60; x++) {\n      minuteList.push({\n        value: x,\n        text: `${x}`.length < 2 ? `0${x}` : `${x}`,\n        disabled: false,\n      });\n    }\n\n    minutes = minuteList;\n    setMinutes();\n  };\n  const setMinutes = () =>\n    (minutes = minutes.map((minute: Datepicker.Time) => {\n      minute.disabled = false;\n\n      if (min && !max) {\n        if (\n          formatDate(min) === formatDate(selectedDate) &&\n          selectedDate.getHours() === min.getHours()\n        ) {\n          minute.disabled = minute.value < min.getMinutes();\n        }\n      } else if (max && !min) {\n        if (\n          formatDate(max) === formatDate(selectedDate) &&\n          selectedDate.getHours() === max.getHours()\n        ) {\n          minute.disabled = minute.value > max.getMinutes();\n        }\n      } else if (max && min) {\n        if (\n          formatDate(min) === formatDate(selectedDate) &&\n          selectedDate.getHours() === min.getHours()\n        ) {\n          minute.disabled = minute.value < min.getMinutes();\n        } else if (\n          formatDate(max) === formatDate(selectedDate) &&\n          selectedDate.getHours() === max.getHours()\n        ) {\n          minute.disabled = minute.value > max.getMinutes();\n        }\n      }\n      return minute;\n    }));\n  function formatDate(date: Date): string {\n    let month = \"\" + (date.getMonth() + 1),\n      day = \"\" + date.getDate(),\n      year = date.getFullYear();\n\n    if (month.length < 2) month = \"0\" + month;\n    if (day.length < 2) day = \"0\" + day;\n\n    return [year, month, day].join(\"-\");\n  }\n  const setSelected = () =>\n    (dates = dates.map((d: Datepicker.Dates) => {\n      if (min && !max) {\n        d.isDisabled = d.date.getTime() + UNIXDAY < min.getTime();\n      }\n      if (max && !min) {\n        d.isDisabled = d.date.getTime() > max.getTime();\n      }\n      if (max && min) {\n        d.isDisabled =\n          d.date.getTime() + UNIXDAY < min.getTime() ||\n          d.date.getTime() > max.getTime();\n      }\n      d.isSelected =\n        formatDate(d.date) === formatDate(selectedDate) && !d.isDisabled\n          ? true\n          : false;\n      return d;\n    }));\n  const setDays = () => {\n    dates = [];\n    currentDate = new Date(currentDate.setDate(1));\n    const lastDay = daysInMonth(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n    );\n    const lastPrevDay = daysInMonth(\n      currentDate.getFullYear(),\n      currentDate.getMonth(),\n      0,\n    );\n    // Days in previous month\n    for (let x = currentDate.getDay(); x > 0; x--) {\n      dates = [\n        ...dates,\n        {\n          day: lastPrevDay - x + 1,\n          activeMonth: false,\n          date: new Date(\n            currentDate.getFullYear(),\n            currentDate.getMonth() - 1,\n            lastPrevDay - x + 1,\n          ),\n        },\n      ];\n    }\n    // Days in current month\n    for (let x = 1; x <= lastDay; x++) {\n      dates = [\n        ...dates,\n        {\n          day: x,\n          activeMonth: true,\n          date: new Date(currentDate.getFullYear(), currentDate.getMonth(), x),\n        },\n      ];\n    }\n    // Days in next month\n    const nextDays = 42 - dates.length;\n    for (let x = 1; x <= nextDays; x++) {\n      dates = [\n        ...dates,\n        {\n          day: x,\n          activeMonth: false,\n          date: new Date(\n            currentDate.getFullYear(),\n            currentDate.getMonth() + 1,\n            x,\n          ),\n        },\n      ];\n    }\n    // Update Selected date\n    setSelected();\n  };\n  setDays();\n\n  $: if (selectedDate && change) {\n    tick().then(() => {\n      // @ts-ignore\n      change(selectedDate);\n    });\n  }\n  $: currentMonth = currentDate.getMonth();\n  $: currentYear = currentDate.getFullYear();\n  $: selectableMonth = dates.filter((d) => d.activeMonth && !d.isDisabled)\n    .length;\n  $: if (value || min || max || timepicker) {\n    populate();\n\n    setSelected();\n  }\n  $: isAmDisabled = () => {\n    if (min) {\n      if (formatDate(min) === formatDate(selectedDate)) {\n        return min.getHours() >= 12;\n      }\n      return false;\n    }\n  };\n  $: isPmDisabled = () => {\n    if (max) {\n      if (formatDate(max) === formatDate(selectedDate)) {\n        return max.getHours() < 12;\n      }\n      return false;\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  //Total width divided by days in a week\n  $day-block-width: 100%/7;\n  $day-text-selected-color: var(--background);\n  $day-background-color: var(--background);\n  $day-background-hover-color: var(--primary-dark);\n  $day-background-selected-color: var(--primary);\n\n  .nylas-datepicker {\n    --font: sans-serif;\n    --background: white;\n    --text: black;\n    --text-light: #6e6e7a;\n    --border-radius: 16px;\n    --shadow: 0 1px 10px rgba(0, 0, 0, 0.11), 0 3px 36px rgba(0, 0, 0, 0.12);\n    --font: sans-serif;\n    --font-size: 12px;\n    --border: #f7f7f7;\n    --primary: #5c77ff;\n  }\n  .datepicker {\n    font-family: var(--font);\n    width: 100%;\n    font-size: var(--font-size);\n    background: var(--background);\n    font-family: sans-serif;\n    font-size: 14px;\n  }\n  .datepicker-wrapper {\n    padding: 1rem;\n  }\n  .datepicker-dates {\n    display: flex;\n    flex-direction: column;\n  }\n  .label-days {\n    flex: 1;\n    display: flex;\n    flex-wrap: wrap;\n  }\n  .datepicker-header {\n    padding: 10px;\n    color: var(--text);\n    margin: 0px;\n  }\n  .datepicker-controls {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px;\n  }\n  .datepicker-btn {\n    height: 31px;\n    width: 31px;\n    background: var(--background);\n    font-size: 18px;\n    cursor: pointer;\n    font-weight: 700;\n    border-radius: 50px;\n    border: none;\n    color: var(--text);\n  }\n  .datepicker-btn:hover {\n    background: $day-background-hover-color !important;\n    color: var(--button-active-text);\n  }\n  .datepicker-btn:focus {\n    outline: none;\n  }\n  .label-days > div {\n    flex-basis: $day-block-width;\n    text-align: center;\n  }\n  .days {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n  }\n  .label {\n    color: var(--text-light);\n    font-size: 10px;\n  }\n  .current {\n    font-weight: 700;\n  }\n  .current-month h3 {\n    color: var(--text);\n    margin: 0px;\n  }\n  .selected {\n    background: $day-background-selected-color !important;\n    color: var(--button-active-text) !important;\n    font-weight: 700;\n  }\n  .days div {\n    flex-basis: $day-block-width;\n    text-align: center;\n    margin-top: 3px;\n    box-sizing: border-box;\n    margin-bottom: 3px;\n  }\n  .days div button {\n    border-radius: 50px;\n    background: $day-background-color;\n    color: var(--text);\n    width: 30px;\n    font-size: 12px;\n    font-weight: 500;\n    height: 30px;\n    padding: 0;\n    text-align: center;\n    cursor: pointer;\n    border: none;\n  }\n  .days div button:focus {\n    outline: 0;\n  }\n  .days div button:hover {\n    background: $day-background-hover-color;\n    color: var(--button-active-text) !important;\n  }\n  .days div button:disabled {\n    color: var(--text-light);\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  .timepicker {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px 10px;\n  }\n  .timepicker div {\n    display: flex;\n  }\n  .timepicker p {\n    margin: 0;\n    color: var(--text-light);\n  }\n  .picker {\n    border-radius: 4px;\n    border: none;\n    color: var(--text);\n    padding: 5px 0px;\n    background: $day-background-color;\n    margin: 0px 3px;\n    width: 100%;\n  }\n  .clock {\n    border-radius: 4px;\n    display: flex;\n    width: 75px;\n    background: $day-background-color;\n    // border: none;\n  }\n  .time {\n    flex: 1;\n    // border: none;\n  }\n  .clock-button {\n    border-radius: 4px;\n    color: #a4aaad;\n    background: none;\n    cursor: pointer;\n    flex: 1;\n    padding: 5px 0px;\n    border: none;\n    outline: 0;\n  }\n  .clock-button:disabled {\n    cursor: not-allowed;\n  }\n  .clock-button-active {\n    color: #fff;\n    background: var(--primary);\n  }\n  .tooltip {\n    position: relative;\n    display: inline-block;\n  }\n\n  .tooltip .tooltiptext {\n    opacity: 0;\n    visibility: hidden;\n    width: 120px;\n    background-color: white;\n    color: #000;\n    text-align: center;\n    border-radius: 6px;\n    padding: 5px 0;\n    box-shadow: 0 1px 10px rgba(0, 0, 0, 0.11), 0 3px 10px rgba(0, 0, 0, 0.12);\n    /* Position the tooltip */\n    position: absolute;\n    z-index: 1;\n    top: 110%;\n    left: 50%;\n    margin-left: -60px;\n    transition: opacity 0.3s;\n    transition-delay: 1s;\n  }\n  .tooltip:hover .tooltiptext {\n    opacity: 1;\n    visibility: visible;\n  }\n  .error {\n    background: #ffe3e3;\n    text-align: center;\n    border-radius: 0px 0px 10px 10px;\n    padding: 0.7rem;\n    color: #ff6060;\n  }\n</style>\n\n<div>\n  <div class=\"datepicker\" id=\"datepicker\">\n    <div class=\"datepicker-wrapper\">\n      <h2 class=\"datepicker-header\">\n        Pick a date\n        {timepicker ? \" and time\" : \"\"}\n      </h2>\n      <div class=\"datepicker-controls\">\n        <div class=\"current-month\">\n          <h3>{months[currentMonth]} {currentYear}</h3>\n        </div>\n        <div>\n          <div class=\"tooltip\">\n            <button class=\"datepicker-btn\" on:click={() => changeMonth(-1)}>\n              &lsaquo;\n            </button>\n            <span class=\"tooltiptext\">Previous month</span>\n          </div>\n          <div class=\"tooltip\">\n            <button class=\"datepicker-btn\" on:click={() => changeMonth(1)}>\n              &rsaquo;\n            </button>\n            <span class=\"tooltiptext\">Next month</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"datepicker-dates\">\n        <div class=\"label-days\">\n          <div class=\"day label\">SUN</div>\n          <div class=\"day label\">MON</div>\n          <div class=\"day label\">TUE</div>\n          <div class=\"day label\">WED</div>\n          <div class=\"day label\">THU</div>\n          <div class=\"day label\">FRI</div>\n          <div class=\"day label\">SAT</div>\n        </div>\n\n        <div id=\"calendarDays\" class=\"days\">\n          {#each dates as date (date)}\n            <div>\n              <button\n                class:label={!date.activeMonth}\n                class:current={date.activeMonth}\n                class:selected={date.isSelected}\n                disabled={date.isDisabled}\n                on:click={() => setDate(date.date)}>{date.day}</button\n              >\n            </div>\n          {/each}\n        </div>\n        {#if timepicker}\n          <div class=\"timepicker\">\n            <p>Set time</p>\n            <div class=\"time\">\n              <select\n                class=\"picker\"\n                value={selectedDate.getHours()}\n                bind:this={hoursSelect}\n                on:blur={() => setHour()}\n              >\n                {#each hours as hour (hour)}\n                  {#if selectedDate.getHours() >= 12 && hour.value >= 12}\n                    <option value={hour.value} disabled={hour.disabled}>\n                      {hour.text}\n                    </option>\n                  {:else if selectedDate.getHours() < 12 && hour.value < 12}\n                    <option value={hour.value} disabled={hour.disabled}>\n                      {hour.text}\n                    </option>\n                  {/if}\n                {/each}\n              </select>\n              <select\n                class=\"picker\"\n                bind:this={minutesSelect}\n                on:blur={() => setMinute()}\n                value={selectedDate.getMinutes()}\n              >\n                {#each minutes as minute (minute)}\n                  <option value={minute.value} disabled={minute.disabled}>\n                    {minute.text}\n                  </option>\n                {/each}\n              </select>\n            </div>\n            <div class=\"clock\">\n              <button\n                class={selectedDate.getHours() < 12\n                  ? \"clock-button clock-button-active\"\n                  : \"clock-button\"}\n                on:click={() => selectedDate.getHours() >= 12 && setClock(-12)}\n                disabled={isAmDisabled()}>AM</button\n              >\n              <button\n                class={selectedDate.getHours() >= 12\n                  ? \"clock-button clock-button-active\"\n                  : \"clock-button\"}\n                on:click={() => selectedDate.getHours() < 12 && setClock(12)}\n                disabled={isPmDisabled()}>PM</button\n              >\n            </div>\n          </div>\n        {/if}\n      </div>\n    </div>\n  </div>\n</div>\n","<svelte:options tag=\"nylas-composer-datepicker-modal\" />\n\n<script type=\"ts\">\n  import \"../../../datepicker/src/Datepicker.svelte\"; // TODO: for local development. This'll update your bundle on commons changes.\n  import CloseIcon from \"../assets/close.svg\";\n  import type {\n    DatepickerCallback,\n    DatepickerCloseCallback,\n  } from \"@commons/types/Composer\";\n\n  let selectedDate: Date;\n  export let schedule: DatepickerCallback;\n  export let close: DatepickerCloseCallback;\n  const change = (date: Date) => {\n    selectedDate = date;\n  };\n\n  const submit = () => {\n    schedule(Math.trunc(selectedDate.getTime() / 1000));\n  };\n</script>\n\n<style type=\"scss\">\n  // .modal {\n\n  //   overflow: auto; /* Enable scroll if needed */\n  //   background-color: rgb(0, 0, 0); /* Fallback color */\n  //   background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */\n  // }\n\n  /* Modal Content/Box */\n  .modal-content {\n    display: block; /* Hidden by default */\n    box-shadow: var(\n      --composer-shadow,\n      0 1px 10px rgba(0, 0, 0, 0.11),\n      0 3px 36px rgba(0, 0, 0, 0.12)\n    );\n    border-radius: var(--composer-border-radius, 6px);\n  }\n\n  /* The Close Button */\n  .close {\n    color: var(--composer-text-light-color, #6e6e7a);\n    float: right;\n    padding-right: 10px;\n    font-size: 28px;\n    font-weight: bold;\n  }\n\n  .close:hover,\n  .close:focus {\n    color: var(--composer-text-color, black);\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  .save-btn {\n    border: 0;\n    background: var(--composer-primary-color, #5c77ff);\n    width: 100%;\n    color: white;\n    cursor: pointer;\n    padding: 10px 25px;\n    font-weight: bold;\n    border-radius: 0 0 var(--composer-border-radius, 6px)\n      var(--composer-border-radius, 6px);\n    font-family: var(--composer-font, sans-serif);\n    &:disabled {\n      opacity: 0.5;\n    }\n    &:hover {\n      background: var(--composer-primary-dark-color, #294dff);\n    }\n  }\n\n  .datepicker-modal {\n    position: absolute;\n    bottom: calc(var(--composer-outer-padding, 15px) * 0.85);\n    right: calc(var(--composer-outer-padding, 15px) * 0.85);\n    left: calc(var(--composer-outer-padding, 15px) * 0.85);\n  }\n\n  .CloseIcon {\n    fill: var(--composer-icons-color, #666774);\n    width: 10px;\n    height: 10px;\n  }\n</style>\n\n<!-- Modal content -->\n\n<div class=\"datepicker-modal\">\n  <div class=\"modal-content\">\n    <span class=\"close\" on:click={close}>\n      <CloseIcon class=\"CloseIcon\" />\n    </span>\n    <nylas-datepicker {change} timepicker={true} min={new Date()} />\n    <button class=\"save-btn\" on:click={submit}> Schedule send </button>\n  </div>\n</div>\n","import type { CallbackDebounceFunction } from \"@commons/types/ContactsSearch\";\n\nexport const debounce = (\n  func: CallbackDebounceFunction,\n  wait: number,\n): CallbackDebounceFunction => {\n  let timeout: ReturnType<typeof setTimeout>;\n\n  return function executedFunction(...args: unknown[]): void {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\nexport const isValidEmail = (email: string): boolean => {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n};\n","<svelte:options tag=\"nylas-contacts-search\" immutable={true} />\n\n<script lang=\"ts\">\n  import { debounce, isValidEmail } from \"../lib/utils\";\n  import { tick } from \"svelte\";\n  import type { Participant } from \"@commons/types/Nylas\";\n  import type {\n    FetchContactsCallback,\n    ChangeCallback,\n    BlurOptions,\n  } from \"@commons/types/ContactsSearch\";\n  export let contacts: Participant[] | FetchContactsCallback;\n\n  export let value: Participant[] = [];\n  export let placeholder: string = \"To\";\n  export let single: boolean = false;\n  export let change: ChangeCallback | void;\n  export let show_dropdown: boolean = true;\n\n  let selectedContacts: Participant[] = [];\n  let term: string = \"\"; // TODO: rename to \"term\"\n  let currentContactIndex = 0;\n  let loading = false;\n  let searchField: HTMLInputElement;\n  let contactsList: Participant[] = [];\n  let isOpen = false;\n\n  // Initial state setup\n  const initialSetup = () => {\n    if (Array.isArray(contacts)) {\n      contactsList = contacts;\n    }\n    if (Array.isArray(value)) {\n      selectedContacts = value;\n    }\n  };\n\n  const nylasContacts = () => {\n    return [];\n  };\n  const getContactsSetup = (term: string) => {\n    loading = true;\n    contactsList = [];\n    getContacts(term);\n  };\n  const getContacts = debounce(async (term: string) => {\n    loading = true;\n    // @ts-ignore\n    const getContactsFunc =\n      typeof contacts === \"function\" ? contacts : nylasContacts;\n    try {\n      contactsList = await getContactsFunc(term);\n\n      loading = false;\n    } catch (error) {\n      // TODO: add error handling\n      loading = false;\n    }\n  }, 350);\n\n  const removeContact = (email: string) => {\n    selectedContacts = selectedContacts.filter((c) => c.email !== email);\n    focusSearch();\n  };\n  const selectContact = (contact: Participant) => {\n    if (single && selectedContacts.length === 1) {\n      selectedContacts = [contact];\n      isOpen = false;\n      return;\n    }\n    if (!isSelected(contact.email)) {\n      selectedContacts = [...selectedContacts, contact];\n    }\n    focusSearch();\n  };\n\n  const focusSearch = (e?: MouseEvent) => {\n    if (e?.target && searchField && (!single || !selectedContacts.length)) {\n      const element = e.target as HTMLElement;\n      if (element.tagName !== \"INPUT\") {\n        // handles bug when input is clicked, the input is blurred\n        searchField.focus();\n      }\n      isOpen = true;\n    }\n  };\n\n  $: if (searchField) {\n    searchField.setAttribute(\"tabindex\", \"-1\");\n    searchField.focus();\n    searchField.removeAttribute(\"tabindex\");\n  }\n\n  const blurSearch = (options: BlurOptions = {}) => {\n    setTimeout(() => {\n      if (options.addContact && !filteredContacts.length && term) {\n        handleSubmit();\n      }\n      isOpen = false;\n      term = \"\";\n      if (searchField) {\n        searchField.blur();\n      }\n    }, options.blurIn || 250);\n  };\n  const handleKeydown = (event: KeyboardEvent) => {\n    // Backspace\n    focusSearch();\n\n    if (event.key === \"Backspace\" && selectedContacts.length && !term) {\n      selectedContacts = selectedContacts.slice(0, selectedContacts.length - 1);\n    }\n    if (event.key === \"Tab\") {\n      handleSubmit();\n    }\n    // DownArrow\n    if (event.key === \"ArrowDown\" && contactsList.length) {\n      if (currentContactIndex <= contactsList.length) {\n        currentContactIndex += 1;\n      }\n    }\n    // UpArrow\n    if (event.key === \"ArrowUp\" && contactsList.length) {\n      if (currentContactIndex != 0) {\n        currentContactIndex -= 1;\n      }\n    }\n    if (event.key === \"Escape\" && contactsList.length) {\n      blurSearch();\n    }\n  };\n  const setActiveContact = (index: number) => {\n    currentContactIndex = index;\n  };\n  const handleSubmit = () => {\n    if (single && selectedContacts.length === 1) {\n      return;\n    }\n    if (filteredContacts.length) {\n      if (!isSelected(filteredContacts[currentContactIndex].email)) {\n        selectedContacts = [\n          ...selectedContacts,\n          filteredContacts[currentContactIndex],\n        ];\n        currentContactIndex = 0;\n        blurSearch({ blurIn: 0 });\n      }\n    }\n    if (!isSelected(term) && term) {\n      if (isValidEmail(term)) {\n        selectedContacts = [...selectedContacts, { email: term }];\n        currentContactIndex = 0;\n        blurSearch({ blurIn: 0 });\n      }\n    }\n  };\n  const isSelected = (email: string) => {\n    return selectedContacts.map((c) => c.email).includes(email);\n  };\n\n  $: if (selectedContacts && change) {\n    tick().then(() => {\n      // @ts-ignore\n      change(selectedContacts);\n    });\n  }\n  $: if (contacts || value) initialSetup();\n  $: if (isOpen && typeof contacts === \"function\") getContactsSetup(term);\n  $: filteredContacts = contactsList.filter((item) => {\n    const trm: string = term ? term.toLowerCase() : \"\";\n    const name: string = item.name ? item.name.toLowerCase() : \"\";\n    const email: string = item.email ? item.email.toLowerCase() : \"\";\n    const includesName = name.includes(trm);\n    const includesEmail = email.includes(trm);\n    const matched = includesName || includesEmail;\n    return matched && !isSelected(item.email);\n  });\n  $: if (filteredContacts) {\n    currentContactIndex = 0;\n  }\n</script>\n\n<style lang=\"scss\">\n  :root {\n    font-family: sans-serif;\n  }\n  .contacts-container {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    padding: 0.4rem var(--outer-padding);\n    border-bottom: 1px solid var(--border);\n    *:focus {\n      outline: 5px auto var(--primary);\n    }\n  }\n  .contacts-container > div {\n    padding-bottom: 0.1rem;\n    padding-right: 0.1rem;\n  }\n  .contact-item {\n    display: inline-flex;\n    background: var(--primary-light);\n    color: var(--primary);\n    align-items: center;\n    border-radius: calc(var(--border-radius) / 2);\n    padding: 0.2rem 0.8rem;\n    margin-right: 0.25rem;\n    margin-top: 2px;\n    margin-bottom: 2px;\n  }\n  .contact-item > button {\n    color: var(--text-secondary);\n    border: none;\n    background: none;\n    padding: 2px 4px;\n    font-weight: bold;\n    font-size: 13px;\n    cursor: pointer;\n  }\n  .contact-item__name {\n    color: var(--text-secondary);\n    font-size: 12px;\n    padding-right: 0.75rem;\n  }\n  .dropdown {\n    width: 100%;\n    position: relative;\n    display: inline-block;\n  }\n\n  .dropdown-content {\n    display: block;\n    position: absolute;\n    max-height: 350px;\n    background: var(--background);\n    left: calc(var(--outer-padding) / 2);\n    right: calc(var(--outer-padding) / 2);\n    overflow-y: auto;\n    color: var(--text);\n    box-shadow: var(--shadow);\n    z-index: 1;\n    border-radius: calc(var(--border-radius) / 2);\n  }\n\n  .dropdown-item {\n    cursor: pointer;\n    padding: var(--outer-padding);\n    font-size: var(--font-size-small);\n    background: var(--primary-light);\n\n    &.active {\n      background-color: var(--primary);\n      color: white;\n      .dropdown-item__email {\n        color: var(--bg) !important;\n      }\n    }\n    &.selected {\n      opacity: 0.3;\n    }\n    &__name {\n      font-weight: bold;\n      display: inline-flex;\n    }\n    &__email {\n      color: var(--text-light);\n      display: inline-flex;\n      margin-left: 0.25rem;\n    }\n  }\n  .search-field {\n    border: none;\n    color: var(--text);\n    background: var(--bg);\n    min-width: 100%;\n    &:focus {\n      width: 100px;\n    }\n  }\n  .search-form {\n    display: flex;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n    align-items: center;\n    min-width: 320px;\n  }\n\n  .contacts-results {\n    display: flex;\n    align-items: center;\n  }\n\n  .contacts-placeholder {\n    font-size: var(--font-size-small);\n    margin-right: 10px;\n    min-width: 30px;\n    display: flex;\n    color: var(--text-light);\n  }\n</style>\n\n<div class=\"dropdown\">\n  <div class=\"contacts-container\" on:click={focusSearch}>\n    <div class=\"contacts-results\">\n      <div class=\"contacts-placeholder\">{placeholder}</div>\n      <div class=\"contacts-results-inner\">\n        {#each selectedContacts as contact (contact.email)}\n          <div class=\"contact-item\">\n            <span class=\"contact-item__name\">\n              {#if contact.name}\n                <strong>{contact.name}</strong>\n                {`<${contact.email}>`}\n              {:else}{contact.email}{/if}\n            </span>\n            <button\n              type=\"button\"\n              name=\"term\"\n              on:click={() => removeContact(contact.email)}>&times;</button\n            >\n          </div>\n        {/each}\n      </div>\n    </div>\n\n    {#if (single && !selectedContacts.length) || !single}\n      <form on:submit|preventDefault={handleSubmit} class=\"search-form\">\n        <input\n          data-cy=\"contacts-search-field\"\n          type=\"text\"\n          name=\"email\"\n          autocomplete=\"off\"\n          class=\"search-field\"\n          bind:this={searchField}\n          on:keydown={handleKeydown}\n          on:blur={() => {\n            blurSearch({ addContact: true });\n          }}\n          bind:value={term}\n        />\n      </form>\n    {/if}\n  </div>\n  {#if isOpen && show_dropdown}\n    <div class=\"dropdown-content\">\n      {#if loading && !filteredContacts.length}\n        <p class=\"dropdown-item\">Loading...</p>\n      {:else if filteredContacts.length}\n        {#each filteredContacts as contact, i}\n          <div\n            class=\"dropdown-item\"\n            class:active={currentContactIndex === i}\n            class:selected={isSelected(contact.email)}\n            on:mousedown={() => selectContact(contact)}\n            on:mouseenter={() => setActiveContact(i)}\n          >\n            {#if contact.name}\n              <div class=\"dropdown-item__name\">{contact.name}</div>\n              <div class=\"dropdown-item__email\">{contact.email}</div>\n            {:else}\n              <div class=\"dropdown-item__name\">{contact.email}</div>\n            {/if}\n          </div>\n        {/each}\n      {/if}\n    </div>\n  {/if}\n</div>\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { Writable, writable } from \"svelte/store\";\nimport type { Manifest } from \"@commons/types/Nylas\";\n\ntype ErrorStore = Record<string, Manifest[\"error\"]>;\n\nfunction initialize(): Writable<ErrorStore> {\n  return writable({});\n}\n\nexport const ErrorStore = initialize();\n","import { ErrorStore } from \"../store/error\";\nimport type { Manifest } from \"@commons/types/Nylas\";\n\nexport async function handleResponse<T = unknown>(\n  response: Response,\n): Promise<T> {\n  if (!response.ok) {\n    const passedError = await response\n      .json()\n      .then((json: { message: string; name: string }) => json);\n    const error = new Error(passedError.message);\n    error.name = passedError.name;\n    return Promise.reject({ message: error, statusCode: response.status });\n  }\n  return response.json();\n}\n\ntype HTTPMethod = \"POST\" | \"GET\" | \"PUT\" | \"PATCH\" | \"OPTIONS\" | undefined;\n\ntype FetchOptions = {\n  body?: unknown;\n  method?: HTTPMethod;\n  component_id?: string;\n  access_token?: string;\n};\n\nexport function getFetchConfig(\n  opts: FetchOptions = { component_id: \"\" },\n): RequestInit {\n  return {\n    method: opts.method || \"GET\", // GET is default method\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      \"X-Component-Id\": opts.component_id || \"\", // Component ID is passed as header\n      \"X-Access-Token\": opts.access_token || \"\", // Access Token is passed as header\n    },\n    body: opts.body ? JSON.stringify(opts.body) : undefined,\n  };\n}\n\nexport function handleError(id: string, error: Manifest[\"error\"]): never {\n  if (process.env.NODE_ENV !== \"production\") console.error(error);\n  ErrorStore.update((errorMap) => ({ ...errorMap, [id]: error }));\n  throw error;\n}\n\nconst REGION_MAPPING: Record<string, string> = {\n  \"001\": \"\", // US\n  \"002\": \"ireland-\", // EU\n  \"003\": \"canada-\", // Canada\n};\n\nexport function getMiddlewareApiUrl(id: string): string {\n  let region = \"\";\n  if (id.substring(3, 4) === \"-\") {\n    const code = id.substring(0, 3);\n    if (typeof REGION_MAPPING[code] !== \"undefined\") {\n      region = REGION_MAPPING[code];\n    }\n  }\n  const API_GATEWAY = `https://${region}${process.env.API_GATEWAY}`;\n  return API_GATEWAY;\n}\n\nexport function silence(error: Error) {}\n","import {\n  getFetchConfig,\n  handleError,\n  handleResponse,\n  getMiddlewareApiUrl,\n} from \"../methods/api\";\nimport type {\n  MailboxQuery,\n  Thread,\n  ConversationQuery,\n  Conversation,\n  MiddlewareResponse,\n} from \"@commons/types/Nylas\";\n\nexport const fetchThreads = (\n  query: MailboxQuery,\n  limit: number,\n  offset: number,\n): Promise<Thread[]> => {\n  let queryString = `${getMiddlewareApiUrl(\n    query.component_id,\n  )}/threads?view=expanded&not_in=trash&limit=${limit}&offset=${offset}`;\n  if (query.query) {\n    Object.entries(query.query).forEach(\n      (param) => (queryString = queryString.concat(`&${param[0]}=${param[1]}`)),\n    );\n  }\n  return fetch(queryString, getFetchConfig(query))\n    .then((response) => handleResponse<MiddlewareResponse<Thread[]>>(response))\n    .then((json) => json.response)\n    .catch((error) => handleError(query.component_id, error));\n};\n\nexport function fetchThreadCount(query: MailboxQuery): Promise<number> {\n  let queryString = `${getMiddlewareApiUrl(\n    query.component_id,\n  )}/threads?view=expanded&not_in=trash&view=count`;\n  if (query.query) {\n    Object.entries(query.query).forEach(\n      (param) => (queryString = queryString.concat(`&${param[0]}=${param[1]}`)),\n    );\n  }\n\n  if (query.keywordToSearch) {\n    queryString += `&q=${query.keywordToSearch}`;\n  }\n\n  return fetch(queryString, getFetchConfig(query))\n    .then((response) => handleResponse<MiddlewareResponse<any>>(response))\n    .then((json) => json.response.count);\n}\n\nexport const fetchSearchResultThreads = (\n  query: MailboxQuery,\n): Promise<Thread[]> => {\n  const queryString = `${getMiddlewareApiUrl(\n    query.component_id,\n  )}/threads/search?q=${query.keywordToSearch}&view=expanded`;\n\n  return fetch(queryString, getFetchConfig(query))\n    .then(async (response) =>\n      handleResponse<MiddlewareResponse<Thread[]>>(response),\n    )\n    .then((json) => json.response)\n    .catch((error) => handleError(query.component_id, error));\n};\n\nexport const fetchThread = async (\n  query: ConversationQuery,\n): Promise<Conversation> => {\n  const thread = await fetch(\n    `${getMiddlewareApiUrl(query.component_id)}/threads/${\n      query.thread_id\n    }?view=expanded`,\n    getFetchConfig({\n      component_id: query.component_id,\n      access_token: query.access_token,\n    }),\n  )\n    .then((response) =>\n      handleResponse<MiddlewareResponse<Conversation>>(response),\n    )\n    .then((json) => json.response)\n    .catch((error) => handleError(query.component_id, error));\n\n  return thread;\n};\n\nexport const updateThread = (\n  query: ConversationQuery,\n  updatedThread: Conversation,\n): Promise<Conversation> => {\n  // accepts unread, starred, folder_id + label_ids. developer.nylas.com/docs/api/#put/threads/id\n  return fetch(\n    `${getMiddlewareApiUrl(query.component_id)}/threads/${updatedThread.id}`,\n    getFetchConfig({\n      method: \"PUT\",\n      component_id: query.component_id,\n      access_token: query.access_token,\n      body: {\n        unread: updatedThread.unread,\n        starred: updatedThread.starred,\n        folder_id: updatedThread.folder_id,\n        label_ids: updatedThread.label_ids,\n      },\n    }),\n  )\n    .then((response) =>\n      handleResponse<MiddlewareResponse<Conversation>>(response),\n    )\n    .then((json) => json.response)\n    .catch((error) => handleError(query.component_id, error));\n};\n","import {\n  getFetchConfig,\n  handleError,\n  handleResponse,\n  getMiddlewareApiUrl,\n} from \"../methods/api\";\nimport type { Manifest, MiddlewareResponse } from \"@commons/types/Nylas\";\n\nexport const fetchManifest = async (\n  id: string,\n  access_token?: string,\n): Promise<Manifest> => {\n  return await fetch(\n    `${getMiddlewareApiUrl(id)}/manifest`,\n    getFetchConfig({\n      access_token,\n      component_id: id,\n    }),\n  )\n    .then<MiddlewareResponse>(handleResponse)\n    .then((response) => response.component.theming)\n    .catch((error) => handleError(id, error));\n};\n\n// Allows <nylas-schedule-editor> to modify its own properties\n\ninterface saveManifestParams {\n  id: string;\n  access_token?: string;\n  manifest: Manifest;\n}\n\nexport const saveManifest = async (\n  params: saveManifestParams\n): Promise<Manifest> => {\n  const { id, access_token, manifest } = params;\n  return fetch(\n    `${getMiddlewareApiUrl(id)}/component`,\n    getFetchConfig({\n      method: \"PUT\",\n      component_id: id,\n      access_token,\n      body: manifest,\n    }),\n  )\n    .then((response) => handleResponse<MiddlewareResponse<Manifest>>(response))\n    .then((json) => {\n      return json.response;\n    });\n}\n","import { MessageStore } from \"../store/messages\";\nimport {\n  getFetchConfig,\n  handleError,\n  handleResponse,\n  getMiddlewareApiUrl,\n} from \"../methods/api\";\nimport type {\n  SingularEmail,\n  CommonQuery,\n  MessagesQuery,\n  File as NylasFile,\n  Message as NylasMessage,\n  MiddlewareResponse,\n} from \"@commons/types/Nylas\";\nimport type { Message } from \"@commons/types/Composer\";\n\nexport const sendMessage = async (\n  component_id: string,\n  msg: Message,\n  access_token?: string,\n): Promise<NylasMessage> => {\n  return await fetch(\n    `${getMiddlewareApiUrl(component_id)}/send`,\n    getFetchConfig({ method: \"POST\", component_id, access_token, body: msg }),\n  )\n    .then((response) =>\n      handleResponse<MiddlewareResponse<NylasMessage>>(response),\n    )\n    .then((json) => {\n      return json.response;\n    })\n    .catch((error) => handleError(component_id, error));\n};\n\nexport const uploadFile = async (\n  component_id: string,\n  file: File,\n  access_token?: string,\n): Promise<NylasFile> => {\n  const fetchConfig: RequestInit = getFetchConfig({\n    method: \"POST\",\n    component_id,\n    access_token,\n  });\n  const form = new FormData();\n  form.append(\"file\", file);\n  if (\n    typeof fetchConfig.headers !== \"undefined\" &&\n    \"Content-Type\" in fetchConfig.headers\n  ) {\n    delete fetchConfig.headers[\"Content-Type\"];\n  }\n  fetchConfig.body = form;\n  return await fetch(`${getMiddlewareApiUrl(component_id)}/files`, fetchConfig)\n    .then((response) => handleResponse<MiddlewareResponse<NylasFile>>(response))\n    .then((json) => {\n      return Array.isArray(json.response) ? json.response[0] : json.response;\n    })\n    .catch(handleError.bind(0, component_id));\n};\n\nexport const fetchMessages = async (\n  query: MessagesQuery,\n  offset: number,\n  limit: number,\n): Promise<NylasMessage[]> => {\n  let queryString = `${getMiddlewareApiUrl(\n    query.component_id,\n  )}/messages?offset=${offset}&limit=${limit}`;\n  if (query.received_before) {\n    queryString = `${queryString}&received_before=${query.received_before}`;\n  }\n  if (query.received_after) {\n    queryString = `${queryString}&received_after=${query.received_after}`;\n  }\n  return await fetch(queryString, getFetchConfig(query))\n    .then((response) =>\n      handleResponse<MiddlewareResponse<NylasMessage[]>>(response),\n    )\n    .then((json) => {\n      MessageStore.addMessages({\n        queryKey: JSON.stringify(query),\n        data: json.response,\n      });\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n};\n\nexport const fetchMessage = async (\n  query: CommonQuery,\n  messageID: string,\n): Promise<NylasMessage> => {\n  const queryString = `${getMiddlewareApiUrl(\n    query.component_id,\n  )}/messages/${messageID}`;\n  return await fetch(queryString, getFetchConfig(query))\n    .then((response) =>\n      handleResponse<MiddlewareResponse<NylasMessage>>(response),\n    )\n    .then((json) => {\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n};\n\n// For cases when someone wants to show just a single email message, rather than the full thread and w/o passing a thread id\nexport const fetchEmail = async (\n  query: SingularEmail,\n): Promise<NylasMessage> => {\n  const queryString = `${getMiddlewareApiUrl(query.component_id)}/messages/${\n    query.message_id\n  }`;\n  return await fetch(queryString, getFetchConfig(query))\n    .then((response) =>\n      handleResponse<MiddlewareResponse<NylasMessage>>(response),\n    )\n    .then((json) => {\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n};\n","import {\n  getFetchConfig,\n  handleError,\n  handleResponse,\n  getMiddlewareApiUrl,\n} from \"../methods/api\";\nimport type {\n  AccountQuery,\n  Account,\n  MiddlewareResponse,\n} from \"@commons/types/Nylas\";\n\nexport const fetchAccount = async (query: AccountQuery): Promise<Account> => {\n  const account = await fetch(\n    `${getMiddlewareApiUrl(query.component_id)}/account`,\n    getFetchConfig(query),\n  )\n    .then((response) => handleResponse<MiddlewareResponse<Account>>(response))\n    .then((json) => {\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n\n  return account;\n};\n","import {\n  getFetchConfig,\n  handleError,\n  handleResponse,\n  getMiddlewareApiUrl,\n} from \"../methods/api\";\nimport type {\n  AvailabilityQuery,\n  AvailabilityResponse,\n  FreeBusyResponse,\n  TimeSlot,\n} from \"@commons/types/Availability\";\nimport type { MiddlewareResponse } from \"@commons/types/Nylas\";\n\n// TODO: deprecate if we find /calendars/availability to be fully sufficient\nexport const fetchFreeBusy = async (\n  query: AvailabilityQuery,\n): Promise<FreeBusyResponse[]> => {\n  return fetch(\n    `${getMiddlewareApiUrl(query.component_id)}/calendars/free-busy`,\n    getFetchConfig({\n      method: \"POST\",\n      component_id: query.component_id,\n      access_token: query.access_token,\n      body: query.body,\n    }),\n  )\n    .then(async (apiResponse) => {\n      const json = await handleResponse<MiddlewareResponse<FreeBusyResponse[]>>(\n        apiResponse,\n      );\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n};\n\nexport const fetchAvailability = async (\n  query: AvailabilityQuery,\n): Promise<AvailabilityResponse> => {\n  return fetch(\n    `${getMiddlewareApiUrl(query.component_id)}/calendars/availability`,\n    getFetchConfig({\n      method: \"POST\",\n      component_id: query.component_id,\n      access_token: query.access_token,\n      body: query.body,\n    }),\n  )\n    .then(async (apiResponse) => {\n      const json = await handleResponse<\n        MiddlewareResponse<AvailabilityResponse>\n      >(apiResponse);\n      // Normalize response .start and .end to .start_time and .end_time to make up for discrependcy in the Nylas API: https://developer.nylas.com/docs/connectivity/calendar/calendar-availability/#availability-response\n      // API story: https://app.shortcut.com/nylas/story/73196/\n      json.response.time_slots = json.response.time_slots.map((slot) => {\n        slot.start_time = slot.start || 0;\n        slot.end_time = slot.end || 0;\n        delete slot.start;\n        delete slot.end;\n        return slot;\n      });\n      return json.response;\n    })\n    .catch((error) => handleError(query.component_id, error));\n};\n","import { Writable, writable } from \"svelte/store\";\nimport { fetchAvailability } from \"../connections/availability\";\nimport type {\n  AvailabilityQuery,\n  AvailabilityResponse,\n} from \"@commons/types/Availability\";\n\ntype AvailabilityStore = Record<string, Promise<AvailabilityResponse>>;\n\nfunction initialize(): Writable<AvailabilityStore> {\n  const get = (\n    target: AvailabilityStore,\n    key: string,\n  ): Promise<AvailabilityResponse> | void => {\n    const accessor: AvailabilityQuery = JSON.parse(key);\n    // Avoid saving forceReload property as part of store key\n    const accessorCopy = { ...accessor };\n    delete accessorCopy.forceReload;\n    key = JSON.stringify(accessorCopy);\n\n    if (\n      !accessor.component_id ||\n      !accessor?.body?.start_time ||\n      !accessor?.body?.end_time\n    ) {\n      return;\n    }\n\n    if (!target[key] || accessor.forceReload) {\n      const fetchPromise = fetchAvailability(accessor);\n      store.update((store) => {\n        store[key] = fetchPromise;\n        return store;\n      });\n      target[key] = fetchPromise;\n    }\n    return target[key];\n  };\n  const store = writable(new Proxy<AvailabilityStore>({}, { get }));\n  return store;\n}\n\nexport const AvailabilityStore = initialize();\n","import { derived, Readable, writable } from \"svelte/store\";\nimport {\n  fetchThreads,\n  fetchSearchResultThreads,\n  updateThread,\n  fetchThreadCount,\n} from \"../connections/threads\";\nimport type {\n  Thread,\n  MailboxQuery,\n  ConversationQuery,\n  Message,\n  Conversation,\n} from \"@commons/types/Nylas\";\nimport { silence } from \"@commons\";\n\ninterface PaginatedThreads {\n  isLoaded: boolean;\n  threads: Thread[];\n}\n\nasync function initializePaginatedThreads(totalPages: number) {\n  const paginatedThreads = [];\n\n  for (let i = 0; i < totalPages; i++) {\n    paginatedThreads.push({\n      isLoaded: false,\n      threads: [],\n    });\n  }\n  return paginatedThreads;\n}\n\nfunction initializeThreads() {\n  const { subscribe, set, update } = writable<\n    Record<string, PaginatedThreads[]>\n  >({});\n  let threadsMap: Record<string, PaginatedThreads[]> = {};\n  let totalItems: number;\n\n  return {\n    subscribe,\n    set,\n    getThreads: async (\n      query: MailboxQuery,\n      currentPage: number,\n      pageSize: number,\n      forceRefresh = false,\n    ) => {\n      const queryKey = JSON.stringify(query);\n\n      if (!query.component_id && !query.access_token) {\n        return [];\n      }\n\n      if (totalItems === undefined || forceRefresh) {\n        const threadCount = await fetchThreadCount(query).catch(silence);\n\n        if (threadCount) {\n          totalItems = threadCount;\n        }\n      }\n\n      if (!Array.isArray(threadsMap[queryKey]) || forceRefresh) {\n        const totalPages = Math.ceil(totalItems / pageSize);\n        threadsMap[queryKey] = await initializePaginatedThreads(totalPages);\n      }\n\n      if (typeof threadsMap[queryKey][currentPage] === \"undefined\") {\n        return [];\n      } else if (!threadsMap[queryKey][currentPage].isLoaded) {\n        const threads = await fetchThreads(\n          query,\n          pageSize,\n          currentPage * pageSize,\n        ).catch(silence);\n\n        if (threads) {\n          threadsMap[queryKey][currentPage].threads = threads;\n          threadsMap[queryKey][currentPage].isLoaded = true;\n        }\n      }\n\n      update((threads) => {\n        threads[queryKey] = threadsMap[queryKey];\n        return { ...threads };\n      });\n\n      return threadsMap[queryKey][currentPage].threads;\n    },\n    getNumberOfItems: async (query: MailboxQuery) => {\n      if (!query.component_id && !query.access_token) {\n        return 0;\n      }\n\n      if (typeof totalItems === \"undefined\") {\n        const threadCount = await fetchThreadCount(query).catch(silence);\n\n        if (threadCount) {\n          totalItems = threadCount;\n        }\n      }\n      return totalItems;\n    },\n    // TODO - Use real pagination when search endpoint supports it\n    getThreadsWithSearchKeyword: async (\n      query: MailboxQuery,\n      forceRefresh = false,\n    ) => {\n      if (!query.component_id && !query.access_token) {\n        return [];\n      }\n      const queryKey = JSON.stringify(query);\n\n      if (!Array.isArray(threadsMap[queryKey]) || forceRefresh) {\n        threadsMap[queryKey] = await initializePaginatedThreads(1);\n      }\n\n      if (!threadsMap[queryKey][0].isLoaded || forceRefresh) {\n        const searchResultThreads = await fetchSearchResultThreads(query).catch(\n          silence,\n        );\n\n        if (searchResultThreads) {\n          threadsMap[queryKey][0].threads = searchResultThreads;\n          threadsMap[queryKey][0].isLoaded = true;\n        }\n      }\n      update((threads) => {\n        threads[queryKey] = threadsMap[queryKey];\n        return { ...threads };\n      });\n      return threadsMap[queryKey][0].threads;\n    },\n    updateThread: async (\n      threadQuery: ConversationQuery,\n      queryKey: string,\n      updatedThread: Conversation,\n      currentPage: number,\n      pageSize: number,\n    ) => {\n      const thread = await updateThread(threadQuery, updatedThread).catch(\n        silence,\n      );\n\n      if (!threadsMap[queryKey][currentPage].isLoaded) {\n        const threads = await fetchThreads(\n          JSON.parse(queryKey),\n          pageSize,\n          currentPage * pageSize,\n        ).catch(silence);\n\n        if (threads) {\n          threadsMap[queryKey][currentPage].threads = threads;\n          threadsMap[queryKey][currentPage].isLoaded = true;\n        }\n      }\n\n      threadsMap[queryKey][currentPage].threads = threadsMap[queryKey][\n        currentPage\n      ].threads.map((initialThread) => {\n        if (thread && initialThread.id === thread.id) {\n          initialThread = Object.assign(initialThread, thread);\n        }\n        return initialThread;\n      });\n      update((threads) => {\n        threads[queryKey] = threadsMap[queryKey];\n        return { ...threads };\n      });\n      return threadsMap[queryKey][currentPage].threads;\n    },\n    updateThreadSelection: (\n      queryKey: string,\n      currentPage: number,\n      threadId?: string,\n    ) => {\n      const threads = threadsMap[queryKey][currentPage].threads;\n\n      if (!threadId) {\n        const selectionState = threads.some((thread) => thread.selected);\n        for (const thread of threads) {\n          thread.selected = !selectionState;\n        }\n      } else {\n        const thread = threads.find((thread) => thread.id === threadId);\n        if (thread) {\n          thread.selected = !thread.selected;\n        }\n      }\n      update((threads) => {\n        threads[queryKey] = threadsMap[queryKey];\n        return { ...threads };\n      });\n      return threadsMap[queryKey][currentPage].threads;\n    },\n\n    reset: () => {\n      threadsMap = {};\n      set({});\n    },\n\n    hydrateMessageInThread: (\n      incomingMessage: Message,\n      query: MailboxQuery,\n      currentPage: number,\n    ) => {\n      const queryKey = JSON.stringify(query);\n\n      const foundThread = threadsMap[queryKey][currentPage]?.threads?.find(\n        (thread) => thread.id === incomingMessage.thread_id,\n      );\n      if (foundThread) {\n        const foundMessage = foundThread.messages?.find(\n          (message) => message.id === incomingMessage.id,\n        );\n        if (foundMessage) {\n          foundMessage.body = incomingMessage.body;\n          update((threads) => {\n            if (incomingMessage.thread_id) {\n              let threadToUpdate = threads[queryKey][currentPage].threads.find(\n                (thread) => thread.id === foundThread.id,\n              );\n\n              if (threadToUpdate) {\n                threadToUpdate = JSON.parse(JSON.stringify(foundThread));\n              }\n            }\n            return { ...threads };\n          });\n        }\n      }\n\n      return threadsMap[queryKey][currentPage].threads;\n    },\n  };\n}\n\nexport const MailboxStore = initializeThreads();\n\nexport const EmailStore: Readable<Record<string, Thread[]>> = derived(\n  MailboxStore,\n  ($MailboxStore) => {\n    const emailStore: Record<string, Thread[]> = {};\n    Object.entries($MailboxStore).forEach(\n      ([key, paginatedThreads]) =>\n        (emailStore[key] = paginatedThreads\n          .map((paginatedThread) => paginatedThread.threads)\n          .flat()),\n    );\n    return emailStore;\n  },\n);\n","import { fetchManifest } from \"../connections/manifest\";\nimport { Writable, writable } from \"svelte/store\";\nimport type { Manifest } from \"@commons/types/Nylas\";\n\ntype ManifestAccessor = {\n  component_id: string;\n  access_token?: string;\n  external_manifest_ids?: [];\n};\ntype ManifestStore = Record<string, Promise<Manifest>>;\n\nfunction initialize(): Writable<ManifestStore> {\n  const get = (\n    target: ManifestStore,\n    key: string,\n  ): Promise<Manifest> | void => {\n    const accessor: ManifestAccessor = JSON.parse(key);\n\n    if (!accessor.component_id) return;\n\n    if (!target[key]) {\n      const fetchPromise = fetchManifest(\n        accessor.component_id,\n        accessor.access_token,\n      );\n      store.update((store) => {\n        store[key] = fetchPromise;\n        return store;\n      });\n      target[key] = fetchPromise;\n    }\n    return target[key];\n  };\n  const store = writable(new Proxy<ManifestStore>({}, { get }));\n  return store;\n}\n\nexport const ManifestStore = initialize();\n","import type { File, Manifest } from \"@commons/types/Nylas\";\n\nexport function getEventDispatcher(component: {\n  dispatchEvent?: (e: Event) => boolean;\n}) {\n  return (name: string, detail: unknown): void => {\n    if (component.dispatchEvent) {\n      component.dispatchEvent(\n        new CustomEvent(name, {\n          detail,\n          composed: true, // propagate across the shadow DOM\n        }),\n      );\n    }\n  };\n}\n\nexport function debounce(\n  fn: (args: unknown) => unknown,\n  time: number,\n): () => void {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return (): void => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(fn, time);\n  };\n}\n\nexport function buildInternalProps<T extends Partial<Manifest>>(\n  properties: T,\n  manifest: T,\n  defaultValueMap: T,\n): T {\n  return new Proxy(properties, {\n    get: (target, name: keyof Manifest | \"toJSON\" | \"toString\") => {\n      if (name === \"toString\" || name === \"toJSON\") {\n        return () => JSON.stringify(target);\n      }\n\n      if (Reflect.get(target, name) !== undefined) {\n        return getPropertyValue(\n          Reflect.get(target, name),\n          defaultValueMap[name],\n        );\n      }\n\n      if (manifest && name in manifest) {\n        return getPropertyValue(manifest[name], defaultValueMap[name]);\n      }\n      return defaultValueMap[name];\n    },\n\n    ownKeys: (target) => {\n      const keys = new Set([\n        ...Reflect.ownKeys(target),\n        ...Object.keys(manifest),\n        ...Object.keys(defaultValueMap),\n      ]);\n      return Array.from(keys);\n    },\n\n    getOwnPropertyDescriptor: (target, prop) => {\n      let propDescriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n      if (!propDescriptor) {\n        propDescriptor = (manifest &&\n          Object.getOwnPropertyDescriptor(manifest, prop)) ??\n          (defaultValueMap &&\n            Object.getOwnPropertyDescriptor(defaultValueMap, prop)) ?? {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n          };\n        Reflect.defineProperty(target, prop, propDescriptor);\n      }\n      return propDescriptor;\n    },\n  });\n}\n\nexport function getPropertyValue<T>(propValue: any, defaultTo: T): T {\n  if (propValue) {\n    if (typeof defaultTo === \"boolean\") {\n      return parseBoolean(propValue) as any;\n    }\n    if (typeof defaultTo === \"number\") {\n      return Number(propValue) as any;\n    }\n    if (defaultTo instanceof Date) {\n      return new Date(propValue) as any;\n    }\n  }\n\n  return propValue === undefined ? defaultTo ?? null : propValue;\n}\n\nexport function parseBoolean(\n  val: string | boolean | undefined | null,\n): boolean {\n  return (<any>[true, \"true\", \"1\"]).includes(val);\n}\n\nexport default function parseStringToArray(parseStr: string) {\n  if (!parseStr) {\n    return [];\n  }\n\n  if (parseStr.includes(\",\")) {\n    return parseStr.split(\",\").map((s: string) => s.trim());\n  }\n  if (parseStr.includes(\" \")) {\n    return parseStr.split(\" \").map((s: string) => s.trim());\n  }\n  if (parseStr.includes(\"\\n\")) {\n    return parseStr.split(\"\\n\").map((s: string) => s.trim());\n  }\n\n  return [parseStr.trim()];\n}\n\nexport function downloadAttachedFile(fileData: string, file: File): void {\n  const buffer = Uint8Array.from(atob(fileData), (c) => c.charCodeAt(0));\n  const blob = new Blob([buffer], { type: file.content_type });\n  const blobFile = window.URL.createObjectURL(blob);\n\n  const a = document.createElement(\"a\");\n  a.href = blobFile;\n  a.download = file.filename ?? file.id;\n  a.target = \"_blank\";\n  a.click();\n  a.remove();\n}\n","<svelte:options tag=\"nylas-error\" immutable={true} />\n\n<script lang=\"ts\">\n  import { ErrorStore } from \"../store/error\";\n  import type { NError } from \"@commons/types/Nylas\";\n\n  export let id: string; // component id\n\n  let error: NError;\n  let errorName: string;\n\n  $: {\n    error = $ErrorStore[id] ?? { name: \"\" };\n    errorName = error.name ?? error.message?.name ?? \"\";\n  }\n\n  const isDevEnv =\n    window.location.href.includes(\"localhost\") ||\n    window.location.href.includes(\"127.0.0.1\");\n</script>\n\n<style>\n  .message-container {\n    background: #fff6f6;\n    border-radius: 5px;\n    box-shadow: 0 0 0 1px #aa92a0 inset, 0 0 0 0 transparent;\n    color: #9f3a38;\n    font-size: 1.25rem;\n    padding: 10px;\n    margin: 0 auto;\n    transition: opacity 500ms ease, color 500ms ease,\n      background-color 500ms ease, box-shadow 500ms ease,\n      -webkit-box-shadow 500ms ease;\n  }\n\n  .message-container *:focus {\n    outline: 5px auto Highlight;\n    outline: 5px auto -webkit-focus-ring-color;\n  }\n\n  .details {\n    color: #494949;\n    font-size: 0.75rem;\n    width: 100%;\n  }\n</style>\n\n{#if errorName && isDevEnv}\n  <div class=\"message-container\">\n    {#if errorName === \"HostDomainNotAllowedError\"}\n      <h3>\n        You are trying to access this component from&nbsp;\n        <code>{window.location.hostname}</code>. The component's settings do not\n        allow access from this domain.\n      </h3>\n      <h4>\n        The list of allowed domains can be modified in your&nbsp;\n        <a href=\"https://dashboard.nylas.com\">Dashboard</a>.\n      </h4>\n    {:else if errorName === \"IncompatibleProperties\"}\n      <h3>Your component properties do not work with each other.</h3>\n    {/if}\n    <span class=\"details\">Debug info:</span>\n    <textarea class=\"details\" readonly>\n      {errorName}: {id}\n      {error.message?.message ?? \"\"}\n    </textarea>\n  </div>\n{/if}\n","import { writable } from \"svelte/store\";\nimport type { Attachment, AttachmentUpdate } from \"@commons/types/Composer\";\n\nconst messageInitialState = {\n  from: [],\n  to: [],\n  cc: [],\n  bcc: [],\n  body: \"\",\n  subject: \"New Message\",\n  send_at: null,\n  file_ids: [],\n};\nexport const message = writable(\n  JSON.parse(JSON.stringify(messageInitialState)),\n);\n\nconst attachmentsInitialState: Attachment[] = [];\nexport const attachments = writable(\n  JSON.parse(JSON.stringify(attachmentsInitialState)),\n);\n\nexport const subscribe = (val: unknown): unknown =>\n  message.subscribe((x) => {\n    val = x;\n    return val;\n  });\n\nexport const update = (key: string, value: unknown): void => {\n  return message.update((s) => ({ ...s, [key]: value }));\n};\n\nexport const mergeMessage = (update: Record<string, unknown>): void => {\n  return message.update((s) => ({ ...s, ...update }));\n};\n\nexport const addAttachments = (update: Attachment): void => {\n  return attachments.update((s: Attachment[]) => {\n    if (!s.map((a: Attachment) => a.filename).includes(update.filename)) {\n      return [...s, update];\n    }\n    return s;\n  });\n};\nexport const updateAttachments = (update: Attachment): void => {\n  return attachments.update((s) => [...s, update]);\n};\n\nexport const updateAttachment = (\n  filename: string,\n  update: AttachmentUpdate,\n): void => {\n  return attachments.update((s: Attachment[]) =>\n    s.map((attachment) => {\n      return attachment.filename === filename\n        ? { ...attachment, ...update }\n        : attachment;\n    }),\n  );\n};\n\nexport const removeAttachments = (item: Attachment): void => {\n  return attachments.update((s: Attachment[]) => [\n    ...s.filter((a) => a.filename !== item.filename),\n  ]);\n};\n\nexport const resetAfterSend = (from: string[]): void => {\n  message.set(JSON.parse(JSON.stringify({ ...messageInitialState, from })));\n  attachments.set(JSON.parse(JSON.stringify(attachmentsInitialState)));\n};\n","export const formatDate = (date: Date): string => {\n  const months = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  return `${\n    months[date.getMonth()]\n  } ${date.getDate()}, ${date.getHours()}:${date.getMinutes()} ${\n    date.getHours() >= 12 ? \"PM\" : \"AM\"\n  }`;\n};\n","<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\r\n<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\r\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\r\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t width=\"357px\" height=\"357px\" viewBox=\"0 0 357 357\" style=\"enable-background:new 0 0 357 357;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g id=\"remove\">\r\n\t\t<path d=\"M357,204H0v-51h357V204z\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n","<svg height=\"512pt\" viewBox=\"-96 0 512 512\" width=\"512pt\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m160 512c-88.234375 0-160-71.765625-160-160v-224c0-11.796875 9.558594-21.332031 21.332031-21.332031 11.777344 0 21.335938 9.535156 21.335938 21.332031v224c0 64.683594 52.628906 117.332031 117.332031 117.332031s117.332031-52.648437 117.332031-117.332031v-234.667969c0-41.171875-33.492187-74.664062-74.664062-74.664062-41.175781 0-74.667969 33.492187-74.667969 74.664062v213.335938c0 17.640625 14.355469 32 32 32s32-14.359375 32-32v-202.667969c0-11.796875 9.558594-21.332031 21.332031-21.332031 11.777344 0 21.335938 9.535156 21.335938 21.332031v202.667969c0 41.171875-33.496094 74.664062-74.667969 74.664062s-74.667969-33.492187-74.667969-74.664062v-213.335938c0-64.679687 52.628907-117.332031 117.335938-117.332031 64.703125 0 117.332031 52.652344 117.332031 117.332031v234.667969c0 88.234375-71.765625 160-160 160zm0 0\"/></svg>","<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\r\n<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\r\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\r\n<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\r\n\t width=\"306px\" height=\"306px\" viewBox=\"0 0 306 306\" style=\"enable-background:new 0 0 306 306;\" xml:space=\"preserve\">\r\n<g>\r\n\t<g id=\"expand-less\">\r\n\t\t<polygon points=\"153,58.65 0,211.65 35.7,247.35 153,130.05 270.3,247.35 306,211.65 \t\t\"/>\r\n\t</g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n<g>\r\n</g>\r\n</svg>\r\n","<svelte:options tag=\"nylas-composer\" immutable />\n\n<script lang=\"ts\">\n  import \"./components/HTMLEditor.svelte\";\n  import \"./components/AlertBar.svelte\";\n  import \"./components/Attachment.svelte\";\n  import \"./components/DatepickerModal.svelte\";\n  import \"./components/ContactsSearch.svelte\";\n  import LoadingIcon from \"./assets/loading.svg\";\n  import {\n    ManifestStore,\n    sendMessage,\n    fetchAccount,\n    uploadFile as nylasUploadFile,\n  } from \"@commons\";\n  import {\n    buildInternalProps,\n    getEventDispatcher,\n  } from \"@commons/methods/component\";\n  import { silence } from \"@commons/methods/api\";\n  import { onMount, tick, get_current_component } from \"svelte/internal\";\n  import pkg from \"../package.json\";\n\n  const dispatchEvent = getEventDispatcher(get_current_component());\n  $: dispatchEvent(\"manifestLoaded\", manifest);\n\n  import {\n    message,\n    update,\n    mergeMessage,\n    attachments,\n    addAttachments,\n    removeAttachments,\n    resetAfterSend,\n    updateAttachment,\n  } from \"./lib/store\";\n  import { formatDate } from \"./lib/format-date\";\n\n  import CloseIcon from \"./assets/close.svg\";\n  import MinimizeIcon from \"./assets/dash.svg\";\n  import AttachmentIcon from \"./assets/attachment.svg\";\n  import ExpandIcon from \"./assets/expand.svg\";\n  import type {\n    Message,\n    SendCallback,\n    FetchContactsCallback,\n    Tracking,\n    Attribute,\n    ReplaceFields,\n    Attachment,\n  } from \"@commons/types/Composer\";\n  import type {\n    ComposerProperties,\n    Account,\n    Participant,\n  } from \"@commons/types/Nylas\";\n  import type { FetchContactsCallback as ContactsSearchFetchContactsCallback } from \"@commons/types/ContactsSearch\";\n\n  type ContactSearchCallback =\n    | Participant[]\n    | ContactsSearchFetchContactsCallback;\n\n  export let id: string | void;\n  export let access_token: string = \"\";\n\n  export let value: Message | void;\n  export let to: ContactSearchCallback = [];\n  export let from: ContactSearchCallback = [];\n  export let cc: ContactSearchCallback = [];\n  export let bcc: ContactSearchCallback = [];\n  export let send: SendCallback;\n  export let change: FetchContactsCallback | null = null;\n  export let beforeSend: (msg: Message) => Message | void;\n  export let afterSendSuccess: Function | null = null;\n  export let afterSendError: Function | null = null;\n  export let template: string = \"\";\n  export let tracking: Tracking | null = null;\n\n  // Attributes\n  export let minimized: Attribute;\n  export let reset_after_send: Attribute;\n  export let show_from: Attribute;\n  export let show_to: Attribute;\n  export let show_header: Attribute;\n  export let show_subject: Attribute;\n  export let show_close_button: Attribute;\n  export let show_minimize_button: Attribute;\n  export let show_cc: Attribute;\n  export let show_bcc: Attribute;\n  export let show_cc_button: Attribute;\n  export let show_bcc_button: Attribute;\n  export let show_attachment_button: Attribute;\n  export let show_editor_toolbar: Attribute;\n  export let theme: string | void;\n  export let replace_fields: ReplaceFields[] | null = null;\n  export let beforeFileUpload: Function | null = null;\n  export let afterFileUploadSuccess: Function | null = null;\n  export let afterFileUploadError: Function | null = null;\n  export let uploadFile: Function | null = null;\n  export let beforeFileRemove: Function | null = null;\n  export let afterFileRemove: Function | null = null;\n\n  const defaultValueMap: Partial<ComposerProperties> = {\n    show_to: true,\n    show_from: true,\n    minimized: false,\n    reset_after_send: true,\n    show_header: false,\n    show_subject: false,\n    show_close_button: true,\n    show_minimize_button: true,\n    show_cc: true,\n    show_bcc: true,\n    show_cc_button: true,\n    show_bcc_button: true,\n    show_attachment_button: true,\n    show_editor_toolbar: true,\n    theme: \"theme-1\",\n  };\n\n  // Callbacks\n  export const open = (): void => {\n    visible = true;\n    dispatchEvent(\"composerOpened\", {});\n  };\n\n  export const close = (): void => {\n    visible = false;\n    dispatchEvent(\"composerClosed\", {});\n  };\n\n  let isLoading = false;\n  let _this = <ComposerProperties>buildInternalProps({}, {}, defaultValueMap);\n  let manifest: Partial<ComposerProperties>;\n  let showDatepicker = false;\n  let themeLoaded = false;\n  let visible = true;\n\n  onMount(async () => {\n    isLoading = true;\n    await tick();\n\n    manifest =\n      (await $ManifestStore[\n        JSON.stringify({ component_id: id, access_token })\n      ]) || {};\n\n    if (manifest && id) {\n      const account: Account | void = await fetchAccount({\n        component_id: id,\n        access_token,\n      }).catch(silence);\n\n      if (account) {\n        // Set \"from\" field from account\n        update(\"from\", [{ name: account.name, email: account.email_address }]);\n      }\n    }\n\n    _this = buildInternalProps(\n      $$props,\n      manifest,\n      defaultValueMap,\n    ) as ComposerProperties;\n\n    if (tracking) {\n      // Set tracking on message object\n      update(\"tracking\", tracking);\n    }\n\n    isLoading = false;\n    themeLoaded = true;\n  });\n\n  let previousProps = $$props;\n  $: {\n    if (JSON.stringify(previousProps) !== JSON.stringify($$props)) {\n      _this = buildInternalProps(\n        $$props,\n        manifest,\n        defaultValueMap,\n      ) as ComposerProperties;\n      previousProps = $$props;\n    }\n  }\n\n  $: if (value) {\n    mergeMessage(value);\n  }\n\n  const handleInputChange = (e: Event) => {\n    if (!e.target) return;\n    const target = e.target as HTMLTextAreaElement;\n    update(target.name, target.value);\n  };\n\n  const handleBodyChange = (html: string) => update(\"body\", html);\n\n  const handleContactsChange = (field: string) => (data: Participant[]) =>\n    update(field, data);\n  const schedule = (data: Date) => {\n    showDatepicker = false;\n    update(\"send_at\", data);\n  };\n  const removeSchedule = () => {\n    update(\"send_at\", null);\n  };\n  const datePickerClose = () => {\n    showDatepicker = false;\n  };\n\n  async function handleFilesChange(fileChangedEvent: Event) {\n    const fileSelector = fileChangedEvent.target as HTMLInputElement;\n    if (!fileSelector?.files) return;\n\n    const file = fileSelector.files[0];\n\n    try {\n      addAttachments({\n        filename: file.name,\n        size: file.size,\n        content_type: file.type,\n        loading: true,\n        error: false,\n      });\n      fileSelector.value = \"\";\n      if (beforeFileUpload) beforeFileUpload(file);\n\n      if (file.size >= 4000000) {\n        throw \"Error: File size is too large.\";\n      }\n\n      const result = uploadFile\n        ? await uploadFile(file)\n        : id && (await nylasUploadFile(id, file, access_token));\n\n      updateAttachment(file.name, { loading: false, id: result.id });\n      // Update the message object\n      if (result.id)\n        mergeMessage({ file_ids: [...$message.file_ids, result.id] });\n      if (afterFileUploadSuccess) afterFileUploadSuccess(result);\n    } catch (e) {\n      updateAttachment(file.name, {\n        loading: false,\n        error: true,\n        errorMessage: typeof e === \"string\" ? e : undefined,\n      });\n      if (afterFileUploadError) afterFileUploadError(e);\n    }\n  }\n\n  const handleRemoveFile = (attachment: Attachment) => {\n    if (beforeFileRemove) beforeFileRemove(attachment);\n    removeAttachments(attachment);\n    if (attachment.id) {\n      mergeMessage({\n        file_ids: $message.file_ids.filter(\n          (id: string) => id !== attachment.id,\n        ),\n      });\n    }\n    if (afterFileRemove) afterFileRemove(attachment);\n  };\n\n  const handleMinimize = (isMinimized: boolean) => {\n    _this.minimized = isMinimized;\n    previousProps = _this;\n\n    dispatchEvent(\n      _this.minimized ? \"composerMinimized\" : \"composerMaximized\",\n      {},\n    );\n  };\n\n  let sendPending = false;\n  let sendError = false;\n  let sendSuccess = false;\n\n  const handleSend = async () => {\n    sendPending = true;\n    sendError = false;\n    sendSuccess = false;\n\n    let msg = $message;\n    if (beforeSend) {\n      // If beforeSend returns value, it will replace the message\n      const upd = beforeSend($message);\n      // @ts-ignore\n      if (upd) msg = upd;\n    }\n    if (send) {\n      // Callback\n      send(msg)\n        .then((res) => {\n          if (afterSendSuccess) afterSendSuccess(res);\n          sendPending = false;\n          sendSuccess = true;\n        })\n        .catch((err) => {\n          if (afterSendError) afterSendError(err);\n          if (_this.reset_after_send) resetAfterSend($message.from);\n          sendPending = false;\n          sendError = true;\n        });\n    } else if (id) {\n      // Middleware\n      sendMessage(id, msg, access_token)\n        .then((res) => {\n          if (afterSendSuccess) afterSendSuccess(res);\n          if (_this.reset_after_send) resetAfterSend($message.from);\n          sendPending = false;\n          sendSuccess = true;\n        })\n        .catch((err) => {\n          if (afterSendError) afterSendError(err);\n          sendPending = false;\n          sendError = true;\n        });\n    }\n  };\n\n  // Listener for message changes\n  // @ts-ignore\n  $: if ($message && change) change($message);\n  // @ts-ignore\n  $: datepickerTimestamp = $message.send_at * 1000;\n\n  $: isSendable =\n    !sendPending &&\n    (id || send) &&\n    $message.from.length &&\n    ($message.to.length || $message.cc.length || $message.bcc.length);\n\n  let themeUrl: string;\n  $: if (!!_this.theme) {\n    if (_this.theme.startsWith(\".\") || _this.theme.startsWith(\"http\")) {\n      // If custom url supplied\n      themeUrl = _this.theme;\n    } else if (_this.theme) {\n      themeUrl = `https://unpkg.com/@nylas/components-composer@${pkg.version}/themes/${_this.theme}.css`;\n    }\n  }\n\n  let bccField: HTMLElement;\n  let ccField: HTMLElement;\n  // when (b)cc field is removed, return focus to its respective trigger button\n  const setFocus = async (triggerElement: HTMLElement) => {\n    await tick(); // wait for trigger element to reappear\n    if (triggerElement) {\n      triggerElement.setAttribute(\"tabindex\", \"-1\");\n      triggerElement.focus();\n      triggerElement.removeAttribute(\"tabindex\");\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  @import \"../../theming/reset.scss\";\n\n  .nylas-composer {\n    // setting vars that contact-search uses\n    --outer-padding: var(--composer-outer-width, 15px);\n    --font-size-small: var(--composer-font-size-small, 12px);\n    --text-light: var(--composer-text-light-color, #6e6e7a);\n    --border: var(--composer-border-color, #f7f7f7);\n    --border-radius: var(--composer-border-radius, 6px);\n    --primary: var(--composer-primary-color, #5c77ff);\n    --primary-light: var(--composer-primary-light-color, #f0f2ff);\n    --text-secondary: var(--composer-text-secondary-color, #2247ff);\n\n    width: var(--width, 100%);\n    min-width: 300px;\n    height: var(--height, 100%);\n    min-height: 300px;\n    background: var(--composer-background-color, white);\n    border-radius: var(--composer-border-radius, 6px);\n    box-shadow: var(\n      --composer-shadow,\n      0 1px 10px rgba(0, 0, 0, 0.11),\n      0 3px 36px rgba(0, 0, 0, 0.12)\n    );\n    font-family: var(--composer-font, sans-serif);\n    font-size: var(--composer-font-size, 14px);\n    position: relative;\n    display: grid;\n    grid-template-rows: auto 1fr auto;\n    &.popup {\n      position: fixed;\n      bottom: 10px;\n      right: 10px;\n      z-index: var(--z-index, 1000);\n    }\n    &.minimized {\n      height: auto;\n      min-height: 0;\n    }\n    &__loader {\n      min-height: var(--composer-editor-max-height, 480px);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: var(--composer-text-light-color, #6e6e7a);\n      box-shadow: none;\n    }\n    &__spinner {\n      margin-right: 10px;\n      width: 18px;\n      animation: rotate 2s linear infinite;\n    }\n    *:focus {\n      outline: 5px auto var(--composer-primary-color, #5c77ff);\n    }\n  }\n  @keyframes rotate {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n  main {\n    background: var(--bg);\n    overflow: auto;\n  }\n  input {\n    font-family: var(--composer-font, sans-serif);\n  }\n  header {\n    border-top-left-radius: var(--composer-border-radius, 6px);\n    border-top-right-radius: var(--composer-border-radius, 6px);\n    border-bottom: 1px solid var(--composer-border-color, #f7f7f7);\n    color: var(--composer-text-color, black);\n    padding: 15px var(--composer-outer-padding, 15px);\n    display: flex;\n    font-weight: 600;\n    align-items: center;\n    justify-content: space-between;\n    background: var(\n      --composer-header-background-color,\n      var(--composer-background-color, white)\n    );\n    &.minimized {\n      border-bottom-left-radius: var(--composer-border-radius, 6px);\n      border-bottom-right-radius: var(--composer-border-radius, 6px);\n    }\n  }\n  footer {\n    padding: 15px var(--composer-outer-padding, 15px);\n    border-top: 1px solid var(--composer-border-color, #f7f7f7);\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    background: var(--bg);\n  }\n  .send-btn {\n    border: 0;\n    background: var(--composer-primary-color, #5c77ff);\n    color: white;\n    cursor: pointer;\n    padding: 10px 25px;\n    font-weight: bold;\n    border-radius: var(--composer-border-radius, 6px);\n    font-family: var(--composer-font, sans-serif);\n    transition: background-color 0.3s;\n    // border-top-right-radius: 0;\n    // border-bottom-right-radius: 0;\n\n    &:disabled {\n      opacity: 0.5;\n    }\n    &:hover {\n      background: var(--composer-primary-dark-color, #294dff);\n    }\n    &.send-later {\n      padding: 10px 10px;\n      border-radius: var(--composer-border-radius, 6px);\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n      margin-left: -4px;\n    }\n  }\n\n  .subject {\n    display: block;\n    font-size: var(--composer-font-size, 14px);\n    border: none;\n    border-bottom: 1px solid var(--composer-border-color, #f7f7f7);\n    color: var(--composer-text-color, black);\n    width: 100%;\n    background: var(--bg);\n    font-weight: 600;\n    box-sizing: border-box;\n    padding: 15px var(--composer-outer-padding, 15px);\n    outline: 0;\n    &::placeholer {\n      font-weight: 500;\n    }\n  }\n\n  .contacts-wrapper {\n    position: relative;\n    text-decoration: none;\n    color: var(--composer-text-color, black);\n  }\n  .close-btn {\n    background: none;\n    border: none;\n    outline: 0;\n    cursor: pointer;\n  }\n  .composer-btn {\n    background: none;\n    border: none;\n    outline: 0;\n    width: 28px;\n    height: 28px;\n    border-radius: var(--composer-border-radius, 6px);\n    cursor: pointer;\n    &:hover {\n      background: var(--composer-background-muted-color, #f0f2ff);\n    }\n  }\n  .composer-btn.file-upload {\n    margin-right: 10px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .cc-btn {\n    position: absolute;\n    right: 10px;\n  }\n\n  .attachments-wrapper {\n    display: flex;\n    padding: 15px var(--composer-outer-padding, 15px);\n    flex-direction: column;\n  }\n  .addons {\n    font-size: var(--composer-font-size-small, 12px);\n    letter-spacing: 1.2px;\n    font-weight: 600;\n    position: absolute;\n    right: 10px;\n    bottom: 16px;\n    color: var(--composer-text-light-color, #6e6e7a);\n    button {\n      background: transparent;\n      box-shadow: none;\n      border: none;\n      color: var(--composer-text-light-color, #6e6e7a);\n      cursor: pointer;\n      margin-right: 10px;\n      padding: 5px;\n    }\n  }\n\n  .cc-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: relative;\n\n    & > nylas-contacts-search {\n      flex: 1;\n    }\n  }\n  .attachments-caption {\n    font-size: var(--composer-font-size-small, 12px);\n    margin-bottom: 5px;\n    color: var(--composer-text-light-color, #6e6e7a);\n  }\n  @media only screen and (max-width: 600px) {\n    .nylas-composer {\n      width: 100%;\n    }\n    .contacts-wrapper {\n      position: initial;\n    }\n    .addons {\n      position: initial;\n      float: right;\n      padding: 5px;\n    }\n  }\n\n  [class$=\"Icon\"] {\n    fill: var(--composer-icons-color, #666774);\n    width: 10px;\n    height: 10px;\n  }\n  .ExpandIcon {\n    transform: translateY(1px);\n  }\n  .MinimizeIcon {\n    transform: translateY(4px);\n  }\n</style>\n\n<nylas-error {id} />\n\n{#if themeUrl}\n  <link\n    rel=\"stylesheet\"\n    href={themeUrl}\n    on:load={() => (themeLoaded = true)}\n    on:error={() => (themeLoaded = true)}\n  />\n{/if}\n{#if visible && isLoading}\n  <div class=\"nylas-composer nylas-composer__loader\">\n    <LoadingIcon class=\"nylas-composer__spinner\" />\n    <div>Loading</div>\n  </div>\n{/if}\n\n{#if visible && themeLoaded && !isLoading}\n  <div class=\"nylas-composer\" class:minimized={_this.minimized}>\n    {#if _this.show_header}\n      <header class={_this.minimized ? \"minimized\" : undefined}>\n        {$message.subject}\n        <div>\n          {#if _this.show_minimize_button}\n            {#if _this.minimized}\n              <button\n                class=\"composer-btn\"\n                on:click={() => handleMinimize(false)}\n              >\n                <span class=\"sr-only\">Expand Composer</span>\n                <ExpandIcon class=\"ExpandIcon\" />\n              </button>\n            {:else}\n              <button\n                class=\"composer-btn\"\n                on:click={() => handleMinimize(true)}\n              >\n                <span class=\"sr-only\">Collapse Composer</span>\n                <MinimizeIcon class=\"MinimizeIcon\" />\n              </button>\n            {/if}\n          {/if}\n          {#if _this.show_close_button}\n            <button class=\"composer-btn\" on:click={close}>\n              <span class=\"sr-only\">Close Composer</span>\n              <CloseIcon class=\"CloseIcon\" />\n            </button>\n          {/if}\n        </div>\n      </header>\n    {/if}\n    {#if !_this.minimized}\n      <main>\n        <!-- Search -->\n        <div class=\"contacts-wrapper\">\n          {#if _this.show_from}\n            <nylas-contacts-search\n              data-cy=\"from-field\"\n              placeholder=\"From:\"\n              single={true}\n              change={handleContactsChange(\"from\")}\n              contacts={from}\n              value={$message.from}\n            />\n          {/if}\n          {#if _this.show_to}\n            <nylas-contacts-search\n              data-cy=\"to-field\"\n              placeholder=\"To:\"\n              change={handleContactsChange(\"to\")}\n              contacts={to}\n              value={$message.to}\n            />\n          {/if}\n          <div class=\"addons\">\n            <button\n              data-cy=\"toggle-cc-field-btn\"\n              type=\"button\"\n              bind:this={ccField}\n              hidden={_this.show_cc && !_this.show_cc_button && !!_this.show_to}\n              on:click={() => {\n                _this.show_cc = true;\n                previousProps = _this;\n              }}>CC</button\n            >\n\n            <button\n              data-cy=\"toggle-bcc-field-btn\"\n              type=\"button\"\n              bind:this={bccField}\n              hidden={_this.show_bcc &&\n                !_this.show_bcc_button &&\n                !!_this.show_to}\n              on:click={() => {\n                _this.show_bcc = true;\n                previousProps = _this;\n              }}>BCC</button\n            >\n          </div>\n        </div>\n        {#if _this.show_cc}\n          <div class=\"cc-container\">\n            <nylas-contacts-search\n              data-cy=\"cc-field\"\n              placeholder=\"CC:\"\n              contacts={cc}\n              value={$message.cc}\n              change={handleContactsChange(\"cc\")}\n            />\n            <button\n              type=\"button\"\n              class=\"composer-btn cc-btn\"\n              on:click={() => {\n                setFocus(ccField);\n                _this.show_cc = false;\n                previousProps = _this;\n              }}\n              aria-label=\"remove carbon copy field\"\n            >\n              <CloseIcon class=\"CloseIcon\" />\n            </button>\n          </div>\n        {/if}\n        {#if _this.show_bcc}\n          <div class=\"cc-container\">\n            <nylas-contacts-search\n              data-cy=\"bcc-field\"\n              placeholder=\"BCC:\"\n              contacts={bcc}\n              value={$message.bcc}\n              change={handleContactsChange(\"bcc\")}\n            />\n            <button\n              type=\"button\"\n              class=\"composer-btn cc-btn\"\n              on:click={() => {\n                setFocus(bccField);\n                _this.show_bcc = false;\n                previousProps = _this;\n              }}\n              aria-label=\"remove blind carbon copy field\"\n            >\n              <CloseIcon class=\"CloseIcon\" />\n            </button>\n          </div>\n        {/if}\n\n        <!-- Subject -->\n        {#if _this.show_subject}\n          <label>\n            <span class=\"sr-only\">Email subject</span>\n            <input\n              type=\"text\"\n              placeholder=\"Subject\"\n              class=\"subject\"\n              value={$message.subject}\n              name=\"subject\"\n              on:input={handleInputChange}\n            />\n          </label>\n        {/if}\n\n        <!-- HTML Editor -->\n        <nylas-html-editor\n          data-cy=\"html-editor\"\n          html={$message.body || template}\n          onchange={handleBodyChange}\n          replace_fields={_this.replace_fields}\n          show_editor_toolbar={_this.show_editor_toolbar}\n        />\n        {#if $attachments.length}\n          <div class=\"nylas-attachments\">\n            <div class=\"attachments-wrapper\">\n              <div class=\"attachments-caption\">Attachments:</div>\n\n              {#each $attachments as fileAttachment}\n                <nylas-composer-attachment\n                  attachment={fileAttachment}\n                  remove={handleRemoveFile}\n                />\n              {/each}\n            </div>\n          </div>\n        {/if}\n      </main>\n      <footer>\n        {#if _this.show_attachment_button && (id || uploadFile)}\n          <label for=\"file-upload\" class=\"composer-btn file-upload\">\n            <AttachmentIcon class=\"AttachmentIcon\" />\n            <span class=\"sr-only\">Attach Files</span>\n          </label>\n        {/if}\n        <div class=\"btn-group\">\n          <button class=\"send-btn\" on:click={handleSend} disabled={!isSendable}>\n            {#if sendPending}Sending{:else}Send{/if}\n          </button>\n        </div>\n\n        <form action=\"\" enctype=\"multipart/form-data\">\n          <input\n            hidden\n            type=\"file\"\n            id=\"file-upload\"\n            on:change={handleFilesChange}\n          />\n        </form>\n      </footer>\n      <!-- Date Picker Component -->\n      {#if showDatepicker}\n        <nylas-composer-datepicker-modal close={datePickerClose} {schedule} />\n      {/if}\n      <!-- Datepicker Alert (if message is scheduled) -->\n      {#if $message.send_at && !sendError && !sendSuccess}\n        <nylas-composer-alert-bar\n          type=\"info\"\n          dismissible={true}\n          ondismiss={removeSchedule}\n        >\n          Send scheduled for\n          <span>{formatDate(new Date(datepickerTimestamp))}</span>\n        </nylas-composer-alert-bar>\n      {/if}\n      <!-- Alerts -->\n      {#if sendError}\n        <nylas-composer-alert-bar type=\"danger\" dismissible={true}>\n          Error: Failed to send the message.\n        </nylas-composer-alert-bar>\n      {/if}\n      {#if sendSuccess}\n        <nylas-composer-alert-bar type=\"success\" dismissible={true}>\n          Message sent successfully!\n        </nylas-composer-alert-bar>\n      {/if}\n    {/if}\n  </div>\n{/if}\n"],"names":["update","BoldIcon","ItalicIcon","UnderlineIcon","JustifyLeftIcon","JustifyRightIcon","JustifyCenterIcon","JustifyIcon","ListIcon","BulletIcon","LinkIcon","initialize","__spreadProps","__spreadValues"],"mappings":"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"}