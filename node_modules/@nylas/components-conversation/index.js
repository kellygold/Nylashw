(function(nt,p){typeof exports=="object"&&typeof module!="undefined"?module.exports=p():typeof define=="function"&&define.amd?define(p):(nt=typeof globalThis!="undefined"?globalThis:nt||self,nt.app=p())})(this,function(){"use strict";const nt=window.customElements.define.bind(window.customElements);window.customElements.define=(t,...e)=>{if(!customElements.get(t))return nt(t,...e)};function p(){}function Oe(t,e){for(const r in e)t[r]=e[r];return t}function Hn(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Ut(t){return t()}function kr(){return Object.create(null)}function Se(t){t.forEach(Ut)}function jt(t){return typeof t=="function"}function ze(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let gt;function wr(t,e){return gt||(gt=document.createElement("a")),gt.href=e,t===gt.href}function Un(t,e){return t!=t?e==e:t!==e}function Tr(t){return Object.keys(t).length===0}function Er(t,...e){if(t==null)return p;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function bt(t,e,r){t.$$.on_destroy.push(Er(e,r))}function He(t){const e={};for(const r in t)r[0]!=="$"&&(e[r]=t[r]);return e}let _t=!1;function jn(){_t=!0}function Bn(){_t=!1}function Gn(t,e,r,n){for(;t<e;){const o=t+(e-t>>1);r(o)<=n?t=o+1:e=o}return t}function Wn(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const l=[];for(let i=0;i<e.length;i++){const f=e[i];f.claim_order!==void 0&&l.push(f)}e=l}const r=new Int32Array(e.length+1),n=new Int32Array(e.length);r[0]=-1;let o=0;for(let l=0;l<e.length;l++){const i=e[l].claim_order,f=(o>0&&e[r[o]].claim_order<=i?o+1:Gn(1,o,T=>e[r[T]].claim_order,i))-1;n[l]=r[f]+1;const g=f+1;r[g]=l,o=Math.max(g,o)}const a=[],s=[];let c=e.length-1;for(let l=r[o]+1;l!=0;l=n[l-1]){for(a.push(e[l-1]);c>=l;c--)s.push(e[c]);c--}for(;c>=0;c--)s.push(e[c]);a.reverse(),s.sort((l,i)=>l.claim_order-i.claim_order);for(let l=0,i=0;l<s.length;l++){for(;i<a.length&&s[l].claim_order>=a[i].claim_order;)i++;const f=i<a.length?a[i]:null;t.insertBefore(s[l],f)}}function N(t,e){t.appendChild(e)}function Bt(t,e){if(_t){for(Wn(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function A(t,e,r){t.insertBefore(e,r||null)}function Ar(t,e,r){_t&&!r?Bt(t,e):(e.parentNode!==t||e.nextSibling!=r)&&t.insertBefore(e,r||null)}function w(t){t.parentNode.removeChild(t)}function Gt(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function R(t){return document.createElement(t)}function ot(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function B(t){return document.createTextNode(t)}function V(){return B(" ")}function Ue(){return B("")}function vt(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function F(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function yt(t,e){for(const r in e)F(t,r,e[r])}function se(t,e,r){e in t?t[e]=typeof t[e]=="boolean"&&r===""?!0:r:F(t,e,r)}function at(t){return Array.from(t.childNodes)}function Jn(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Yn(t,e,r,n,o=!1){Jn(t);const a=(()=>{for(let s=t.claim_info.last_index;s<t.length;s++){const c=t[s];if(e(c)){const l=r(c);return l===void 0?t.splice(s,1):t[s]=l,o||(t.claim_info.last_index=s),c}}for(let s=t.claim_info.last_index-1;s>=0;s--){const c=t[s];if(e(c)){const l=r(c);return l===void 0?t.splice(s,1):t[s]=l,o?l===void 0&&t.claim_info.last_index--:t.claim_info.last_index=s,c}}return n()})();return a.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,a}function Vn(t,e,r,n){return Yn(t,o=>o.nodeName===e,o=>{const a=[];for(let s=0;s<o.attributes.length;s++){const c=o.attributes[s];r[c.name]||a.push(c.name)}a.forEach(s=>o.removeAttribute(s))},()=>n(e))}function kt(t,e,r){return Vn(t,e,r,ot)}function ie(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Or(t,e){t.value=e==null?"":e}function je(t,e,r,n){t.style.setProperty(e,r,n?"important":"")}function ee(t,e,r){t.classList[r?"add":"remove"](e)}function wt(t){const e={};for(const r of t)e[r.name]=r.value;return e}let Tt;function Ne(t){Tt=t}function st(){if(!Tt)throw new Error("Function called outside component initialization");return Tt}function Kn(t){st().$$.before_update.push(t)}function Xn(t){st().$$.on_mount.push(t)}function Zn(t){st().$$.after_update.push(t)}const it=[],Wt=[],Et=[],Sr=[],Qn=Promise.resolve();let Jt=!1;function $n(){Jt||(Jt=!0,Qn.then(G))}function Yt(t){Et.push(t)}let Vt=!1;const Kt=new Set;function G(){if(!Vt){Vt=!0;do{for(let t=0;t<it.length;t+=1){const e=it[t];Ne(e),qn(e.$$)}for(Ne(null),it.length=0;Wt.length;)Wt.pop()();for(let t=0;t<Et.length;t+=1){const e=Et[t];Kt.has(e)||(Kt.add(e),e())}Et.length=0}while(it.length);for(;Sr.length;)Sr.pop()();Jt=!1,Vt=!1,Kt.clear()}}function qn(t){if(t.fragment!==null){t.update(),Se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Yt)}}const At=new Set;let Me;function Ot(){Me={r:0,c:[],p:Me}}function St(){Me.r||Se(Me.c),Me=Me.p}function te(t,e){t&&t.i&&(At.delete(t),t.i(e))}function he(t,e,r,n){if(t&&t.o){if(At.has(t))return;At.add(t),Me.c.push(()=>{At.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function pe(t,e){const r=e.token={};function n(o,a,s,c){if(e.token!==r)return;e.resolved=c;let l=e.ctx;s!==void 0&&(l=l.slice(),l[s]=c);const i=o&&(e.current=o)(l);let f=!1;e.block&&(e.blocks?e.blocks.forEach((g,T)=>{T!==a&&g&&(Ot(),he(g,1,1,()=>{e.blocks[T]===g&&(e.blocks[T]=null)}),St())}):e.block.d(1),i.c(),te(i,1),i.m(e.mount(),e.anchor),f=!0),e.block=i,e.blocks&&(e.blocks[a]=i),f&&G()}if(Hn(t)){const o=st();if(t.then(a=>{Ne(o),n(e.then,1,e.value,a),Ne(null)},a=>{if(Ne(o),n(e.catch,2,e.error,a),Ne(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function lt(t,e,r){const n=e.slice(),{resolved:o}=t;t.current===t.then&&(n[t.value]=o),t.current===t.catch&&(n[t.error]=o),t.block.p(n,r)}function Nr(t,e){const r={},n={},o={$$scope:1};let a=t.length;for(;a--;){const s=t[a],c=e[a];if(c){for(const l in s)l in c||(n[l]=1);for(const l in c)o[l]||(r[l]=c[l],o[l]=1);t[a]=c}else for(const l in s)o[l]=1}for(const s in n)s in r||(r[s]=void 0);return r}function Cr(t){t&&t.c()}function Xt(t,e,r,n){const{fragment:o,on_mount:a,on_destroy:s,after_update:c}=t.$$;o&&o.m(e,r),n||Yt(()=>{const l=a.map(Ut).filter(jt);s?s.push(...l):Se(l),t.$$.on_mount=[]}),c.forEach(Yt)}function Nt(t,e){const r=t.$$;r.fragment!==null&&(Se(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function eo(t,e){t.$$.dirty[0]===-1&&(it.push(t),$n(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Be(t,e,r,n,o,a,s,c=[-1]){const l=Tt;Ne(t);const i=t.$$={fragment:null,ctx:null,props:a,update:p,not_equal:o,bound:kr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:kr(),dirty:c,skip_bound:!1,root:e.target||l.$$.root};s&&s(i.root);let f=!1;if(i.ctx=r?r(t,e.props||{},(g,T,...y)=>{const E=y.length?y[0]:T;return i.ctx&&o(i.ctx[g],i.ctx[g]=E)&&(!i.skip_bound&&i.bound[g]&&i.bound[g](E),f&&eo(t,g)),T}):[],i.update(),f=!0,Se(i.before_update),i.fragment=n?n(i.ctx):!1,e.target){if(e.hydrate){jn();const g=at(e.target);i.fragment&&i.fragment.l(g),g.forEach(w)}else i.fragment&&i.fragment.c();e.intro&&te(t.$$.fragment),Xt(t,e.target,e.anchor,e.customElement),Bn(),G()}Ne(l)}let ct;typeof HTMLElement=="function"&&(ct=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Ut).filter(jt);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){Se(this.$$.on_disconnect)}$destroy(){Nt(this,1),this.$destroy=p}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!Tr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class Dr{$destroy(){Nt(this,1),this.$destroy=p}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const o=n.indexOf(r);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!Tr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ge=[];function to(t,e){return{subscribe:Ce(t,e).subscribe}}function Ce(t,e=p){let r;const n=new Set;function o(c){if(ze(t,c)&&(t=c,r)){const l=!Ge.length;for(const i of n)i[1](),Ge.push(i,t);if(l){for(let i=0;i<Ge.length;i+=2)Ge[i][0](Ge[i+1]);Ge.length=0}}}function a(c){o(c(t))}function s(c,l=p){const i=[c,l];return n.add(i),n.size===1&&(r=e(o)||p),c(t),()=>{n.delete(i),n.size===0&&(r(),r=null)}}return{set:o,update:a,subscribe:s}}function ro(t,e,r){const n=!Array.isArray(t),o=n?[t]:t,a=e.length<2;return to(r,s=>{let c=!1;const l=[];let i=0,f=p;const g=()=>{if(i)return;f();const y=e(n?l[0]:l,s);a?s(y):f=jt(y)?y:p},T=o.map((y,E)=>Er(y,L=>{l[E]=L,i&=~(1<<E),c&&g()},()=>{i|=1<<E}));return c=!0,g(),function(){Se(T),f()}})}function no(){return Ce({})}const Zt=no();var oo=Object.defineProperty,ao=Object.defineProperties,so=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,io=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,xr=(t,e,r)=>e in t?oo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,co=(t,e)=>{for(var r in e||(e={}))io.call(e,r)&&xr(t,r,e[r]);if(Rr)for(var r of Rr(e))lo.call(e,r)&&xr(t,r,e[r]);return t},uo=(t,e)=>ao(t,so(e));async function re(t){if(!t.ok){const e=await t.json().then(n=>n),r=new Error(e.message);return r.name=e.name,Promise.reject({message:r,statusCode:t.status})}return t.json()}function ne(t={component_id:""}){return{method:t.method||"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-Component-Id":t.component_id||"","X-Access-Token":t.access_token||""},body:t.body?JSON.stringify(t.body):void 0}}function le(t,e){throw console.error(e),Zt.update(r=>uo(co({},r),{[t]:e})),e}const Lr={"001":"","002":"ireland-","003":"canada-"};function oe(t){let e="";if(t.substring(3,4)==="-"){const n=t.substring(0,3);typeof Lr[n]!="undefined"&&(e=Lr[n])}return`https://${e}web-components.nylas.com/middleware`}function Ie(t){}const fo=async(t,e,r)=>{const n=await fetch(`${oe(t.component_id)}/contact-list/contacts?limit=${r}&offset=${e}`,ne({component_id:t.component_id,access_token:t.access_token})).then(o=>re(o)).then(o=>o.response).catch(o=>le(t.component_id,o));return n!=null?n:[]},mo=async t=>{const e=await fetch(`${oe(t.component_id)}/contacts${t.query}`,ne({component_id:t.component_id,access_token:t.access_token})).then(r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r));return e!=null?e:[]},ho=async(t,e)=>await fetch(`${oe(t.component_id)}/contacts/${e}/picture`,ne({component_id:t.component_id,access_token:t.access_token})).then(r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r)),Mr=(t,e,r)=>{let n=`${oe(t.component_id)}/threads?view=expanded&not_in=trash&limit=${e}&offset=${r}`;return t.query&&Object.entries(t.query).forEach(o=>n=n.concat(`&${o[0]}=${o[1]}`)),fetch(n,ne(t)).then(o=>re(o)).then(o=>o.response).catch(o=>le(t.component_id,o))};function Ir(t){let e=`${oe(t.component_id)}/threads?view=expanded&not_in=trash&view=count`;return t.query&&Object.entries(t.query).forEach(r=>e=e.concat(`&${r[0]}=${r[1]}`)),t.keywordToSearch&&(e+=`&q=${t.keywordToSearch}`),fetch(e,ne(t)).then(r=>re(r)).then(r=>r.response.count)}const po=t=>{const e=`${oe(t.component_id)}/threads/search?q=${t.keywordToSearch}&view=expanded`;return fetch(e,ne(t)).then(async r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r))},go=async t=>await fetch(`${oe(t.component_id)}/threads/${t.thread_id}?view=expanded`,ne({component_id:t.component_id,access_token:t.access_token})).then(r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r)),bo=(t,e)=>fetch(`${oe(t.component_id)}/threads/${e.id}`,ne({method:"PUT",component_id:t.component_id,access_token:t.access_token,body:{unread:e.unread,starred:e.starred,folder_id:e.folder_id,label_ids:e.label_ids}})).then(r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r)),_o=async(t,e)=>await fetch(`${oe(t)}/manifest`,ne({access_token:e,component_id:t})).then(re).then(r=>r.component.theming).catch(r=>le(t,r)),vo=async(t,e,r)=>await fetch(`${oe(t)}/send`,ne({method:"POST",component_id:t,access_token:r,body:e})).then(n=>re(n)).then(n=>n.response).catch(n=>le(t,n)),yo=async t=>await fetch(`${oe(t.component_id)}/account`,ne(t)).then(r=>re(r)).then(r=>r.response).catch(r=>le(t.component_id,r)),ko=t=>fetch(`${oe(t.component_id)}/neural/conversation`,ne({method:"PUT",access_token:t.access_token,component_id:t.component_id,body:{message_id:t.message_id}})).then(async e=>(await re(e)).response).catch(e=>le(t.component_id,e)),wo=async t=>fetch(`${oe(t.component_id)}/calendars/availability`,ne({method:"POST",component_id:t.component_id,access_token:t.access_token,body:t.body})).then(async e=>{const r=await re(e);return r.response.time_slots=r.response.time_slots.map(n=>(n.start_time=n.start||0,n.end_time=n.end||0,delete n.start,delete n.end,n)),r.response}).catch(e=>le(t.component_id,e));var To=Object.defineProperty,Pr=Object.getOwnPropertySymbols,Eo=Object.prototype.hasOwnProperty,Ao=Object.prototype.propertyIsEnumerable,Fr=(t,e,r)=>e in t?To(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oo=(t,e)=>{for(var r in e||(e={}))Eo.call(e,r)&&Fr(t,r,e[r]);if(Pr)for(var r of Pr(e))Ao.call(e,r)&&Fr(t,r,e[r]);return t};function So(){const t=(r,n)=>{var o,a;const s=JSON.parse(n),c=Oo({},s);if(delete c.forceReload,n=JSON.stringify(c),!(!s.component_id||!((o=s==null?void 0:s.body)==null?void 0:o.start_time)||!((a=s==null?void 0:s.body)==null?void 0:a.end_time))){if(!r[n]||s.forceReload){const l=wo(s);e.update(i=>(i[n]=l,i)),r[n]=l}return r[n]}},e=Ce(new Proxy({},{get:t}));return e}So();var No=Object.defineProperty,zr=Object.getOwnPropertySymbols,Co=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Hr=(t,e,r)=>e in t?No(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ur=(t,e)=>{for(var r in e||(e={}))Co.call(e,r)&&Hr(t,r,e[r]);if(zr)for(var r of zr(e))Do.call(e,r)&&Hr(t,r,e[r]);return t};let ae={};function jr(t){return t.filter(e=>!!e.given_name||!!e.surname||Array.isArray(e.emails)&&e.emails.length>0).map(e=>((!Array.isArray(e.emails)||e.emails.length===0)&&(e.emails=[{email:""}]),e))}function Ro(){const{subscribe:t,set:e,update:r}=Ce({});return{subscribe:t,addContacts:async(n,o,a)=>{var s;const c=JSON.stringify(n);if(!ae[c]&&(n.component_id||n.access_token)){o===0&&Qt.reset();const l=(s=await fo(n,o,a).then(i=>jr(i)).catch(()=>[]))!=null?s:[];return ae[c]=ae[c]?[...ae[c],...l]:l,r(i=>(i[c]=ae[c],Ur({},i))),ae[c]}},addContact:async n=>{var o;const a=JSON.stringify(n);if(!ae[a]&&(n.component_id||n.access_token)){const s=(o=await mo(n).then(c=>jr(c)).catch(()=>[]))!=null?o:[];ae[a]=ae[a]?[...ae[a],...s]:s,r(c=>(c[a]=ae[a],Ur({},c)))}return ae[a]},reset:()=>{ae={},e({})}}}const Qt=Ro(),$t={};function xo(){const{subscribe:t,set:e}=Ce({});return{subscribe:t,getContactAvatar:async(r,n,o=!1)=>{if(!$t[n]||o){const a=await ho(r,n).then(s=>s).catch(()=>"");a&&($t[n]=a)}return $t[n]},reset:()=>e({})}}const Lo=xo();var Mo=Object.defineProperty,Br=Object.getOwnPropertySymbols,Io=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable,Gr=(t,e,r)=>e in t?Mo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,We=(t,e)=>{for(var r in e||(e={}))Io.call(e,r)&&Gr(t,r,e[r]);if(Br)for(var r of Br(e))Po.call(e,r)&&Gr(t,r,e[r]);return t};function Fo(){const{subscribe:t,set:e,update:r}=Ce({}),n={};return{subscribe:t,getConversation:async o=>{const a=JSON.stringify(o);if(!n[a]&&(o.component_id||o.access_token)){const s=await go(o).catch(Ie);s&&(n[a]=s,r(c=>(c[a]=n[a],We({},c))))}return await n[a]},addThread:o=>{r(a=>(a[o.queryKey]=o.data,We({},a)))},updateThread:o=>{r(a=>(a[o.queryKey]=We(We({},a[o.queryKey]),o.data),We({},a)))},addMessageToThread:o=>{r(a=>(a[o.queryKey].messages=a[o.queryKey].messages.map(s=>(s.id===o.data.id&&(s=o.data),s)),We({},a)))},reset:()=>e({})}}const Wr=Fo();var zo=Object.defineProperty,Jr=Object.getOwnPropertySymbols,Ho=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Yr=(t,e,r)=>e in t?zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ut=(t,e)=>{for(var r in e||(e={}))Ho.call(e,r)&&Yr(t,r,e[r]);if(Jr)for(var r of Jr(e))Uo.call(e,r)&&Yr(t,r,e[r]);return t};async function Vr(t){const e=[];for(let r=0;r<t;r++)e.push({isLoaded:!1,threads:[]});return e}function jo(){const{subscribe:t,set:e,update:r}=Ce({});let n={},o;return{subscribe:t,set:e,getThreads:async(a,s,c,l=!1)=>{const i=JSON.stringify(a);if(!a.component_id&&!a.access_token)return[];if(o===void 0||l){const f=await Ir(a).catch(Ie);f&&(o=f)}if(!Array.isArray(n[i])||l){const f=Math.ceil(o/c);n[i]=await Vr(f)}if(typeof n[i][s]=="undefined")return[];if(!n[i][s].isLoaded){const f=await Mr(a,c,s*c).catch(Ie);f&&(n[i][s].threads=f,n[i][s].isLoaded=!0)}return r(f=>(f[i]=n[i],ut({},f))),n[i][s].threads},getNumberOfItems:async a=>{if(!a.component_id&&!a.access_token)return 0;if(typeof o=="undefined"){const s=await Ir(a).catch(Ie);s&&(o=s)}return o},getThreadsWithSearchKeyword:async(a,s=!1)=>{if(!a.component_id&&!a.access_token)return[];const c=JSON.stringify(a);if((!Array.isArray(n[c])||s)&&(n[c]=await Vr(1)),!n[c][0].isLoaded||s){const l=await po(a).catch(Ie);l&&(n[c][0].threads=l,n[c][0].isLoaded=!0)}return r(l=>(l[c]=n[c],ut({},l))),n[c][0].threads},updateThread:async(a,s,c,l,i)=>{const f=await bo(a,c).catch(Ie);if(!n[s][l].isLoaded){const g=await Mr(JSON.parse(s),i,l*i).catch(Ie);g&&(n[s][l].threads=g,n[s][l].isLoaded=!0)}return n[s][l].threads=n[s][l].threads.map(g=>(f&&g.id===f.id&&(g=Object.assign(g,f)),g)),r(g=>(g[s]=n[s],ut({},g))),n[s][l].threads},updateThreadSelection:(a,s,c)=>{const l=n[a][s].threads;if(c){const i=l.find(f=>f.id===c);i&&(i.selected=!i.selected)}else{const i=l.some(f=>f.selected);for(const f of l)f.selected=!i}return r(i=>(i[a]=n[a],ut({},i))),n[a][s].threads},reset:()=>{n={},e({})},hydrateMessageInThread:(a,s,c)=>{var l,i,f;const g=JSON.stringify(s),T=(i=(l=n[g][c])==null?void 0:l.threads)==null?void 0:i.find(y=>y.id===a.thread_id);if(T){const y=(f=T.messages)==null?void 0:f.find(E=>E.id===a.id);y&&(y.body=a.body,r(E=>{if(a.thread_id){let L=E[g][c].threads.find(C=>C.id===T.id);L&&(L=JSON.parse(JSON.stringify(T)))}return ut({},E)}))}return n[g][c].threads}}}const Bo=jo();ro(Bo,t=>{const e={};return Object.entries(t).forEach(([r,n])=>e[r]=n.map(o=>o.threads).flat()),e});function Go(){const t=(r,n)=>{const o=JSON.parse(n);if(!!o.component_id){if(!r[n]){const a=_o(o.component_id,o.access_token);e.update(s=>(s[n]=a,s)),r[n]=a}return r[n]}},e=Ce(new Proxy({},{get:t}));return e}const Wo=Go();function Jo(t){return(e,r)=>{t.dispatchEvent&&t.dispatchEvent(new CustomEvent(e,{detail:r,composed:!0}))}}function qt(t,e,r){return new Proxy(t,{get:(n,o)=>o==="toString"||o==="toJSON"?()=>JSON.stringify(n):Reflect.get(n,o)!==void 0?Kr(Reflect.get(n,o),r[o]):e&&o in e?Kr(e[o],r[o]):r[o],ownKeys:n=>{const o=new Set([...Reflect.ownKeys(n),...Object.keys(e),...Object.keys(r)]);return Array.from(o)},getOwnPropertyDescriptor:(n,o)=>{var a,s;let c=Reflect.getOwnPropertyDescriptor(n,o);return c||(c=(s=(a=e&&Object.getOwnPropertyDescriptor(e,o))!=null?a:r&&Object.getOwnPropertyDescriptor(r,o))!=null?s:{configurable:!0,enumerable:!0,writable:!0},Reflect.defineProperty(n,o,c)),c}})}function Kr(t,e){if(t){if(typeof e=="boolean")return Yo(t);if(typeof e=="number")return Number(t);if(e instanceof Date)return new Date(t)}return t===void 0?e!=null?e:null:t}function Yo(t){return[!0,"true","1"].includes(t)}function Xr(t){let e,r,n,o,a,s;function c(f,g){if(f[2]==="HostDomainNotAllowedError")return Ko;if(f[2]==="IncompatibleProperties")return Vo}let l=c(t),i=l&&l(t);return{c(){var f,g;e=R("div"),i&&i.c(),r=V(),n=R("span"),n.textContent="Debug info:",o=V(),a=R("textarea"),F(n,"class","details"),F(a,"class","details"),a.readOnly=!0,a.value=s=`
      `+t[2]+": "+t[0]+`
      `+((g=(f=t[1].message)==null?void 0:f.message)!=null?g:"")+`
    `,F(e,"class","message-container")},m(f,g){A(f,e,g),i&&i.m(e,null),N(e,r),N(e,n),N(e,o),N(e,a)},p(f,g){var T,y;l===(l=c(f))&&i?i.p(f,g):(i&&i.d(1),i=l&&l(f),i&&(i.c(),i.m(e,r))),g&7&&s!==(s=`
      `+f[2]+": "+f[0]+`
      `+((y=(T=f[1].message)==null?void 0:T.message)!=null?y:"")+`
    `)&&(a.value=s)},d(f){f&&w(e),i&&i.d()}}}function Vo(t){let e;return{c(){e=R("h3"),e.textContent="Your component properties do not work with each other."},m(r,n){A(r,e,n)},p,d(r){r&&w(e)}}}function Ko(t){let e,r,n,o,a,s;return{c(){e=R("h3"),r=B(`You are trying to access this component from\xA0
        `),n=R("code"),n.textContent=`${window.location.hostname}`,o=B(`. The component's settings do not
        allow access from this domain.`),a=V(),s=R("h4"),s.innerHTML=`The list of allowed domains can be modified in your\xA0
        <a href="https://dashboard.nylas.com">Dashboard</a>.`},m(c,l){A(c,e,l),N(e,r),N(e,n),N(e,o),A(c,a,l),A(c,s,l)},p,d(c){c&&w(e),c&&w(a),c&&w(s)}}}function Xo(t){let e,r=t[2]&&t[3]&&Xr(t);return{c(){r&&r.c(),e=Ue(),this.c=p},m(n,o){r&&r.m(n,o),A(n,e,o)},p(n,[o]){n[2]&&n[3]?r?r.p(n,o):(r=Xr(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:p,o:p,d(n){r&&r.d(n),n&&w(e)}}}function Zo(t,e,r){let n;bt(t,Zt,T=>r(8,n=T));var o,a,s,c;let{id:l}=e,i,f;const g=window.location.href.includes("localhost")||window.location.href.includes("127.0.0.1");return t.$$set=T=>{"id"in T&&r(0,l=T.id)},t.$$.update=()=>{t.$$.dirty&499&&(r(1,i=r(4,o=n[l])!==null&&o!==void 0?o:{name:""}),r(2,f=r(7,c=r(5,a=i.name)!==null&&a!==void 0?a:r(6,s=i.message)===null||s===void 0?void 0:s.name)!==null&&c!==void 0?c:""))},[l,i,f,g,o,a,s,c,n]}class Qo extends ct{constructor(e){super();this.shadowRoot.innerHTML=`<style>.message-container{background:#fff6f6;border-radius:5px;box-shadow:0 0 0 1px #aa92a0 inset, 0 0 0 0 transparent;color:#9f3a38;font-size:1.25rem;padding:10px;margin:0 auto;transition:opacity 500ms ease, color 500ms ease,
      background-color 500ms ease, box-shadow 500ms ease,
      -webkit-box-shadow 500ms ease}.message-container *:focus{outline:5px auto Highlight;outline:5px auto -webkit-focus-ring-color}.details{color:#494949;font-size:0.75rem;width:100%}</style>`,Be(this,{target:this.shadowRoot,props:wt(this.attributes),customElement:!0},Zo,Xo,Un,{id:0},null),e&&(e.target&&A(e.target,this,e.anchor),e.props&&(this.$set(e.props),G()))}static get observedAttributes(){return["id"]}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),G()}}customElements.define("nylas-error",Qo);function $o(t){let e,r=(t[0].given_name&&t[0].surname?t[0].given_name.charAt(0)+t[0].surname.charAt(0):t[0].name?t[0].name.charAt(0):t[0].email?t[0].email.charAt(0):"?")+"",n;return{c(){e=R("p"),n=B(r),je(e,"margin","0")},m(o,a){A(o,e,a),N(e,n)},p(o,a){a&1&&r!==(r=(o[0].given_name&&o[0].surname?o[0].given_name.charAt(0)+o[0].surname.charAt(0):o[0].name?o[0].name.charAt(0):o[0].email?o[0].email.charAt(0):"?")+"")&&ie(n,r)},d(o){o&&w(e)}}}function qo(t){let e,r;return{c(){e=R("img"),F(e,"alt",""),je(e,"height",t[1]),je(e,"width",t[2]),je(e,"border-radius","50%"),wr(e.src,r="data:image/jpg;base64,"+t[3])||F(e,"src",r)},m(n,o){A(n,e,o)},p(n,o){o&2&&je(e,"height",n[1]),o&4&&je(e,"width",n[2]),o&8&&!wr(e.src,r="data:image/jpg;base64,"+n[3])&&F(e,"src",r)},d(n){n&&w(e)}}}function ea(t){let e;function r(a,s){if(a[3])return qo;if(a[0])return $o}let n=r(t),o=n&&n(t);return{c(){o&&o.c(),e=Ue(),this.c=p},m(a,s){o&&o.m(a,s),A(a,e,s)},p(a,[s]){n===(n=r(a))&&o?o.p(a,s):(o&&o.d(1),o=n&&n(a),o&&(o.c(),o.m(e.parentNode,e)))},i:p,o:p,d(a){o&&o.d(a),a&&w(e)}}}function ta(t,e,r){let n,{contact:o}=e,{contact_query:a}=e,{height:s="32px"}=e,{width:c="32px"}=e;return Kn(async()=>{o&&o.picture_url?r(3,n=await Lo.getContactAvatar(a,o.id)):r(3,n=null)}),t.$$set=l=>{"contact"in l&&r(0,o=l.contact),"contact_query"in l&&r(4,a=l.contact_query),"height"in l&&r(1,s=l.height),"width"in l&&r(2,c=l.width)},r(3,n=null),[o,s,c,n,a]}class ra extends ct{constructor(e){super();Be(this,{target:this.shadowRoot,props:wt(this.attributes),customElement:!0},ta,ea,ze,{contact:0,contact_query:4,height:1,width:2},null),e&&(e.target&&A(e.target,this,e.anchor),e.props&&(this.$set(e.props),G()))}static get observedAttributes(){return["contact","contact_query","height","width"]}get contact(){return this.$$.ctx[0]}set contact(e){this.$$set({contact:e}),G()}get contact_query(){return this.$$.ctx[4]}set contact_query(e){this.$$set({contact_query:e}),G()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),G()}get width(){return this.$$.ctx[2]}set width(e){this.$$set({width:e}),G()}}customElements.define("nylas-contact-image",ra);function na(t){let e,r,n,o,a,s,c;return{c(){e=R("div"),r=R("p"),n=B(t[0]),o=V(),a=R("button"),a.textContent="Refresh your page",this.c=p,F(a,"type","button")},m(l,i){A(l,e,i),N(e,r),N(r,n),N(e,o),N(e,a),s||(c=vt(a,"click",t[1]),s=!0)},p(l,[i]){i&1&&ie(n,l[0])},i:p,o:p,d(l){l&&w(e),s=!1,c()}}}function oa(t,e,r){let{error_message:n="Uh oh! Looks like an error occurred"}=e;const o=()=>location.reload();return t.$$set=a=>{"error_message"in a&&r(0,n=a.error_message)},[n,o]}class aa extends ct{constructor(e){super();this.shadowRoot.innerHTML="<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}div{background:var(--red-lighter);bottom:0;color:var(--red);font-size:1rem;line-height:24px;min-height:85px;padding:20px 24px;position:fixed;right:0;min-width:240px;z-index:2}button{background:transparent;color:var(--blue);cursor:pointer;font-style:italic;text-decoration:underline;margin-top:10px}</style>",Be(this,{target:this.shadowRoot,props:wt(this.attributes),customElement:!0},oa,na,ze,{error_message:0},null),e&&(e.target&&A(e.target,this,e.anchor),e.props&&(this.$set(e.props),G()))}static get observedAttributes(){return["error_message"]}get error_message(){return this.$$.ctx[0]}set error_message(e){this.$$set({error_message:e}),G()}}customElements.define("nylas-message-error",aa);function sa(t){const e=t.toLocaleTimeString([],{timeStyle:"short"});return e==="12:00 p.m."?"Noon":e.replace(/\./g,"")}function ia(t){const e=r=>[31,21,1].includes(r)?"st ":[22,2].includes(r)?"nd ":[23,3].includes(r)?"rd ":"th ";return t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}).replaceAll(/, /g,e(t.getDate())).replaceAll(/[.]/g,"")}function la(t){return t.toLocaleDateString(void 0,{month:"short",day:"numeric"}).replaceAll(/[.]/g,"")}function Zr(t){const e=new Date;return e.toDateString()===t.toDateString()?sa(t):e.getFullYear()-t.getFullYear()!==0?ia(t):new Date(e.getDate()-1).toDateString()===t.toDateString()?"Yesterday":la(t)}var ca=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ua(t,e,r){return r={path:e,exports:{},require:function(n,o){return fa(n,o==null?r.path:o)}},t(r,r.exports),r.exports}function fa(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Qr=ua(function(t,e){/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */(function(r,n){t.exports=n()})(ca,function(){function r(m){if(Array.isArray(m)){for(var h=0,O=Array(m.length);h<m.length;h++)O[h]=m[h];return O}else return Array.from(m)}var n=Object.hasOwnProperty,o=Object.setPrototypeOf,a=Object.isFrozen,s=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,l=Object.freeze,i=Object.seal,f=Object.create,g=typeof Reflect!="undefined"&&Reflect,T=g.apply,y=g.construct;T||(T=function(h,O,I){return h.apply(O,I)}),l||(l=function(h){return h}),i||(i=function(h){return h}),y||(y=function(h,O){return new(Function.prototype.bind.apply(h,[null].concat(r(O))))});var E=W(Array.prototype.forEach),L=W(Array.prototype.pop),C=W(Array.prototype.push),P=W(String.prototype.toLowerCase),x=W(String.prototype.match),z=W(String.prototype.replace),j=W(String.prototype.indexOf),_=W(String.prototype.trim),D=W(RegExp.prototype.test),M=Ct(TypeError);function W(m){return function(h){for(var O=arguments.length,I=Array(O>1?O-1:0),H=1;H<O;H++)I[H-1]=arguments[H];return T(m,h,I)}}function Ct(m){return function(){for(var h=arguments.length,O=Array(h),I=0;I<h;I++)O[I]=arguments[I];return y(m,O)}}function S(m,h){o&&o(m,null);for(var O=h.length;O--;){var I=h[O];if(typeof I=="string"){var H=P(I);H!==I&&(a(h)||(h[O]=H),I=H)}m[I]=!0}return m}function ge(m){var h=f(null),O=void 0;for(O in m)T(n,m,[O])&&(h[O]=m[O]);return h}function me(m,h){for(;m!==null;){var O=c(m,h);if(O){if(O.get)return W(O.get);if(typeof O.value=="function")return W(O.value)}m=s(m)}function I(H){return console.warn("fallback value for",H),null}return I}var Pe=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),de=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Je=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),X=l(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),De=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ve=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ye=l(["#text"]),Dt=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ft=l(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rt=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),J=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ke=i(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ce=i(/<%[\s\S]*|[\s\S]*%>/gm),Ye=i(/^data-[\-\w.\u00B7-\uFFFF]/),Ve=i(/^aria-[\-\w]+$/),er=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tr=i(/^(?:\w+script|data):/i),pn=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};function ue(m){if(Array.isArray(m)){for(var h=0,O=Array(m.length);h<m.length;h++)O[h]=m[h];return O}else return Array.from(m)}var rr=function(){return typeof window=="undefined"?null:window},nr=function(h,O){if((typeof h=="undefined"?"undefined":we(h))!=="object"||typeof h.createPolicy!="function")return null;var I=null,H="data-tt-policy-suffix";O.currentScript&&O.currentScript.hasAttribute(H)&&(I=O.currentScript.getAttribute(H));var fe="dompurify"+(I?"#"+I:"");try{return h.createPolicy(fe,{createHTML:function(Ke){return Ke}})}catch(Re){return console.warn("TrustedTypes policy "+fe+" could not be created."),null}};function xt(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rr(),h=function(u){return xt(u)};if(h.version="2.3.4",h.removed=[],!m||!m.document||m.document.nodeType!==9)return h.isSupported=!1,h;var O=m.document,I=m.document,H=m.DocumentFragment,fe=m.HTMLTemplateElement,Re=m.Node,Ke=m.Element,Fe=m.NodeFilter,be=m.NamedNodeMap,mt=be===void 0?m.NamedNodeMap||m.MozNamedAttrMap:be,Ba=m.HTMLFormElement,Ga=m.DOMParser,Wa=m.trustedTypes,Lt=Ke.prototype,Ja=me(Lt,"cloneNode"),Ya=me(Lt,"nextSibling"),Va=me(Lt,"childNodes"),or=me(Lt,"parentNode");if(typeof fe=="function"){var ar=I.createElement("template");ar.content&&ar.content.ownerDocument&&(I=ar.content.ownerDocument)}var xe=nr(Wa,O),gn=xe&&Ft?xe.createHTML(""):"",Mt=I,sr=Mt.implementation,Ka=Mt.createNodeIterator,Xa=Mt.createDocumentFragment,Za=Mt.getElementsByTagName,Qa=O.importNode,bn={};try{bn=ge(I).documentMode?I.documentMode:{}}catch(k){}var _e={};h.isSupported=typeof or=="function"&&sr&&typeof sr.createHTMLDocument!="undefined"&&bn!==9;var ir=ke,lr=ce,$a=Ye,qa=Ve,es=tr,_n=pn,cr=er,Z=null,vn=S({},[].concat(ue(Pe),ue(de),ue(Je),ue(De),ue(ye))),K=null,yn=S({},[].concat(ue(Dt),ue(ft),ue(Rt),ue(J))),Y=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,ur=null,kn=!0,fr=!0,wn=!1,Xe=!1,Ze=!1,mr=!1,dr=!1,Qe=!1,Pt=!1,Ft=!1,Tn=!0,hr=!0,dt=!1,$e={},qe=null,En=S({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),An=null,On=S({},["audio","video","img","source","image","track"]),pr=null,Sn=S({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gr="http://www.w3.org/1998/Math/MathML",br="http://www.w3.org/2000/svg",Le="http://www.w3.org/1999/xhtml",zt=Le,_r=!1,et=void 0,ts=["application/xhtml+xml","text/html"],rs="text/html",tt=void 0,rt=null,ns=I.createElement("form"),Nn=function(u){return u instanceof RegExp||u instanceof Function},vr=function(u){rt&&rt===u||((!u||(typeof u=="undefined"?"undefined":we(u))!=="object")&&(u={}),u=ge(u),Z="ALLOWED_TAGS"in u?S({},u.ALLOWED_TAGS):vn,K="ALLOWED_ATTR"in u?S({},u.ALLOWED_ATTR):yn,pr="ADD_URI_SAFE_ATTR"in u?S(ge(Sn),u.ADD_URI_SAFE_ATTR):Sn,An="ADD_DATA_URI_TAGS"in u?S(ge(On),u.ADD_DATA_URI_TAGS):On,qe="FORBID_CONTENTS"in u?S({},u.FORBID_CONTENTS):En,It="FORBID_TAGS"in u?S({},u.FORBID_TAGS):{},ur="FORBID_ATTR"in u?S({},u.FORBID_ATTR):{},$e="USE_PROFILES"in u?u.USE_PROFILES:!1,kn=u.ALLOW_ARIA_ATTR!==!1,fr=u.ALLOW_DATA_ATTR!==!1,wn=u.ALLOW_UNKNOWN_PROTOCOLS||!1,Xe=u.SAFE_FOR_TEMPLATES||!1,Ze=u.WHOLE_DOCUMENT||!1,Qe=u.RETURN_DOM||!1,Pt=u.RETURN_DOM_FRAGMENT||!1,Ft=u.RETURN_TRUSTED_TYPE||!1,dr=u.FORCE_BODY||!1,Tn=u.SANITIZE_DOM!==!1,hr=u.KEEP_CONTENT!==!1,dt=u.IN_PLACE||!1,cr=u.ALLOWED_URI_REGEXP||cr,zt=u.NAMESPACE||Le,u.CUSTOM_ELEMENT_HANDLING&&Nn(u.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=u.CUSTOM_ELEMENT_HANDLING.tagNameCheck),u.CUSTOM_ELEMENT_HANDLING&&Nn(u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),u.CUSTOM_ELEMENT_HANDLING&&typeof u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),et=ts.indexOf(u.PARSER_MEDIA_TYPE)===-1?et=rs:et=u.PARSER_MEDIA_TYPE,tt=et==="application/xhtml+xml"?function(d){return d}:P,Xe&&(fr=!1),Pt&&(Qe=!0),$e&&(Z=S({},[].concat(ue(ye))),K=[],$e.html===!0&&(S(Z,Pe),S(K,Dt)),$e.svg===!0&&(S(Z,de),S(K,ft),S(K,J)),$e.svgFilters===!0&&(S(Z,Je),S(K,ft),S(K,J)),$e.mathMl===!0&&(S(Z,De),S(K,Rt),S(K,J))),u.ADD_TAGS&&(Z===vn&&(Z=ge(Z)),S(Z,u.ADD_TAGS)),u.ADD_ATTR&&(K===yn&&(K=ge(K)),S(K,u.ADD_ATTR)),u.ADD_URI_SAFE_ATTR&&S(pr,u.ADD_URI_SAFE_ATTR),u.FORBID_CONTENTS&&(qe===En&&(qe=ge(qe)),S(qe,u.FORBID_CONTENTS)),hr&&(Z["#text"]=!0),Ze&&S(Z,["html","head","body"]),Z.table&&(S(Z,["tbody"]),delete It.tbody),l&&l(u),rt=u)},Cn=S({},["mi","mo","mn","ms","mtext"]),Dn=S({},["foreignobject","desc","title","annotation-xml"]),Ht=S({},de);S(Ht,Je),S(Ht,X);var yr=S({},De);S(yr,ve);var os=function(u){var d=or(u);(!d||!d.tagName)&&(d={namespaceURI:Le,tagName:"template"});var b=P(u.tagName),U=P(d.tagName);if(u.namespaceURI===br)return d.namespaceURI===Le?b==="svg":d.namespaceURI===gr?b==="svg"&&(U==="annotation-xml"||Cn[U]):Boolean(Ht[b]);if(u.namespaceURI===gr)return d.namespaceURI===Le?b==="math":d.namespaceURI===br?b==="math"&&Dn[U]:Boolean(yr[b]);if(u.namespaceURI===Le){if(d.namespaceURI===br&&!Dn[U]||d.namespaceURI===gr&&!Cn[U])return!1;var Q=S({},["title","style","font","a","script"]);return!yr[b]&&(Q[b]||!Ht[b])}return!1},Te=function(u){C(h.removed,{element:u});try{u.parentNode.removeChild(u)}catch(d){try{u.outerHTML=gn}catch(b){u.remove()}}},Rn=function(u,d){try{C(h.removed,{attribute:d.getAttributeNode(u),from:d})}catch(b){C(h.removed,{attribute:null,from:d})}if(d.removeAttribute(u),u==="is"&&!K[u])if(Qe||Pt)try{Te(d)}catch(b){}else try{d.setAttribute(u,"")}catch(b){}},xn=function(u){var d=void 0,b=void 0;if(dr)u="<remove></remove>"+u;else{var U=x(u,/^[\r\n\t ]+/);b=U&&U[0]}et==="application/xhtml+xml"&&(u='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+u+"</body></html>");var Q=xe?xe.createHTML(u):u;if(zt===Le)try{d=new Ga().parseFromString(Q,et)}catch(q){}if(!d||!d.documentElement){d=sr.createDocument(zt,"template",null);try{d.documentElement.innerHTML=_r?"":Q}catch(q){}}var $=d.body||d.documentElement;return u&&b&&$.insertBefore(I.createTextNode(b),$.childNodes[0]||null),zt===Le?Za.call(d,Ze?"html":"body")[0]:Ze?d.documentElement:$},Ln=function(u){return Ka.call(u.ownerDocument||u,u,Fe.SHOW_ELEMENT|Fe.SHOW_COMMENT|Fe.SHOW_TEXT,null,!1)},as=function(u){return u instanceof Ba&&(typeof u.nodeName!="string"||typeof u.textContent!="string"||typeof u.removeChild!="function"||!(u.attributes instanceof mt)||typeof u.removeAttribute!="function"||typeof u.setAttribute!="function"||typeof u.namespaceURI!="string"||typeof u.insertBefore!="function")},ht=function(u){return(typeof Re=="undefined"?"undefined":we(Re))==="object"?u instanceof Re:u&&(typeof u=="undefined"?"undefined":we(u))==="object"&&typeof u.nodeType=="number"&&typeof u.nodeName=="string"},Ee=function(u,d,b){!_e[u]||E(_e[u],function(U){U.call(h,d,b,rt)})},Mn=function(u){var d=void 0;if(Ee("beforeSanitizeElements",u,null),as(u)||x(u.nodeName,/[\u0080-\uFFFF]/))return Te(u),!0;var b=tt(u.nodeName);if(Ee("uponSanitizeElement",u,{tagName:b,allowedTags:Z}),!ht(u.firstElementChild)&&(!ht(u.content)||!ht(u.content.firstElementChild))&&D(/<[/\w]/g,u.innerHTML)&&D(/<[/\w]/g,u.textContent)||b==="select"&&D(/<template/i,u.innerHTML))return Te(u),!0;if(!Z[b]||It[b]){if(hr&&!qe[b]){var U=or(u)||u.parentNode,Q=Va(u)||u.childNodes;if(Q&&U)for(var $=Q.length,q=$-1;q>=0;--q)U.insertBefore(Ja(Q[q],!0),Ya(u))}return!It[b]&&Pn(b)&&(Y.tagNameCheck instanceof RegExp&&D(Y.tagNameCheck,b)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(b))?!1:(Te(u),!0)}return u instanceof Ke&&!os(u)||(b==="noscript"||b==="noembed")&&D(/<\/no(script|embed)/i,u.innerHTML)?(Te(u),!0):(Xe&&u.nodeType===3&&(d=u.textContent,d=z(d,ir," "),d=z(d,lr," "),u.textContent!==d&&(C(h.removed,{element:u.cloneNode()}),u.textContent=d)),Ee("afterSanitizeElements",u,null),!1)},In=function(u,d,b){if(Tn&&(d==="id"||d==="name")&&(b in I||b in ns))return!1;if(!(fr&&!ur[d]&&D($a,d))){if(!(kn&&D(qa,d))){if(!K[d]||ur[d]){if(!(Pn(u)&&(Y.tagNameCheck instanceof RegExp&&D(Y.tagNameCheck,u)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(u))&&(Y.attributeNameCheck instanceof RegExp&&D(Y.attributeNameCheck,d)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(d))||d==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&D(Y.tagNameCheck,b)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(b))))return!1}else if(!pr[d]){if(!D(cr,z(b,_n,""))){if(!((d==="src"||d==="xlink:href"||d==="href")&&u!=="script"&&j(b,"data:")===0&&An[u])){if(!(wn&&!D(es,z(b,_n,"")))){if(b)return!1}}}}}}return!0},Pn=function(u){return u.indexOf("-")>0},Fn=function(u){var d=void 0,b=void 0,U=void 0,Q=void 0;Ee("beforeSanitizeAttributes",u,null);var $=u.attributes;if(!!$){var q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K};for(Q=$.length;Q--;){d=$[Q];var Ae=d,pt=Ae.name,zn=Ae.namespaceURI;if(b=_(d.value),U=tt(pt),q.attrName=U,q.attrValue=b,q.keepAttr=!0,q.forceKeepAttr=void 0,Ee("uponSanitizeAttribute",u,q),b=q.attrValue,!q.forceKeepAttr&&(Rn(pt,u),!!q.keepAttr)){if(D(/\/>/i,b)){Rn(pt,u);continue}Xe&&(b=z(b,ir," "),b=z(b,lr," "));var is=tt(u.nodeName);if(!!In(is,U,b))try{zn?u.setAttributeNS(zn,pt,b):u.setAttribute(pt,b),L(h.removed)}catch(ls){}}}Ee("afterSanitizeAttributes",u,null)}},ss=function k(u){var d=void 0,b=Ln(u);for(Ee("beforeSanitizeShadowDOM",u,null);d=b.nextNode();)Ee("uponSanitizeShadowNode",d,null),!Mn(d)&&(d.content instanceof H&&k(d.content),Fn(d));Ee("afterSanitizeShadowDOM",u,null)};return h.sanitize=function(k,u){var d=void 0,b=void 0,U=void 0,Q=void 0,$=void 0;if(_r=!k,_r&&(k="<!-->"),typeof k!="string"&&!ht(k)){if(typeof k.toString!="function")throw M("toString is not a function");if(k=k.toString(),typeof k!="string")throw M("dirty is not a string, aborting")}if(!h.isSupported){if(we(m.toStaticHTML)==="object"||typeof m.toStaticHTML=="function"){if(typeof k=="string")return m.toStaticHTML(k);if(ht(k))return m.toStaticHTML(k.outerHTML)}return k}if(mr||vr(u),h.removed=[],typeof k=="string"&&(dt=!1),!dt)if(k instanceof Re)d=xn("<!---->"),b=d.ownerDocument.importNode(k,!0),b.nodeType===1&&b.nodeName==="BODY"||b.nodeName==="HTML"?d=b:d.appendChild(b);else{if(!Qe&&!Xe&&!Ze&&k.indexOf("<")===-1)return xe&&Ft?xe.createHTML(k):k;if(d=xn(k),!d)return Qe?null:gn}d&&dr&&Te(d.firstChild);for(var q=Ln(dt?k:d);U=q.nextNode();)U.nodeType===3&&U===Q||Mn(U)||(U.content instanceof H&&ss(U.content),Fn(U),Q=U);if(Q=null,dt)return k;if(Qe){if(Pt)for($=Xa.call(d.ownerDocument);d.firstChild;)$.appendChild(d.firstChild);else $=d;return K.shadowroot&&($=Qa.call(O,$,!0)),$}var Ae=Ze?d.outerHTML:d.innerHTML;return Xe&&(Ae=z(Ae,ir," "),Ae=z(Ae,lr," ")),xe&&Ft?xe.createHTML(Ae):Ae},h.setConfig=function(k){vr(k),mr=!0},h.clearConfig=function(){rt=null,mr=!1},h.isValidAttribute=function(k,u,d){rt||vr({});var b=tt(k),U=tt(u);return In(b,U,d)},h.addHook=function(k,u){typeof u=="function"&&(_e[k]=_e[k]||[],C(_e[k],u))},h.removeHook=function(k){_e[k]&&L(_e[k])},h.removeHooks=function(k){_e[k]&&(_e[k]=[])},h.removeAllHooks=function(){_e={}},h}var v=xt();return v})});function ma(t){let e,r,n=[{width:"13"},{height:"13"},{viewBox:"0 0 13 13"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let a=0;a<n.length;a+=1)o=Oe(o,n[a]);return{c(){e=ot("svg"),r=ot("path"),this.h()},l(a){e=kt(a,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var s=at(e);r=kt(s,"path",{d:!0,fill:!0}),at(r).forEach(w),s.forEach(w),this.h()},h(){F(r,"d","M0.460449 12.1807L13.0001 6.50003L0.460449 0.819336V5.23765L9.41731 6.50003L0.460449 7.76241V12.1807Z"),F(r,"fill","white"),yt(e,o)},m(a,s){Ar(a,e,s),Bt(e,r)},p(a,[s]){yt(e,o=Nr(n,[{width:"13"},{height:"13"},{viewBox:"0 0 13 13"},{xmlns:"http://www.w3.org/2000/svg"},s&1&&a[0]]))},i:p,o:p,d(a){a&&w(e)}}}function da(t,e,r){return t.$$set=n=>{r(0,e=Oe(Oe({},e),He(n)))},e=He(e),[e]}class ha extends Dr{constructor(e){super();Be(this,e,da,ma,ze,{})}}function pa(t){let e,r,n=[{width:"12"},{height:"12"},{viewBox:"0 0 12 12"},{xmlns:"http://www.w3.org/2000/svg"},t[0]],o={};for(let a=0;a<n.length;a+=1)o=Oe(o,n[a]);return{c(){e=ot("svg"),r=ot("path"),this.h()},l(a){e=kt(a,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var s=at(e);r=kt(s,"path",{d:!0,fill:!0}),at(r).forEach(w),s.forEach(w),this.h()},h(){F(r,"d","M1.49229 3.49889C1.24729 3.74389 1.24729 4.13889 1.49229 4.38389L5.64729 8.53889C5.84229 8.73389 6.15729 8.73389 6.35229 8.53889L10.5073 4.38389C10.7523 4.13889 10.7523 3.74389 10.5073 3.49889C10.2623 3.25389 9.86729 3.25389 9.62229 3.49889L5.99729 7.11889L2.37229 3.49389C2.13229 3.25389 1.73229 3.25389 1.49229 3.49889Z"),F(r,"fill","#636671"),yt(e,o)},m(a,s){Ar(a,e,s),Bt(e,r)},p(a,[s]){yt(e,o=Nr(n,[{width:"12"},{height:"12"},{viewBox:"0 0 12 12"},{xmlns:"http://www.w3.org/2000/svg"},s&1&&a[0]]))},i:p,o:p,d(a){a&&w(e)}}}function ga(t,e,r){return t.$$set=n=>{r(0,e=Oe(Oe({},e),He(n)))},e=He(e),[e]}class ba extends Dr{constructor(e){super();Be(this,e,ga,pa,ze,{})}}function $r(t,e,r){const n=t.slice();return n[51]=e[r],n[53]=r,n}function qr(t,e,r){const n=t.slice();return n[57]=e[r],n}function en(t,e,r){const n=t.slice();return n[57]=e[r],n}function tn(t){let e,r;return{c(){e=R("nylas-message-error"),se(e,"error_message",r=t[5][t[0]].message)},m(n,o){A(n,e,o)},p(n,o){o[0]&33&&r!==(r=n[5][n[0]].message)&&se(e,"error_message",r)},d(n){n&&w(e)}}}function _a(t){let e,r;return{c(){e=R("nylas-message-error"),se(e,"error_message",r=t[62].message)},m(n,o){A(n,e,o)},p(n,o){o[0]&4&&r!==(r=n[62].message)&&se(e,"error_message",r)},i:p,o:p,d(n){n&&w(e)}}}function va(t){let e,r,n,o,a,s,c,l,i,f,g,T,y=t[10].to.length&&rn(t),E=(t[10].to.length>1||t[10].cc.length)&&nn(t),L=t[13]&&on(t),C=t[10].to.length&&ln(t),P=t[10].cc.length&&cn(t),x=t[4],z=[];for(let _=0;_<x.length;_+=1)z[_]=un($r(t,x,_));let j=t[1].show_reply&&fn(t);return{c(){e=R("header"),y&&y.c(),r=V(),E&&E.c(),n=V(),L&&L.c(),o=V(),a=R("header"),C&&C.c(),s=V(),P&&P.c(),c=V(),l=R("div");for(let _=0;_<z.length;_+=1)z[_].c();f=V(),j&&j.c(),g=Ue(),F(e,"class","mobile"),ee(e,"loading",t[8]==="loading"),ee(e,"error",t[14]),ee(e,"expanded",t[13]),F(a,"class","tablet"),ee(a,"error",t[14]),ee(a,"loading",t[8]==="loading"),F(l,"class",i="messages "+t[1].theme),ee(l,"dont-show-avatars",!t[1].show_avatars)},m(_,D){A(_,e,D),y&&y.m(e,null),N(e,r),E&&E.m(e,null),N(e,n),L&&L.m(e,null),A(_,o,D),A(_,a,D),C&&C.m(a,null),N(a,s),P&&P.m(a,null),A(_,c,D),A(_,l,D);for(let M=0;M<z.length;M+=1)z[M].m(l,null);A(_,f,D),j&&j.m(_,D),A(_,g,D),T=!0},p(_,D){if(_[10].to.length?y?y.p(_,D):(y=rn(_),y.c(),y.m(e,r)):y&&(y.d(1),y=null),_[10].to.length>1||_[10].cc.length?E?(E.p(_,D),D[0]&1024&&te(E,1)):(E=nn(_),E.c(),te(E,1),E.m(e,n)):E&&(Ot(),he(E,1,1,()=>{E=null}),St()),_[13]?L?L.p(_,D):(L=on(_),L.c(),L.m(e,null)):L&&(L.d(1),L=null),D[0]&256&&ee(e,"loading",_[8]==="loading"),D[0]&16384&&ee(e,"error",_[14]),D[0]&8192&&ee(e,"expanded",_[13]),_[10].to.length?C?C.p(_,D):(C=ln(_),C.c(),C.m(a,s)):C&&(C.d(1),C=null),_[10].cc.length?P?P.p(_,D):(P=cn(_),P.c(),P.m(a,null)):P&&(P.d(1),P=null),D[0]&16384&&ee(a,"error",_[14]),D[0]&256&&ee(a,"loading",_[8]==="loading"),D[0]&602){x=_[4];let M;for(M=0;M<x.length;M+=1){const W=$r(_,x,M);z[M]?z[M].p(W,D):(z[M]=un(W),z[M].c(),z[M].m(l,null))}for(;M<z.length;M+=1)z[M].d(1);z.length=x.length}(!T||D[0]&2&&i!==(i="messages "+_[1].theme))&&F(l,"class",i),D[0]&2&&ee(l,"dont-show-avatars",!_[1].show_avatars),_[1].show_reply?j?(j.p(_,D),D[0]&2&&te(j,1)):(j=fn(_),j.c(),te(j,1),j.m(g.parentNode,g)):j&&(Ot(),he(j,1,1,()=>{j=null}),St())},i(_){T||(te(E),te(j),T=!0)},o(_){he(E),he(j),T=!1},d(_){_&&w(e),y&&y.d(),E&&E.d(),L&&L.d(),_&&w(o),_&&w(a),C&&C.d(),P&&P.d(),_&&w(c),_&&w(l),Gt(z,_),_&&w(f),j&&j.d(_),_&&w(g)}}}function rn(t){let e,r,n=t[10].to[0].email+"",o;return{c(){e=R("span"),r=B("to: "),o=B(n)},m(a,s){A(a,e,s),N(e,r),N(e,o)},p(a,s){s[0]&1024&&n!==(n=a[10].to[0].email+"")&&ie(o,n)},d(a){a&&w(e)}}}function nn(t){let e,r,n,o,a;return r=new ba({props:{"aria-hidden":"true"}}),{c(){e=R("button"),Cr(r.$$.fragment),F(e,"aria-label","Toggle showing additional emails in this thread")},m(s,c){A(s,e,c),Xt(r,e,null),n=!0,o||(a=vt(e,"click",t[34]),o=!0)},p,i(s){n||(te(r.$$.fragment,s),n=!0)},o(s){he(r.$$.fragment,s),n=!1},d(s){s&&w(e),Nt(r),o=!1,a()}}}function on(t){let e,r,n=t[10].to.slice(1),o=[];for(let c=0;c<n.length;c+=1)o[c]=an(en(t,n,c));let a=t[10].cc,s=[];for(let c=0;c<a.length;c+=1)s[c]=sn(qr(t,a,c));return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=V();for(let c=0;c<s.length;c+=1)s[c].c();r=Ue()},m(c,l){for(let i=0;i<o.length;i+=1)o[i].m(c,l);A(c,e,l);for(let i=0;i<s.length;i+=1)s[i].m(c,l);A(c,r,l)},p(c,l){if(l[0]&1024){n=c[10].to.slice(1);let i;for(i=0;i<n.length;i+=1){const f=en(c,n,i);o[i]?o[i].p(f,l):(o[i]=an(f),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}if(l[0]&1024){a=c[10].cc;let i;for(i=0;i<a.length;i+=1){const f=qr(c,a,i);s[i]?s[i].p(f,l):(s[i]=sn(f),s[i].c(),s[i].m(r.parentNode,r))}for(;i<s.length;i+=1)s[i].d(1);s.length=a.length}},d(c){Gt(o,c),c&&w(e),Gt(s,c),c&&w(r)}}}function an(t){let e,r,n=t[57].email+"",o;return{c(){e=R("span"),r=B("to: "),o=B(n)},m(a,s){A(a,e,s),N(e,r),N(e,o)},p(a,s){s[0]&1024&&n!==(n=a[57].email+"")&&ie(o,n)},d(a){a&&w(e)}}}function sn(t){let e,r,n=t[57].email+"",o;return{c(){e=R("span"),r=B("cc: "),o=B(n)},m(a,s){A(a,e,s),N(e,r),N(e,o)},p(a,s){s[0]&1024&&n!==(n=a[57].email+"")&&ie(o,n)},d(a){a&&w(e)}}}function ln(t){let e,r,n=t[10].to.map(mn).join(", ")+"",o;return{c(){e=R("span"),r=B("to: "),o=B(n)},m(a,s){A(a,e,s),N(e,r),N(e,o)},p(a,s){s[0]&1024&&n!==(n=a[10].to.map(mn).join(", ")+"")&&ie(o,n)},d(a){a&&w(e)}}}function cn(t){let e,r,n=t[10].cc.map(dn).join(", ")+"",o;return{c(){e=R("span"),r=B("cc: "),o=B(n)},m(a,s){A(a,e,s),N(e,r),N(e,o)},p(a,s){s[0]&1024&&n!==(n=a[10].cc.map(dn).join(", ")+"")&&ie(o,n)},d(a){a&&w(e)}}}function ya(t){return{c:p,m:p,p,d:p}}function ka(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Ma,then:Ta,catch:wa,value:55};return pe(e=t[54].email===t[1].you.email_address,n),{c(){n.block.c(),r=V()},m(o,a){n.block.m(o,n.anchor=a),n.mount=()=>r.parentNode,n.anchor=r,A(o,r,a)},p(o,a){t=o,n.ctx=t,a[0]&18&&e!==(e=t[54].email===t[1].you.email_address)&&pe(e,n)||lt(n,t,a)},d(o){n.block.d(o),n.token=null,n=null,o&&w(r)}}}function wa(t){return{c:p,m:p,p,d:p}}function Ta(t){let e,r;function n(...a){return t[35](t[54],...a)}let o={ctx:t,current:null,token:null,hasCatch:!1,pending:La,then:Aa,catch:Ea,value:56};return pe(r=t[6].findIndex(n),o),{c(){e=Ue(),o.block.c()},m(a,s){A(a,e,s),o.block.m(a,o.anchor=s),o.mount=()=>e.parentNode,o.anchor=e},p(a,s){t=a,o.ctx=t,s[0]&80&&r!==(r=t[6].findIndex(n))&&pe(r,o)||lt(o,t,s)},d(a){a&&w(e),o.block.d(a),o.token=null,o=null}}}function Ea(t){return{c:p,m:p,p,d:p}}function Aa(t){let e,r,n,o,a,s,c,l,i,f=Zr(new Date(t[51].date*1e3))+"",g,T,y={ctx:t,current:null,token:null,hasCatch:!1,pending:Na,then:Sa,catch:Oa,value:57};pe(n=t[3][t[54].email],y);function E(P,x){return P[51].conversation?xa:((s==null||x[0]&16)&&(s=!!(P[51].hasOwnProperty("conversation")&&!P[51].conversation)),s?Ra:((c==null||x[0]&16)&&(c=!!P[51].snippet.includes(" On ")),c?Da:Ca))}let L=E(t,[-1,-1,-1]),C=L(t);return{c(){e=R("article"),r=R("div"),y.block.c(),o=V(),a=R("div"),C.c(),l=V(),i=R("div"),g=B(f),F(r,"class","contact"),F(a,"class","body"),F(i,"class","time"),F(e,"class",T="message member-"+(t[56]+1)),ee(e,"you",t[55])},m(P,x){A(P,e,x),N(e,r),y.block.m(r,y.anchor=null),y.mount=()=>r,y.anchor=null,N(e,o),N(e,a),C.m(a,null),N(e,l),N(e,i),N(i,g)},p(P,x){t=P,y.ctx=t,x[0]&24&&n!==(n=t[3][t[54].email])&&pe(n,y)||lt(y,t,x),L===(L=E(t,x))&&C?C.p(t,x):(C.d(1),C=L(t),C&&(C.c(),C.m(a,null))),x[0]&16&&f!==(f=Zr(new Date(t[51].date*1e3))+"")&&ie(g,f),x[0]&80&&T!==(T="message member-"+(t[56]+1))&&F(e,"class",T),x[0]&82&&ee(e,"you",t[55])},d(P){P&&w(e),y.block.d(),y.token=null,y=null,C.d()}}}function Oa(t){return{c:p,m:p,p,d:p}}function Sa(t){let e,r,n;return{c(){e=R("div"),r=R("nylas-contact-image"),se(r,"contact_query",t[9]),se(r,"contact",n=t[57]),se(r,"height","32px"),se(r,"width","32px"),F(e,"class","avatar")},m(o,a){A(o,e,a),N(e,r)},p(o,a){a[0]&512&&se(r,"contact_query",o[9]),a[0]&24&&n!==(n=o[57])&&se(r,"contact",n)},d(o){o&&w(e)}}}function Na(t){return{c:p,m:p,p,d:p}}function Ca(t){let e,r=t[51].snippet+"",n;return{c(){e=R("p"),n=B(r)},m(o,a){A(o,e,a),N(e,n)},p(o,a){a[0]&16&&r!==(r=o[51].snippet+"")&&ie(n,r)},d(o){o&&w(e)}}}function Da(t){let e,r=t[51].snippet.split("On ")[0]+"",n,o,a,s,c=t[51].snippet.split("On ")[1]+"",l;return{c(){e=R("p"),n=B(r),o=V(),a=R("p"),s=B("On "),l=B(c),F(a,"class","after")},m(i,f){A(i,e,f),N(e,n),A(i,o,f),A(i,a,f),N(a,s),N(a,l)},p(i,f){f[0]&16&&r!==(r=i[51].snippet.split("On ")[0]+"")&&ie(n,r),f[0]&16&&c!==(c=i[51].snippet.split("On ")[1]+"")&&ie(l,c)},d(i){i&&w(e),i&&w(o),i&&w(a)}}}function Ra(t){let e,r=Qr.sanitize(t[51].body)+"";return{c(){e=R("p")},m(n,o){A(n,e,o),e.innerHTML=r},p(n,o){o[0]&16&&r!==(r=Qr.sanitize(n[51].body)+"")&&(e.innerHTML=r)},d(n){n&&w(e)}}}function xa(t){let e,r=t[51].conversation+"",n;return{c(){e=R("p"),n=B(r)},m(o,a){A(o,e,a),N(e,n)},p(o,a){a[0]&16&&r!==(r=o[51].conversation+"")&&ie(n,r)},d(o){o&&w(e)}}}function La(t){return{c:p,m:p,p,d:p}}function Ma(t){return{c:p,m:p,p,d:p}}function Ia(t){return{c:p,m:p,p,d:p}}function un(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Ia,then:ka,catch:ya,value:54};return pe(r=t[51].from[0],n),{c(){e=Ue(),n.block.c()},m(o,a){A(o,e,a),n.block.m(o,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e},p(o,a){t=o,n.ctx=t,a[0]&16&&r!==(r=t[51].from[0])&&pe(r,n)||lt(n,t,a)},d(o){o&&w(e),n.block.d(o),n.token=null,n=null}}}function fn(t){let e,r,n,o,a,s,c,l,i,f,g,T,y,E;const L=[Fa,Pa],C=[];function P(x,z){return x[12]==="sending"?0:1}return l=P(t),i=C[l]=L[l](t),{c(){e=R("div"),r=R("form"),n=R("label"),n.textContent="Type and send a response",o=V(),a=R("input"),s=V(),c=R("button"),i.c(),F(n,"for","send-response"),F(n,"class","sr-only"),F(a,"id","send-response"),F(a,"type","text"),F(a,"placeholder","Type a Response"),F(c,"type","submit"),c.disabled=f=!t[10].to.length,F(c,"aria-label",g=`Send${t[12]?"ing":""} email`),F(e,"class","reply-box")},m(x,z){A(x,e,z),N(e,r),N(r,n),N(r,o),N(r,a),Or(a,t[11]),N(r,s),N(r,c),C[l].m(c,null),T=!0,y||(E=[vt(a,"input",t[36]),vt(r,"submit",t[15])],y=!0)},p(x,z){z[0]&2048&&a.value!==x[11]&&Or(a,x[11]);let j=l;l=P(x),l!==j&&(Ot(),he(C[j],1,1,()=>{C[j]=null}),St(),i=C[l],i||(i=C[l]=L[l](x),i.c()),te(i,1),i.m(c,null)),(!T||z[0]&1024&&f!==(f=!x[10].to.length))&&(c.disabled=f),(!T||z[0]&4096&&g!==(g=`Send${x[12]?"ing":""} email`))&&F(c,"aria-label",g)},i(x){T||(te(i),T=!0)},o(x){he(i),T=!1},d(x){x&&w(e),C[l].d(),y=!1,Se(E)}}}function Pa(t){let e,r;return e=new ha({props:{"aria-hidden":"true"}}),{c(){Cr(e.$$.fragment)},m(n,o){Xt(e,n,o),r=!0},i(n){r||(te(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Nt(e,n)}}}function Fa(t){let e;return{c(){e=B("...")},m(r,n){A(r,e,n)},i:p,o:p,d(r){r&&w(e)}}}function za(t){let e;return{c(){e=R("div"),F(e,"class","loading status")},m(r,n){A(r,e,n)},p,i:p,o:p,d(r){r&&w(e)}}}function Ha(t){let e,r,n,o,a,s,c=t[14]&&tn(t),l={ctx:t,current:null,token:null,hasCatch:!0,pending:za,then:va,catch:_a,value:50,error:62,blocks:[,,,]};return pe(a=t[2],l),{c(){e=R("nylas-error"),r=V(),n=R("main"),c&&c.c(),o=V(),l.block.c(),this.c=p,se(e,"id",t[0])},m(i,f){A(i,e,f),A(i,r,f),A(i,n,f),c&&c.m(n,null),N(n,o),l.block.m(n,l.anchor=null),l.mount=()=>n,l.anchor=null,t[37](n),s=!0},p(i,f){t=i,(!s||f[0]&1)&&se(e,"id",t[0]),t[14]?c?c.p(t,f):(c=tn(t),c.c(),c.m(n,o)):c&&(c.d(1),c=null),l.ctx=t,f[0]&4&&a!==(a=t[2])&&pe(a,l)||lt(l,t,f)},i(i){s||(te(l.block),s=!0)},o(i){for(let f=0;f<3;f+=1){const g=l.blocks[f];he(g)}s=!1},d(i){i&&w(e),i&&w(r),i&&w(n),c&&c.d(),l.block.d(),l.token=null,l=null,t[37](null)}}}const Ua=20,mn=t=>t.email,dn=t=>t.email;function ja(t,e,r){let n,o,a,s,c;bt(t,Qt,v=>r(39,a=v)),bt(t,Zt,v=>r(5,s=v)),bt(t,Wo,v=>r(40,c=v));var l=this&&this.__awaiter||function(v,m,h,O){function I(H){return H instanceof h?H:new h(function(fe){fe(H)})}return new(h||(h=Promise))(function(H,fe){function Re(be){try{Fe(O.next(be))}catch(mt){fe(mt)}}function Ke(be){try{Fe(O.throw(be))}catch(mt){fe(mt)}}function Fe(be){be.done?H(be.value):I(be.value).then(Re,Ke)}Fe((O=O.apply(v,m||[])).next())})},i,f,g,T,y;let{id:E=""}=e,{access_token:L=""}=e,{messages:C=[]}=e,{show_avatars:P}=e,{show_reply:x}=e,{theme:z}=e,{thread_id:j}=e,{you:_}=e;const D={show_avatars:!1,show_reply:!1,theme:"theme-1",thread_id:"",you:{}};let M=qt({},{},D),W={};const Ct=Jo(st());let S;Xn(()=>l(void 0,void 0,void 0,function*(){var v;r(28,W=(yield c[JSON.stringify({component_id:E,access_token:L})])||{}),r(1,M=qt(e,W,D)),E&&!((v=M.you)===null||v===void 0?void 0:v.id)&&!S&&r(1,M.you=yield yo({component_id:de.component_id,access_token:L}),M)}));let ge=[],me,Pe=e,de,Je,X=null,De="loading",ve=null,ye;function Dt(v){var m;return l(this,void 0,void 0,function*(){const h=((m=v.messages)===null||m===void 0?void 0:m.reduce((I,H)=>{const fe=H.from[0];return I[fe.email]=fe,I},{}))||{},O=Array.from(Object.values(h))||[];for(const I of O){const H=I.email;ve||r(3,ve={}),H&&!ve[H]&&r(3,ve[H]=yield ft(I),ve)}})}function ft(v){var m;return l(this,void 0,void 0,function*(){if(r(9,ye.query=`?email=${v.email}`,ye),E){let h=a[JSON.stringify(ye)];return h||(h=yield Qt.addContact(ye)),(m=h[0])!==null&&m!==void 0?m:v}else return v})}function Rt(){return l(this,void 0,void 0,function*(){de.component_id&&de.thread_id&&(r(8,De="loading"),r(2,X=yield Wr.getConversation(de)),r(8,De="loaded"))})}let J={to:[],from:[],cc:[]},ke="",ce,Ye=!1,Ve="";function er(){return ko({access_token:L,component_id:E,message_id:o.slice(-Ua).map(v=>v.id)}).then(v=>{v.forEach(m=>{let h=o.find(O=>O.id===m.id);h&&(h.conversation=m.conversation,h.body=m.body)}),r(4,o),r(29,S),r(1,M),r(2,X),r(30,Pe),r(49,e),r(28,W)}),!0}function tr(v){if(v.preventDefault(),Ct("sendMessageClicked",{event:v,message:Object.assign(Object.assign({},J),{body:ke})}),!X&&S){r(11,ke="");return}if(Ve!=="sending"){if(r(12,Ve="sending"),!X)return;vo(E,{from:J.from,to:J.to,body:`${ke} <br /><br /> --Sent with Nylas`,subject:X.subject,cc:J.cc,reply_to_message_id:ce.id,bcc:[]},L).then(m=>{const h={queryKey:Je,data:m};Wr.addMessageToThread(h),r(12,Ve=""),r(11,ke="")})}}Zn(()=>{let v;me&&(v=me.scrollHeight,me.scrollTo({top:v,left:0,behavior:"smooth"}))});let we=!1;const ue=()=>r(13,we=!we),rr=(v,m)=>m.email===v.email&&m.name===v.name;function nr(){ke=this.value,r(11,ke)}function xt(v){Wt[v?"unshift":"push"](()=>{me=v,r(7,me)})}return t.$$set=v=>{r(49,e=Oe(Oe({},e),He(v))),"id"in v&&r(0,E=v.id),"access_token"in v&&r(16,L=v.access_token),"messages"in v&&r(17,C=v.messages),"show_avatars"in v&&r(18,P=v.show_avatars),"show_reply"in v&&r(19,x=v.show_reply),"theme"in v&&r(20,z=v.theme),"thread_id"in v&&r(21,j=v.thread_id),"you"in v&&r(22,_=v.you)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&Ct("manifestLoaded",W),JSON.stringify(Pe)!==JSON.stringify(e)&&(r(1,M=qt(e,W,D)),r(30,Pe=e)),t.$$.dirty[0]&2&&r(29,S=!!M.messages&&M.messages.length>0),t.$$.dirty[0]&32&&r(14,n=!!Object.keys(s).length),t.$$.dirty[0]&536870918&&r(4,o=S?M.messages:(X==null?void 0:X.messages)||[]),t.$$.dirty[0]&4&&r(6,ge=(X==null?void 0:X.participants)||[]),t.$$.dirty[0]&65539&&r(31,de={access_token:L,component_id:E,thread_id:M.thread_id}),t.$$.dirty[1]&1&&(Je=JSON.stringify(de)),t.$$.dirty[0]&536870915&&(E&&M.thread_id?Rt():S&&r(8,De="loaded")),t.$$.dirty[0]&536870928&&!S&&o.length&&!o.filter(v=>v.conversation).length&&er(),t.$$.dirty[0]&65537&&r(9,ye={component_id:E,access_token:L,query:""}),t.$$.dirty[0]&12&&(()=>l(void 0,void 0,void 0,function*(){!ve&&X&&(yield Dt(X))}))(),t.$$.dirty[0]&16&&o&&(r(32,ce=o[o.length-1]),r(33,Ye=!0)),t.$$.dirty[0]&25165826|t.$$.dirty[1]&6&&ce&&Ye&&(r(33,Ye=!1),(r(23,i=M.you)===null||i===void 0?void 0:i.email_address)&&(ce.from[0].email===(r(24,f=M.you)===null||f===void 0?void 0:f.email_address)?(r(10,J.to=ce.to,J),r(10,J.cc=ce.cc.filter(v=>{var m;return v.email!==((m=M.you)===null||m===void 0?void 0:m.email_address)})||[],J)):(r(10,J.to=ce.from,J),r(10,J.cc=[...ce.cc,...ce.to].filter(v=>{var m;return v.email!==((m=M.you)===null||m===void 0?void 0:m.email_address)}),J)))),t.$$.dirty[0]&234881026&&(r(25,g=M.you)===null||g===void 0?void 0:g.email_address)&&r(10,J.from=[{name:r(26,T=M.you)===null||T===void 0?void 0:T.name,email:r(27,y=M.you)===null||y===void 0?void 0:y.email_address}],J)},e=He(e),[E,M,X,ve,o,s,ge,me,De,ye,J,ke,Ve,we,n,tr,L,C,P,x,z,j,_,i,f,g,T,y,W,S,Pe,de,ce,Ye,ue,rr,nr,xt]}class hn extends ct{constructor(e){super();this.shadowRoot.innerHTML='<style>*{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;list-style:none}.sr-only{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}main{--black:#161717;--grey-dark:#636671;--grey:#bdc0cb;--grey-lighter:#dfe1e8;--grey-lightest:#f7f7f8;--grey-background:#f0f1f5;--white:#ffffff;--blue:#002db4;--blue-lighter:#f0f3ff;--red:#ee3248;--red-lighter:#ffeef0;--fs-12:0.75rem;--fs-14:0.875rem;--fs-16:1rem;--black-90:#2c2e2e;--grey-light:#f7f7f8;--grey-warm:#cbcbcb}.events.theme-1 .event:nth-of-type(12n + 1){color:black;background-color:#8dd3c7}.events.theme-1 .event:nth-of-type(12n + 2){color:black;background-color:#ffffb3}.events.theme-1 .event:nth-of-type(12n + 3){color:black;background-color:#bebada}.events.theme-1 .event:nth-of-type(12n + 4){color:black;background-color:#fb8072}.events.theme-1 .event:nth-of-type(12n + 5){color:black;background-color:#80b1d3}.events.theme-1 .event:nth-of-type(12n + 6){color:black;background-color:#fdb462}.events.theme-1 .event:nth-of-type(12n + 7){color:black;background-color:#b3de69}.events.theme-1 .event:nth-of-type(12n + 8){color:black;background-color:#fccde5}.events.theme-1 .event:nth-of-type(12n + 9){color:black;background-color:#d9d9d9}.events.theme-1 .event:nth-of-type(12n + 10){color:black;background-color:#bc80bd}.events.theme-1 .event:nth-of-type(12n + 11){color:black;background-color:#ccebc5}.events.theme-1 .event:nth-of-type(12n + 12){color:black;background-color:#ffed6f}.events.theme-2 .event:nth-of-type(10n + 1){background-color:#1f77b4}.events.theme-2 .event:nth-of-type(10n + 2){background-color:#ff7f0e}.events.theme-2 .event:nth-of-type(10n + 3){background-color:#2ca02c}.events.theme-2 .event:nth-of-type(10n + 4){background-color:#d62728}.events.theme-2 .event:nth-of-type(10n + 5){background-color:#9467bd}.events.theme-2 .event:nth-of-type(10n + 6){background-color:#8c564b}.events.theme-2 .event:nth-of-type(10n + 7){background-color:#e377c2}.events.theme-2 .event:nth-of-type(10n + 8){background-color:#7f7f7f}.events.theme-2 .event:nth-of-type(10n + 9){background-color:#bcbd22}.events.theme-2 .event:nth-of-type(10n + 10){background-color:#17becf}.events.theme-3 .event:nth-of-type(6n + 1){background-color:#2d588a}.events.theme-3 .event:nth-of-type(6n + 2){background-color:#58954c}.events.theme-3 .event:nth-of-type(6n + 3){background-color:#e9a044}.events.theme-3 .event:nth-of-type(6n + 4){background-color:#c12f32}.events.theme-3 .event:nth-of-type(6n + 5){background-color:#723e77}.events.theme-3 .event:nth-of-type(6n + 6){background-color:#7d807f}.events.gmail .event:nth-of-type(6n + 1){background-color:#4285f4}.events.gmail .event:nth-of-type(6n + 2){background-color:#0b8043}.events.gmail .event:nth-of-type(6n + 3){background-color:#d81b60}.events.gmail .event:nth-of-type(6n + 4){background-color:#b39ddb}.events.gmail .event:nth-of-type(6n + 5){background-color:#e4c441}.events.gmail .event:nth-of-type(6n + 6){background-color:#a79b8e}.events.ellsworth-kelly .event:nth-of-type(11n + 1){background-color:#f8b800}.events.ellsworth-kelly .event:nth-of-type(11n + 2){background-color:#4db930}.events.ellsworth-kelly .event:nth-of-type(11n + 3){background-color:#00a14d}.events.ellsworth-kelly .event:nth-of-type(11n + 4){background-color:#008874}.events.ellsworth-kelly .event:nth-of-type(11n + 5){background-color:#0758bb}.events.ellsworth-kelly .event:nth-of-type(11n + 6){background-color:#093cb3}.events.ellsworth-kelly .event:nth-of-type(11n + 7){background-color:#58266e}.events.ellsworth-kelly .event:nth-of-type(11n + 8){background-color:#ab2049}.events.ellsworth-kelly .event:nth-of-type(11n + 9){background-color:#de032c}.events.ellsworth-kelly .event:nth-of-type(11n + 10){background-color:#f52324}.events.ellsworth-kelly .event:nth-of-type(11n + 11){background-color:#fa540e}.messages.theme-1 .message.member-1{color:black;border-color:#8dd3c7}.messages.theme-1 .message.member-1 .avatar{background-color:#8dd3c7}.messages.theme-1 .message.member-2{color:black;border-color:#ffffb3}.messages.theme-1 .message.member-2 .avatar{background-color:#ffffb3}.messages.theme-1 .message.member-3{color:black;border-color:#bebada}.messages.theme-1 .message.member-3 .avatar{background-color:#bebada}.messages.theme-1 .message.member-4{color:black;border-color:#fb8072}.messages.theme-1 .message.member-4 .avatar{background-color:#fb8072}.messages.theme-1 .message.member-5{color:black;border-color:#80b1d3}.messages.theme-1 .message.member-5 .avatar{background-color:#80b1d3}.messages.theme-1 .message.member-6{color:black;border-color:#fdb462}.messages.theme-1 .message.member-6 .avatar{background-color:#fdb462}.messages.theme-1 .message.member-7{color:black;border-color:#b3de69}.messages.theme-1 .message.member-7 .avatar{background-color:#b3de69}.messages.theme-1 .message.member-8{color:black;border-color:#fccde5}.messages.theme-1 .message.member-8 .avatar{background-color:#fccde5}.messages.theme-1 .message.member-9{color:black;border-color:#d9d9d9}.messages.theme-1 .message.member-9 .avatar{background-color:#d9d9d9}.messages.theme-1 .message.member-10{color:black;border-color:#bc80bd}.messages.theme-1 .message.member-10 .avatar{background-color:#bc80bd}.messages.theme-1 .message.member-11{color:black;border-color:#ccebc5}.messages.theme-1 .message.member-11 .avatar{background-color:#ccebc5}.messages.theme-1 .message.member-12{color:black;border-color:#ffed6f}.messages.theme-1 .message.member-12 .avatar{background-color:#ffed6f}.messages.theme-2 .message.member-1{border-color:#1f77b4}.messages.theme-2 .message.member-1 .avatar{background-color:#1f77b4}.messages.theme-2 .message.member-2{border-color:#ff7f0e}.messages.theme-2 .message.member-2 .avatar{background-color:#ff7f0e}.messages.theme-2 .message.member-3{border-color:#2ca02c}.messages.theme-2 .message.member-3 .avatar{background-color:#2ca02c}.messages.theme-2 .message.member-4{border-color:#d62728}.messages.theme-2 .message.member-4 .avatar{background-color:#d62728}.messages.theme-2 .message.member-5{border-color:#9467bd}.messages.theme-2 .message.member-5 .avatar{background-color:#9467bd}.messages.theme-2 .message.member-6{border-color:#8c564b}.messages.theme-2 .message.member-6 .avatar{background-color:#8c564b}.messages.theme-2 .message.member-7{border-color:#e377c2}.messages.theme-2 .message.member-7 .avatar{background-color:#e377c2}.messages.theme-2 .message.member-8{border-color:#7f7f7f}.messages.theme-2 .message.member-8 .avatar{background-color:#7f7f7f}.messages.theme-2 .message.member-9{border-color:#bcbd22}.messages.theme-2 .message.member-9 .avatar{background-color:#bcbd22}.messages.theme-2 .message.member-10{border-color:#17becf}.messages.theme-2 .message.member-10 .avatar{background-color:#17becf}.messages.theme-3 .message.member-1{border-color:#2d588a}.messages.theme-3 .message.member-1 .avatar{background-color:#2d588a}.messages.theme-3 .message.member-2{border-color:#58954c}.messages.theme-3 .message.member-2 .avatar{background-color:#58954c}.messages.theme-3 .message.member-3{border-color:#e9a044}.messages.theme-3 .message.member-3 .avatar{background-color:#e9a044}.messages.theme-3 .message.member-4{border-color:#c12f32}.messages.theme-3 .message.member-4 .avatar{background-color:#c12f32}.messages.theme-3 .message.member-5{border-color:#723e77}.messages.theme-3 .message.member-5 .avatar{background-color:#723e77}.messages.theme-3 .message.member-6{border-color:#7d807f}.messages.theme-3 .message.member-6 .avatar{background-color:#7d807f}.messages.gmail .message.member-1{border-color:#4285f4}.messages.gmail .message.member-1 .avatar{background-color:#4285f4}.messages.gmail .message.member-2{border-color:#0b8043}.messages.gmail .message.member-2 .avatar{background-color:#0b8043}.messages.gmail .message.member-3{border-color:#d81b60}.messages.gmail .message.member-3 .avatar{background-color:#d81b60}.messages.gmail .message.member-4{border-color:#b39ddb}.messages.gmail .message.member-4 .avatar{background-color:#b39ddb}.messages.gmail .message.member-5{border-color:#e4c441}.messages.gmail .message.member-5 .avatar{background-color:#e4c441}.messages.gmail .message.member-6{border-color:#a79b8e}.messages.gmail .message.member-6 .avatar{background-color:#a79b8e}.messages.ellsworth-kelly .message.member-1{border-color:#f8b800}.messages.ellsworth-kelly .message.member-1 .avatar{background-color:#f8b800}.messages.ellsworth-kelly .message.member-2{border-color:#4db930}.messages.ellsworth-kelly .message.member-2 .avatar{background-color:#4db930}.messages.ellsworth-kelly .message.member-3{border-color:#00a14d}.messages.ellsworth-kelly .message.member-3 .avatar{background-color:#00a14d}.messages.ellsworth-kelly .message.member-4{border-color:#008874}.messages.ellsworth-kelly .message.member-4 .avatar{background-color:#008874}.messages.ellsworth-kelly .message.member-5{border-color:#0758bb}.messages.ellsworth-kelly .message.member-5 .avatar{background-color:#0758bb}.messages.ellsworth-kelly .message.member-6{border-color:#093cb3}.messages.ellsworth-kelly .message.member-6 .avatar{background-color:#093cb3}.messages.ellsworth-kelly .message.member-7{border-color:#58266e}.messages.ellsworth-kelly .message.member-7 .avatar{background-color:#58266e}.messages.ellsworth-kelly .message.member-8{border-color:#ab2049}.messages.ellsworth-kelly .message.member-8 .avatar{background-color:#ab2049}.messages.ellsworth-kelly .message.member-9{border-color:#de032c}.messages.ellsworth-kelly .message.member-9 .avatar{background-color:#de032c}.messages.ellsworth-kelly .message.member-10{border-color:#f52324}.messages.ellsworth-kelly .message.member-10 .avatar{background-color:#f52324}.messages.ellsworth-kelly .message.member-11{border-color:#fa540e}.messages.ellsworth-kelly .message.member-11 .avatar{background-color:#fa540e}main{height:100%;max-height:100vh;width:100%;overflow:auto;position:relative;font-family:sans-serif;background-color:var(--conversation-background, var(--grey-light))}@keyframes progress{0%{width:0}100%{width:100%}}.loading::after{background-color:var(--blue-lighter);z-index:-1}.loading::before{animation:progress 2s ease-in-out infinite;background-color:var(--blue)}.loading::before,.loading::after{top:calc(var(--fs-14) + 30px);left:0;content:"";display:block;height:4px;position:absolute}.loading.status{border-top:calc(var(--fs-14) + 30px) solid #fff;border-bottom:50px solid #fff;height:calc(100vh - (var(--fs-14) + 80px));overflow:hidden}header{display:flex;background:var(--conversation-header-background, var(--white));min-height:var(--fs-14);padding:15px 32px;gap:32px;color:var(--conversation-header-color, var(--black));font-size:var(--fs-14);position:sticky;width:calc(100% - 64px);top:0;z-index:1}@keyframes progress{0%{width:0}100%{width:100%}}header.loading::after{background-color:var(--blue-lighter);z-index:-1}header.loading::before{animation:progress 2s ease-in-out infinite;background-color:var(--blue)}header.loading::before,header.loading::after{bottom:0;left:0;content:"";display:block;height:4px;position:absolute}@keyframes progress{0%{width:0}100%{width:100%}}header.error::after{background-color:var(--red);z-index:-1}header.error::before{animation:progress 2s ease-in-out infinite;background-color:var(--red)}header.error::before,header.error::after{bottom:0;left:0;content:"";display:block;height:4px;position:absolute}header.error::before,header.error::after{animation:none;width:100%}header.mobile{width:calc(100% - (32px * 2))}@media(min-width: 768px){header.mobile{display:none}}header.mobile button{position:absolute;right:32px;top:16px;background:none;display:flex}header.mobile.expanded{display:grid;gap:12px}header.mobile.expanded button{rotate:180deg}header.tablet{display:none}@media(min-width: 768px){header.tablet{display:flex}}.messages{display:grid;gap:1rem;padding:1rem;padding:61px 0 49px 0}.messages .message{max-width:min(400px, calc(100% - 32px - 1rem));display:grid;column-gap:1rem;row-gap:0.25rem;grid-template-columns:32px 1fr;grid-template-rows:auto auto;transition:0.5s}@media(min-width: 768px){.messages .message{width:max-content;max-width:600px}}@media(min-width: 1140px){.messages .message{max-width:752px}}.messages .message:last-child{padding-bottom:2rem}.messages .message .body{border-radius:8px;background-color:var(--conversation-peer-message-background, var(--white));color:var(--conversation-peer-message-color, var(--black));max-height:50vh;overflow:auto;position:relative}.messages .message .contact{display:flex;flex-direction:column;align-items:center;grid-template-rows:auto 1fr;gap:0.5rem}.messages .message .contact .avatar{border-radius:20px;width:32px;height:32px;text-align:center;color:white;font-size:1rem;font-weight:bold;background-color:blue;overflow:hidden;display:grid;align-items:center;justify-items:center}.messages .message .contact .email{font-size:0.8rem;color:#555;width:100%;overflow:hidden;text-overflow:ellipsis}.messages .message .time{grid-column:2/3;font-size:var(--fs-12);color:var(--grey-dark)}.messages .message p{padding:1rem;font-weight:300;line-height:1.3em;font-size:0.9em;border-radius:8px;white-space:pre-line}.messages .message p.after{padding-top:0;margin-top:-1rem;color:var(--grey-dark)}.messages .message.you{justify-self:end;grid-template-columns:1fr 32px}.messages .message.you .contact{grid-row:1/2;grid-column:2/3}.messages .message.you .body{order:1;grid-column:1/1;color:var(--conversation-your-message-color, var(--white));background-color:var(--conversation-your-message-background, var(--blue))}.messages .message.you .body p.after{color:var(--grey)}.messages .message.you .time{order:1;grid-column:1/1}.messages.dont-show-avatars .message{column-gap:0;grid-template-columns:0 1fr;width:clamp(200px, calc(100% - 4rem), 700px)}.messages.dont-show-avatars .message .contact{overflow:hidden}.messages.dont-show-avatars .message.you{grid-template-columns:1fr 0}.reply-box{position:sticky;width:100%;bottom:0;z-index:1}.reply-box form{position:relative;display:flex;align-items:center}.reply-box form button[type=submit]{position:absolute;right:1rem;border-radius:4px;background-color:var(--blue);height:28px;width:28px;color:white;display:flex;align-items:center;justify-content:center}.reply-box form button[type=submit]:disabled{cursor:not-allowed;background-color:gray}.reply-box form input{border-top:1px solid #ebebeb;height:25px;padding:12px 1rem;width:100%;font-size:var(--fs-16);color:var(--conversation-reply-color, var(--grey-black));background-color:var(--conversation-reply-background, var(--white))}.reply-box form input::placeholder{color:var(--conversation-reply-color, var(--grey))}</style>',Be(this,{target:this.shadowRoot,props:wt(this.attributes),customElement:!0},ja,Ha,ze,{id:0,access_token:16,messages:17,show_avatars:18,show_reply:19,theme:20,thread_id:21,you:22},null,[-1,-1,-1]),e&&(e.target&&A(e.target,this,e.anchor),e.props&&(this.$set(e.props),G()))}static get observedAttributes(){return["id","access_token","messages","show_avatars","show_reply","theme","thread_id","you"]}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),G()}get access_token(){return this.$$.ctx[16]}set access_token(e){this.$$set({access_token:e}),G()}get messages(){return this.$$.ctx[17]}set messages(e){this.$$set({messages:e}),G()}get show_avatars(){return this.$$.ctx[18]}set show_avatars(e){this.$$set({show_avatars:e}),G()}get show_reply(){return this.$$.ctx[19]}set show_reply(e){this.$$set({show_reply:e}),G()}get theme(){return this.$$.ctx[20]}set theme(e){this.$$set({theme:e}),G()}get thread_id(){return this.$$.ctx[21]}set thread_id(e){this.$$set({thread_id:e}),G()}get you(){return this.$$.ctx[22]}set you(e){this.$$set({you:e}),G()}}return customElements.define("nylas-conversation",hn),hn});
//# sourceMappingURL=index.js.map
